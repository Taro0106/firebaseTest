const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ListView-CqyzCYbZ.js","assets/ListView-CYpwZ_9a.css","assets/AddFavoryView-CGCm1cjI.js","assets/AddFavoryView-wrXkTQlD.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ve={},os=[],an=()=>{},ap=()=>!1,fa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Sl=t=>t.startsWith("onUpdate:"),et=Object.assign,Cl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Cy=Object.prototype.hasOwnProperty,be=(t,e)=>Cy.call(t,e),se=Array.isArray,as=t=>Bi(t)==="[object Map]",da=t=>Bi(t)==="[object Set]",bh=t=>Bi(t)==="[object Date]",ue=t=>typeof t=="function",qe=t=>typeof t=="string",pn=t=>typeof t=="symbol",Pe=t=>t!==null&&typeof t=="object",cp=t=>(Pe(t)||ue(t))&&ue(t.then)&&ue(t.catch),lp=Object.prototype.toString,Bi=t=>lp.call(t),Py=t=>Bi(t).slice(8,-1),up=t=>Bi(t)==="[object Object]",Pl=t=>qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ai=bl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pa=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Ny=/-\w/g,Ut=pa(t=>t.replace(Ny,e=>e.slice(1).toUpperCase())),Vy=/\B([A-Z])/g,qr=pa(t=>t.replace(Vy,"-$1").toLowerCase()),ga=pa(t=>t.charAt(0).toUpperCase()+t.slice(1)),uc=pa(t=>t?`on${ga(t)}`:""),tr=(t,e)=>!Object.is(t,e),vo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},hp=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ma=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Dy=t=>{const e=qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Sh;const _a=()=>Sh||(Sh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nl(t){if(se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=qe(r)?My(r):Nl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(qe(t)||Pe(t))return t}const Oy=/;(?![^(]*\))/g,ky=/:([^]+)/,xy=/\/\*[^]*?\*\//g;function My(t){const e={};return t.replace(xy,"").split(Oy).forEach(n=>{if(n){const r=n.split(ky);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ya(t){let e="";if(qe(t))e=t;else if(se(t))for(let n=0;n<t.length;n++){const r=ya(t[n]);r&&(e+=r+" ")}else if(Pe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ly="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fy=bl(Ly);function fp(t){return!!t||t===""}function Uy(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ea(t[r],e[r]);return n}function Ea(t,e){if(t===e)return!0;let n=bh(t),r=bh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=pn(t),r=pn(e),n||r)return t===e;if(n=se(t),r=se(e),n||r)return n&&r?Uy(t,e):!1;if(n=Pe(t),r=Pe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!Ea(t[o],e[o]))return!1}}return String(t)===String(e)}function By(t,e){return t.findIndex(n=>Ea(n,e))}const dp=t=>!!(t&&t.__v_isRef===!0),To=t=>qe(t)?t:t==null?"":se(t)||Pe(t)&&(t.toString===lp||!ue(t.toString))?dp(t)?To(t.value):JSON.stringify(t,pp,2):String(t),pp=(t,e)=>dp(e)?pp(t,e.value):as(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[hc(r,i)+" =>"]=s,n),{})}:da(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>hc(n))}:pn(e)?hc(e):Pe(e)&&!se(e)&&!up(e)?String(e):e,hc=(t,e="")=>{var n;return pn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let wt;class jy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!e&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=wt;try{return wt=this,e()}finally{wt=n}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function qy(){return wt}let De;const fc=new WeakSet;class gp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fc.has(this)&&(fc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_p(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ch(this),yp(this);const e=De,n=zt;De=this,zt=!0;try{return this.fn()}finally{Ep(this),De=e,zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ol(e);this.deps=this.depsTail=void 0,Ch(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fc(this)&&this.run()}get dirty(){return Fc(this)}}let mp=0,ci,li;function _p(t,e=!1){if(t.flags|=8,e){t.next=li,li=t;return}t.next=ci,ci=t}function Vl(){mp++}function Dl(){if(--mp>0)return;if(li){let e=li;for(li=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ci;){let e=ci;for(ci=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function yp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ep(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ol(r),$y(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Fc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function vp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ii)||(t.globalVersion=Ii,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Fc(t))))return;t.flags|=2;const e=t.dep,n=De,r=zt;De=t,zt=!0;try{yp(t);const s=t.fn(t._value);(e.version===0||tr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{De=n,zt=r,Ep(t),t.flags&=-3}}function Ol(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ol(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function $y(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let zt=!0;const Tp=[];function Pn(){Tp.push(zt),zt=!1}function Nn(){const t=Tp.pop();zt=t===void 0?!0:t}function Ch(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=De;De=void 0;try{e()}finally{De=n}}}let Ii=0;class Hy{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class kl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!De||!zt||De===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==De)n=this.activeLink=new Hy(De,this),De.deps?(n.prevDep=De.depsTail,De.depsTail.nextDep=n,De.depsTail=n):De.deps=De.depsTail=n,Ip(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=De.depsTail,n.nextDep=void 0,De.depsTail.nextDep=n,De.depsTail=n,De.deps===n&&(De.deps=r)}return n}trigger(e){this.version++,Ii++,this.notify(e)}notify(e){Vl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Dl()}}}function Ip(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ip(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Uc=new WeakMap,Dr=Symbol(""),Bc=Symbol(""),wi=Symbol("");function ht(t,e,n){if(zt&&De){let r=Uc.get(t);r||Uc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new kl),s.map=r,s.key=n),s.track()}}function An(t,e,n,r,s,i){const o=Uc.get(t);if(!o){Ii++;return}const c=l=>{l&&l.trigger()};if(Vl(),e==="clear")o.forEach(c);else{const l=se(t),u=l&&Pl(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,g)=>{(g==="length"||g===wi||!pn(g)&&g>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(wi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(Dr)),as(t)&&c(o.get(Bc)));break;case"delete":l||(c(o.get(Dr)),as(t)&&c(o.get(Bc)));break;case"set":as(t)&&c(o.get(Dr));break}}Dl()}function Yr(t){const e=we(t);return e===t?e:(ht(e,"iterate",wi),Ft(t)?e:e.map(Qt))}function va(t){return ht(t=we(t),"iterate",wi),t}function Wn(t,e){return Vn(t)?Or(t)?_s(Qt(e)):_s(e):Qt(e)}const Gy={__proto__:null,[Symbol.iterator](){return dc(this,Symbol.iterator,t=>Wn(this,t))},concat(...t){return Yr(this).concat(...t.map(e=>se(e)?Yr(e):e))},entries(){return dc(this,"entries",t=>(t[1]=Wn(this,t[1]),t))},every(t,e){return yn(this,"every",t,e,void 0,arguments)},filter(t,e){return yn(this,"filter",t,e,n=>n.map(r=>Wn(this,r)),arguments)},find(t,e){return yn(this,"find",t,e,n=>Wn(this,n),arguments)},findIndex(t,e){return yn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return yn(this,"findLast",t,e,n=>Wn(this,n),arguments)},findLastIndex(t,e){return yn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return yn(this,"forEach",t,e,void 0,arguments)},includes(...t){return pc(this,"includes",t)},indexOf(...t){return pc(this,"indexOf",t)},join(t){return Yr(this).join(t)},lastIndexOf(...t){return pc(this,"lastIndexOf",t)},map(t,e){return yn(this,"map",t,e,void 0,arguments)},pop(){return Ys(this,"pop")},push(...t){return Ys(this,"push",t)},reduce(t,...e){return Ph(this,"reduce",t,e)},reduceRight(t,...e){return Ph(this,"reduceRight",t,e)},shift(){return Ys(this,"shift")},some(t,e){return yn(this,"some",t,e,void 0,arguments)},splice(...t){return Ys(this,"splice",t)},toReversed(){return Yr(this).toReversed()},toSorted(t){return Yr(this).toSorted(t)},toSpliced(...t){return Yr(this).toSpliced(...t)},unshift(...t){return Ys(this,"unshift",t)},values(){return dc(this,"values",t=>Wn(this,t))}};function dc(t,e,n){const r=va(t),s=r[e]();return r!==t&&!Ft(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const zy=Array.prototype;function yn(t,e,n,r,s,i){const o=va(t),c=o!==t&&!Ft(t),l=o[e];if(l!==zy[e]){const p=l.apply(t,i);return c?Qt(p):p}let u=n;o!==t&&(c?u=function(p,g){return n.call(this,Wn(t,p),g,t)}:n.length>2&&(u=function(p,g){return n.call(this,p,g,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function Ph(t,e,n,r){const s=va(t);let i=n;return s!==t&&(Ft(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,Wn(t,c),l,t)}),s[e](i,...r)}function pc(t,e,n){const r=we(t);ht(r,"iterate",wi);const s=r[e](...n);return(s===-1||s===!1)&&Ll(n[0])?(n[0]=we(n[0]),r[e](...n)):s}function Ys(t,e,n=[]){Pn(),Vl();const r=we(t)[e].apply(t,n);return Dl(),Nn(),r}const Wy=bl("__proto__,__v_isRef,__isVue"),wp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pn));function Ky(t){pn(t)||(t=String(t));const e=we(this);return ht(e,"has",t),e.hasOwnProperty(t)}class Ap{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?sE:Cp:i?Sp:bp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=se(e);if(!s){let l;if(o&&(l=Gy[n]))return l;if(n==="hasOwnProperty")return Ky}const c=Reflect.get(e,n,pt(e)?e:r);if((pn(n)?wp.has(n):Wy(n))||(s||ht(e,"get",n),i))return c;if(pt(c)){const l=o&&Pl(n)?c:c.value;return s&&Pe(l)?qc(l):l}return Pe(c)?s?qc(c):Ta(c):c}}class Rp extends Ap{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=se(e)&&Pl(n);if(!this._isShallow){const u=Vn(i);if(!Ft(r)&&!Vn(r)&&(i=we(i),r=we(r)),!o&&pt(i)&&!pt(r))return u||(i.value=r),!0}const c=o?Number(n)<e.length:be(e,n),l=Reflect.set(e,n,r,pt(e)?e:s);return e===we(s)&&(c?tr(r,i)&&An(e,"set",n,r):An(e,"add",n,r)),l}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&An(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!pn(n)||!wp.has(n))&&ht(e,"has",n),r}ownKeys(e){return ht(e,"iterate",se(e)?"length":Dr),Reflect.ownKeys(e)}}class Qy extends Ap{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Jy=new Rp,Xy=new Qy,Yy=new Rp(!0);const jc=t=>t,lo=t=>Reflect.getPrototypeOf(t);function Zy(t,e,n){return function(...r){const s=this.__v_raw,i=we(s),o=as(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?jc:e?_s:Qt;return!e&&ht(i,"iterate",l?Bc:Dr),{next(){const{value:p,done:g}=u.next();return g?{value:p,done:g}:{value:c?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function uo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function eE(t,e){const n={get(s){const i=this.__v_raw,o=we(i),c=we(s);t||(tr(s,c)&&ht(o,"get",s),ht(o,"get",c));const{has:l}=lo(o),u=e?jc:t?_s:Qt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&ht(we(s),"iterate",Dr),s.size},has(s){const i=this.__v_raw,o=we(i),c=we(s);return t||(tr(s,c)&&ht(o,"has",s),ht(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=we(c),u=e?jc:t?_s:Qt;return!t&&ht(l,"iterate",Dr),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return et(n,t?{add:uo("add"),set:uo("set"),delete:uo("delete"),clear:uo("clear")}:{add(s){!e&&!Ft(s)&&!Vn(s)&&(s=we(s));const i=we(this);return lo(i).has.call(i,s)||(i.add(s),An(i,"add",s,s)),this},set(s,i){!e&&!Ft(i)&&!Vn(i)&&(i=we(i));const o=we(this),{has:c,get:l}=lo(o);let u=c.call(o,s);u||(s=we(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?tr(i,f)&&An(o,"set",s,i):An(o,"add",s,i),this},delete(s){const i=we(this),{has:o,get:c}=lo(i);let l=o.call(i,s);l||(s=we(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&An(i,"delete",s,void 0),u},clear(){const s=we(this),i=s.size!==0,o=s.clear();return i&&An(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Zy(s,t,e)}),n}function xl(t,e){const n=eE(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const tE={get:xl(!1,!1)},nE={get:xl(!1,!0)},rE={get:xl(!0,!1)};const bp=new WeakMap,Sp=new WeakMap,Cp=new WeakMap,sE=new WeakMap;function iE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oE(t){return t.__v_skip||!Object.isExtensible(t)?0:iE(Py(t))}function Ta(t){return Vn(t)?t:Ml(t,!1,Jy,tE,bp)}function Pp(t){return Ml(t,!1,Yy,nE,Sp)}function qc(t){return Ml(t,!0,Xy,rE,Cp)}function Ml(t,e,n,r,s){if(!Pe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=oE(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function Or(t){return Vn(t)?Or(t.__v_raw):!!(t&&t.__v_isReactive)}function Vn(t){return!!(t&&t.__v_isReadonly)}function Ft(t){return!!(t&&t.__v_isShallow)}function Ll(t){return t?!!t.__v_raw:!1}function we(t){const e=t&&t.__v_raw;return e?we(e):t}function aE(t){return!be(t,"__v_skip")&&Object.isExtensible(t)&&hp(t,"__v_skip",!0),t}const Qt=t=>Pe(t)?Ta(t):t,_s=t=>Pe(t)?qc(t):t;function pt(t){return t?t.__v_isRef===!0:!1}function ti(t){return Np(t,!1)}function cE(t){return Np(t,!0)}function Np(t,e){return pt(t)?t:new lE(t,e)}class lE{constructor(e,n){this.dep=new kl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:we(e),this._value=n?e:Qt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Ft(e)||Vn(e);e=r?e:we(e),tr(e,n)&&(this._rawValue=e,this._value=r?e:Qt(e),this.dep.trigger())}}function kr(t){return pt(t)?t.value:t}const uE={get:(t,e,n)=>e==="__v_raw"?t:kr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return pt(s)&&!pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Vp(t){return Or(t)?t:new Proxy(t,uE)}class hE{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new kl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ii-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return _p(this,!0),!0}get value(){const e=this.dep.track();return vp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function fE(t,e,n=!1){let r,s;return ue(t)?r=t:(r=t.get,s=t.set),new hE(r,s,n)}const ho={},Mo=new WeakMap;let Ar;function dE(t,e=!1,n=Ar){if(n){let r=Mo.get(n);r||Mo.set(n,r=[]),r.push(t)}}function pE(t,e,n=Ve){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=z=>s?z:Ft(z)||s===!1||s===0?Rn(z,1):Rn(z);let f,p,g,v,P=!1,V=!1;if(pt(t)?(p=()=>t.value,P=Ft(t)):Or(t)?(p=()=>u(t),P=!0):se(t)?(V=!0,P=t.some(z=>Or(z)||Ft(z)),p=()=>t.map(z=>{if(pt(z))return z.value;if(Or(z))return u(z);if(ue(z))return l?l(z,2):z()})):ue(t)?e?p=l?()=>l(t,2):t:p=()=>{if(g){Pn();try{g()}finally{Nn()}}const z=Ar;Ar=f;try{return l?l(t,3,[v]):t(v)}finally{Ar=z}}:p=an,e&&s){const z=p,ie=s===!0?1/0:s;p=()=>Rn(z(),ie)}const k=qy(),q=()=>{f.stop(),k&&k.active&&Cl(k.effects,f)};if(i&&e){const z=e;e=(...ie)=>{z(...ie),q()}}let B=V?new Array(t.length).fill(ho):ho;const H=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const ie=f.run();if(s||P||(V?ie.some((ce,R)=>tr(ce,B[R])):tr(ie,B))){g&&g();const ce=Ar;Ar=f;try{const R=[ie,B===ho?void 0:V&&B[0]===ho?[]:B,v];B=ie,l?l(e,3,R):e(...R)}finally{Ar=ce}}}else f.run()};return c&&c(H),f=new gp(p),f.scheduler=o?()=>o(H,!1):H,v=z=>dE(z,!1,f),g=f.onStop=()=>{const z=Mo.get(f);if(z){if(l)l(z,4);else for(const ie of z)ie();Mo.delete(f)}},e?r?H(!0):B=f.run():o?o(H.bind(null,!0),!0):f.run(),q.pause=f.pause.bind(f),q.resume=f.resume.bind(f),q.stop=q,q}function Rn(t,e=1/0,n){if(e<=0||!Pe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,pt(t))Rn(t.value,e,n);else if(se(t))for(let r=0;r<t.length;r++)Rn(t[r],e,n);else if(da(t)||as(t))t.forEach(r=>{Rn(r,e,n)});else if(up(t)){for(const r in t)Rn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Rn(t[r],e,n)}return t}function ji(t,e,n,r){try{return r?t(...r):t()}catch(s){Ia(s,e,n)}}function Jt(t,e,n,r){if(ue(t)){const s=ji(t,e,n,r);return s&&cp(s)&&s.catch(i=>{Ia(i,e,n)}),s}if(se(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Jt(t[i],e,n,r));return s}}function Ia(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){Pn(),ji(i,null,10,[t,l,u]),Nn();return}}gE(t,n,s,r,o)}function gE(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Et=[];let rn=-1;const cs=[];let Kn=null,Zr=0;const Dp=Promise.resolve();let Lo=null;function Fl(t){const e=Lo||Dp;return t?e.then(this?t.bind(this):t):e}function mE(t){let e=rn+1,n=Et.length;for(;e<n;){const r=e+n>>>1,s=Et[r],i=Ai(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Ul(t){if(!(t.flags&1)){const e=Ai(t),n=Et[Et.length-1];!n||!(t.flags&2)&&e>=Ai(n)?Et.push(t):Et.splice(mE(e),0,t),t.flags|=1,Op()}}function Op(){Lo||(Lo=Dp.then(xp))}function _E(t){se(t)?cs.push(...t):Kn&&t.id===-1?Kn.splice(Zr+1,0,t):t.flags&1||(cs.push(t),t.flags|=1),Op()}function Nh(t,e,n=rn+1){for(;n<Et.length;n++){const r=Et[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Et.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function kp(t){if(cs.length){const e=[...new Set(cs)].sort((n,r)=>Ai(n)-Ai(r));if(cs.length=0,Kn){Kn.push(...e);return}for(Kn=e,Zr=0;Zr<Kn.length;Zr++){const n=Kn[Zr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Kn=null,Zr=0}}const Ai=t=>t.id==null?t.flags&2?-1:1/0:t.id;function xp(t){try{for(rn=0;rn<Et.length;rn++){const e=Et[rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ji(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rn<Et.length;rn++){const e=Et[rn];e&&(e.flags&=-2)}rn=-1,Et.length=0,kp(),Lo=null,(Et.length||cs.length)&&xp()}}let Vt=null,Mp=null;function Fo(t){const e=Vt;return Vt=t,Mp=t&&t.type.__scopeId||null,e}function Tn(t,e=Vt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&jo(-1);const i=Fo(e);let o;try{o=t(...s)}finally{Fo(i),r._d&&jo(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function MP(t,e){if(Vt===null)return t;const n=Ca(Vt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Ve]=e[s];i&&(ue(i)&&(i={mounted:i,updated:i}),i.deep&&Rn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function vr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Pn(),Jt(l,n,8,[t.el,c,t,e]),Nn())}}function Io(t,e){if(dt){let n=dt.provides;const r=dt.parent&&dt.parent.provides;r===n&&(n=dt.provides=Object.create(r)),n[t]=e}}function Wt(t,e,n=!1){const r=pg();if(r||ls){let s=ls?ls._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ue(e)?e.call(r&&r.proxy):e}}const yE=Symbol.for("v-scx"),EE=()=>Wt(yE);function wo(t,e,n){return Lp(t,e,n)}function Lp(t,e,n=Ve){const{immediate:r,deep:s,flush:i,once:o}=n,c=et({},n),l=e&&r||!e&&i!=="post";let u;if(Si){if(i==="sync"){const v=EE();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=an,v.resume=an,v.pause=an,v}}const f=dt;c.call=(v,P,V)=>Jt(v,f,P,V);let p=!1;i==="post"?c.scheduler=v=>{Pt(v,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(v,P)=>{P?v():Ul(v)}),c.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const g=pE(t,e,c);return Si&&(u?u.push(g):l&&g()),g}function vE(t,e,n){const r=this.proxy,s=qe(t)?t.includes(".")?Fp(r,t):()=>r[t]:t.bind(r,r);let i;ue(e)?i=e:(i=e.handler,n=e);const o=qi(this),c=Lp(s,i.bind(r),n);return o(),c}function Fp(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const TE=Symbol("_vte"),Up=t=>t.__isTeleport,wn=Symbol("_leaveCb"),fo=Symbol("_enterCb");function IE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ra(()=>{t.isMounted=!0}),Kp(()=>{t.isUnmounting=!0}),t}const Ot=[Function,Array],Bp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ot,onEnter:Ot,onAfterEnter:Ot,onEnterCancelled:Ot,onBeforeLeave:Ot,onLeave:Ot,onAfterLeave:Ot,onLeaveCancelled:Ot,onBeforeAppear:Ot,onAppear:Ot,onAfterAppear:Ot,onAppearCancelled:Ot},jp=t=>{const e=t.subTree;return e.component?jp(e.component):e},wE={name:"BaseTransition",props:Bp,setup(t,{slots:e}){const n=pg(),r=IE();return()=>{const s=e.default&&Hp(e.default(),!0);if(!s||!s.length)return;const i=qp(s),o=we(t),{mode:c}=o;if(r.isLeaving)return gc(i);const l=Vh(i);if(!l)return gc(i);let u=$c(l,o,r,n,p=>u=p);l.type!==vt&&Ri(l,u);let f=n.subTree&&Vh(n.subTree);if(f&&f.type!==vt&&!Sr(f,l)&&jp(n).type!==vt){let p=$c(f,o,r,n);if(Ri(f,p),c==="out-in"&&l.type!==vt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},gc(i);c==="in-out"&&l.type!==vt?p.delayLeave=(g,v,P)=>{const V=$p(r,f);V[String(f.key)]=f,g[wn]=()=>{v(),g[wn]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{P(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function qp(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==vt){e=n;break}}return e}const AE=wE;function $p(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function $c(t,e,n,r,s){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:g,onLeave:v,onAfterLeave:P,onLeaveCancelled:V,onBeforeAppear:k,onAppear:q,onAfterAppear:B,onAppearCancelled:H}=e,z=String(t.key),ie=$p(n,t),ce=(_,b)=>{_&&Jt(_,r,9,b)},R=(_,b)=>{const A=b[1];ce(_,b),se(_)?_.every(w=>w.length<=1)&&A():_.length<=1&&A()},T={mode:o,persisted:c,beforeEnter(_){let b=l;if(!n.isMounted)if(i)b=k||l;else return;_[wn]&&_[wn](!0);const A=ie[z];A&&Sr(t,A)&&A.el[wn]&&A.el[wn](),ce(b,[_])},enter(_){let b=u,A=f,w=p;if(!n.isMounted)if(i)b=q||u,A=B||f,w=H||p;else return;let y=!1;const Te=_[fo]=Be=>{y||(y=!0,Be?ce(w,[_]):ce(A,[_]),T.delayedLeave&&T.delayedLeave(),_[fo]=void 0)};b?R(b,[_,Te]):Te()},leave(_,b){const A=String(t.key);if(_[fo]&&_[fo](!0),n.isUnmounting)return b();ce(g,[_]);let w=!1;const y=_[wn]=Te=>{w||(w=!0,b(),Te?ce(V,[_]):ce(P,[_]),_[wn]=void 0,ie[A]===t&&delete ie[A])};ie[A]=t,v?R(v,[_,y]):y()},clone(_){const b=$c(_,e,n,r,s);return s&&s(b),b}};return T}function gc(t){if(wa(t))return t=cr(t),t.children=null,t}function Vh(t){if(!wa(t))return Up(t.type)&&t.children?qp(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ue(n.default))return n.default()}}function Ri(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ri(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hp(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Nt?(o.patchFlag&128&&s++,r=r.concat(Hp(o.children,e,c))):(e||o.type!==vt)&&r.push(c!=null?cr(o,{key:c}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Gp(t,e){return ue(t)?et({name:t.name},e,{setup:t}):t}function zp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Uo=new WeakMap;function ui(t,e,n,r,s=!1){if(se(t)){t.forEach((P,V)=>ui(P,e&&(se(e)?e[V]:e),n,r,s));return}if(hi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ui(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ca(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Ve?c.refs={}:c.refs,p=c.setupState,g=we(p),v=p===Ve?ap:P=>be(g,P);if(u!=null&&u!==l){if(Dh(e),qe(u))f[u]=null,v(u)&&(p[u]=null);else if(pt(u)){u.value=null;const P=e;P.k&&(f[P.k]=null)}}if(ue(l))ji(l,c,12,[o,f]);else{const P=qe(l),V=pt(l);if(P||V){const k=()=>{if(t.f){const q=P?v(l)?p[l]:f[l]:l.value;if(s)se(q)&&Cl(q,i);else if(se(q))q.includes(i)||q.push(i);else if(P)f[l]=[i],v(l)&&(p[l]=f[l]);else{const B=[i];l.value=B,t.k&&(f[t.k]=B)}}else P?(f[l]=o,v(l)&&(p[l]=o)):V&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const q=()=>{k(),Uo.delete(t)};q.id=-1,Uo.set(t,q),Pt(q,n)}else Dh(t),k()}}}function Dh(t){const e=Uo.get(t);e&&(e.flags|=8,Uo.delete(t))}_a().requestIdleCallback;_a().cancelIdleCallback;const hi=t=>!!t.type.__asyncLoader,wa=t=>t.type.__isKeepAlive;function RE(t,e){Wp(t,"a",e)}function bE(t,e){Wp(t,"da",e)}function Wp(t,e,n=dt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Aa(e,r,n),n){let s=n.parent;for(;s&&s.parent;)wa(s.parent.vnode)&&SE(r,e,n,s),s=s.parent}}function SE(t,e,n,r){const s=Aa(e,t,r,!0);Qp(()=>{Cl(r[e],s)},n)}function Aa(t,e,n=dt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Pn();const c=qi(n),l=Jt(e,n,t,o);return c(),Nn(),l});return r?s.unshift(i):s.push(i),i}}const Mn=t=>(e,n=dt)=>{(!Si||t==="sp")&&Aa(t,(...r)=>e(...r),n)},CE=Mn("bm"),Ra=Mn("m"),PE=Mn("bu"),NE=Mn("u"),Kp=Mn("bum"),Qp=Mn("um"),VE=Mn("sp"),DE=Mn("rtg"),OE=Mn("rtc");function kE(t,e=dt){Aa("ec",t,e)}const xE="components";function ME(t,e){return FE(xE,t,!0,e)||t}const LE=Symbol.for("v-ndc");function FE(t,e,n=!0,r=!1){const s=Vt||dt;if(s){const i=s.type;{const c=Iv(i,!1);if(c&&(c===e||c===Ut(e)||c===ga(Ut(e))))return i}const o=Oh(s[t]||i[t],e)||Oh(s.appContext[t],e);return!o&&r?i:o}}function Oh(t,e){return t&&(t[e]||t[Ut(e)]||t[ga(Ut(e))])}function kh(t,e,n,r){let s;const i=n,o=se(t);if(o||qe(t)){const c=o&&Or(t);let l=!1,u=!1;c&&(l=!Ft(t),u=Vn(t),t=va(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?_s(Qt(t[f])):Qt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Pe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Hc=t=>t?gg(t)?Ca(t):Hc(t.parent):null,fi=et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hc(t.parent),$root:t=>Hc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xp(t),$forceUpdate:t=>t.f||(t.f=()=>{Ul(t.update)}),$nextTick:t=>t.n||(t.n=Fl.bind(t.proxy)),$watch:t=>vE.bind(t)}),mc=(t,e)=>t!==Ve&&!t.__isScriptSetup&&be(t,e),UE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(mc(r,e))return o[e]=1,r[e];if(s!==Ve&&be(s,e))return o[e]=2,s[e];if(be(i,e))return o[e]=3,i[e];if(n!==Ve&&be(n,e))return o[e]=4,n[e];Gc&&(o[e]=0)}}const u=fi[e];let f,p;if(u)return e==="$attrs"&&ht(t.attrs,"get",""),u(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==Ve&&be(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,be(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return mc(s,e)?(s[e]=n,!0):r!==Ve&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},c){let l;return!!(n[c]||t!==Ve&&c[0]!=="$"&&be(t,c)||mc(e,c)||be(i,c)||be(r,c)||be(fi,c)||be(s.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function xh(t){return se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Gc=!0;function BE(t){const e=Xp(t),n=t.proxy,r=t.ctx;Gc=!1,e.beforeCreate&&Mh(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:g,beforeUpdate:v,updated:P,activated:V,deactivated:k,beforeDestroy:q,beforeUnmount:B,destroyed:H,unmounted:z,render:ie,renderTracked:ce,renderTriggered:R,errorCaptured:T,serverPrefetch:_,expose:b,inheritAttrs:A,components:w,directives:y,filters:Te}=e;if(u&&jE(u,r,null),o)for(const Ae in o){const Ee=o[Ae];ue(Ee)&&(r[Ae]=Ee.bind(n))}if(s){const Ae=s.call(n,n);Pe(Ae)&&(t.data=Ta(Ae))}if(Gc=!0,i)for(const Ae in i){const Ee=i[Ae],It=ue(Ee)?Ee.bind(n,n):ue(Ee.get)?Ee.get.bind(n,n):an,Zt=!ue(Ee)&&ue(Ee.set)?Ee.set.bind(n):an,Rt=kt({get:It,set:Zt});Object.defineProperty(r,Ae,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:tt=>Rt.value=tt})}if(c)for(const Ae in c)Jp(c[Ae],r,n,Ae);if(l){const Ae=ue(l)?l.call(n):l;Reflect.ownKeys(Ae).forEach(Ee=>{Io(Ee,Ae[Ee])})}f&&Mh(f,t,"c");function Me(Ae,Ee){se(Ee)?Ee.forEach(It=>Ae(It.bind(n))):Ee&&Ae(Ee.bind(n))}if(Me(CE,p),Me(Ra,g),Me(PE,v),Me(NE,P),Me(RE,V),Me(bE,k),Me(kE,T),Me(OE,ce),Me(DE,R),Me(Kp,B),Me(Qp,z),Me(VE,_),se(b))if(b.length){const Ae=t.exposed||(t.exposed={});b.forEach(Ee=>{Object.defineProperty(Ae,Ee,{get:()=>n[Ee],set:It=>n[Ee]=It,enumerable:!0})})}else t.exposed||(t.exposed={});ie&&t.render===an&&(t.render=ie),A!=null&&(t.inheritAttrs=A),w&&(t.components=w),y&&(t.directives=y),_&&zp(t)}function jE(t,e,n=an){se(t)&&(t=zc(t));for(const r in t){const s=t[r];let i;Pe(s)?"default"in s?i=Wt(s.from||r,s.default,!0):i=Wt(s.from||r):i=Wt(s),pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Mh(t,e,n){Jt(se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Jp(t,e,n,r){let s=r.includes(".")?Fp(n,r):()=>n[r];if(qe(t)){const i=e[t];ue(i)&&wo(s,i)}else if(ue(t))wo(s,t.bind(n));else if(Pe(t))if(se(t))t.forEach(i=>Jp(i,e,n,r));else{const i=ue(t.handler)?t.handler.bind(n):e[t.handler];ue(i)&&wo(s,i,t)}}function Xp(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Bo(l,u,o,!0)),Bo(l,e,o)),Pe(e)&&i.set(e,l),l}function Bo(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Bo(t,i,n,!0),s&&s.forEach(o=>Bo(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=qE[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const qE={data:Lh,props:Fh,emits:Fh,methods:ni,computed:ni,beforeCreate:_t,created:_t,beforeMount:_t,mounted:_t,beforeUpdate:_t,updated:_t,beforeDestroy:_t,beforeUnmount:_t,destroyed:_t,unmounted:_t,activated:_t,deactivated:_t,errorCaptured:_t,serverPrefetch:_t,components:ni,directives:ni,watch:HE,provide:Lh,inject:$E};function Lh(t,e){return e?t?function(){return et(ue(t)?t.call(this,this):t,ue(e)?e.call(this,this):e)}:e:t}function $E(t,e){return ni(zc(t),zc(e))}function zc(t){if(se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function _t(t,e){return t?[...new Set([].concat(t,e))]:e}function ni(t,e){return t?et(Object.create(null),t,e):e}function Fh(t,e){return t?se(t)&&se(e)?[...new Set([...t,...e])]:et(Object.create(null),xh(t),xh(e??{})):e}function HE(t,e){if(!t)return e;if(!e)return t;const n=et(Object.create(null),t);for(const r in e)n[r]=_t(t[r],e[r]);return n}function Yp(){return{app:null,config:{isNativeTag:ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GE=0;function zE(t,e){return function(r,s=null){ue(r)||(r=et({},r)),s!=null&&!Pe(s)&&(s=null);const i=Yp(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:GE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Av,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&ue(f.install)?(o.add(f),f.install(u,...p)):ue(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,g){if(!l){const v=u._ceVNode||He(r,s);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(v,f,g),l=!0,u._container=f,f.__vue_app__=u,Ca(v.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Jt(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=ls;ls=u;try{return f()}finally{ls=p}}};return u}}let ls=null;const WE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ut(e)}Modifiers`]||t[`${qr(e)}Modifiers`];function KE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ve;let s=n;const i=e.startsWith("update:"),o=i&&WE(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>qe(f)?f.trim():f)),o.number&&(s=n.map(ma)));let c,l=r[c=uc(e)]||r[c=uc(Ut(e))];!l&&i&&(l=r[c=uc(qr(e))]),l&&Jt(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Jt(u,t,6,s)}}const QE=new WeakMap;function Zp(t,e,n=!1){const r=n?QE:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!ue(t)){const l=u=>{const f=Zp(u,e,!0);f&&(c=!0,et(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Pe(t)&&r.set(t,null),null):(se(i)?i.forEach(l=>o[l]=null):et(o,i),Pe(t)&&r.set(t,o),o)}function ba(t,e){return!t||!fa(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,qr(e))||be(t,e))}function Uh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:g,setupState:v,ctx:P,inheritAttrs:V}=t,k=Fo(t);let q,B;try{if(n.shapeFlag&4){const z=s||r,ie=z;q=on(u.call(ie,z,f,p,v,g,P)),B=c}else{const z=e;q=on(z.length>1?z(p,{attrs:c,slots:o,emit:l}):z(p,null)),B=e.props?c:JE(c)}}catch(z){di.length=0,Ia(z,t,1),q=He(vt)}let H=q;if(B&&V!==!1){const z=Object.keys(B),{shapeFlag:ie}=H;z.length&&ie&7&&(i&&z.some(Sl)&&(B=XE(B,i)),H=cr(H,B,!1,!0))}return n.dirs&&(H=cr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Ri(H,n.transition),q=H,Fo(k),q}const JE=t=>{let e;for(const n in t)(n==="class"||n==="style"||fa(n))&&((e||(e={}))[n]=t[n]);return e},XE=(t,e)=>{const n={};for(const r in t)(!Sl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function YE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Bh(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(o[g]!==r[g]&&!ba(u,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Bh(r,o,u):!0:!!o;return!1}function Bh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ba(n,i))return!0}return!1}function ZE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const eg={},tg=()=>Object.create(eg),ng=t=>Object.getPrototypeOf(t)===eg;function ev(t,e,n,r=!1){const s={},i=tg();t.propsDefaults=Object.create(null),rg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Pp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function tv(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=we(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(ba(t.emitsOptions,g))continue;const v=e[g];if(l)if(be(i,g))v!==i[g]&&(i[g]=v,u=!0);else{const P=Ut(g);s[P]=Wc(l,c,P,v,t,!1)}else v!==i[g]&&(i[g]=v,u=!0)}}}else{rg(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!be(e,p)&&((f=qr(p))===p||!be(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=Wc(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!be(e,p))&&(delete i[p],u=!0)}u&&An(t.attrs,"set","")}function rg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(ai(l))continue;const u=e[l];let f;s&&be(s,f=Ut(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:ba(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=we(n),u=c||Ve;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Wc(s,l,p,u[p],t,!be(u,p))}}return o}function Wc(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=be(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ue(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=qi(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===qr(n))&&(r=!0))}return r}const nv=new WeakMap;function sg(t,e,n=!1){const r=n?nv:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!ue(t)){const f=p=>{l=!0;const[g,v]=sg(p,e,!0);et(o,g),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Pe(t)&&r.set(t,os),os;if(se(i))for(let f=0;f<i.length;f++){const p=Ut(i[f]);jh(p)&&(o[p]=Ve)}else if(i)for(const f in i){const p=Ut(f);if(jh(p)){const g=i[f],v=o[p]=se(g)||ue(g)?{type:g}:et({},g),P=v.type;let V=!1,k=!0;if(se(P))for(let q=0;q<P.length;++q){const B=P[q],H=ue(B)&&B.name;if(H==="Boolean"){V=!0;break}else H==="String"&&(k=!1)}else V=ue(P)&&P.name==="Boolean";v[0]=V,v[1]=k,(V||be(v,"default"))&&c.push(p)}}const u=[o,c];return Pe(t)&&r.set(t,u),u}function jh(t){return t[0]!=="$"&&!ai(t)}const Bl=t=>t==="_"||t==="_ctx"||t==="$stable",jl=t=>se(t)?t.map(on):[on(t)],rv=(t,e,n)=>{if(e._n)return e;const r=Tn((...s)=>jl(e(...s)),n);return r._c=!1,r},ig=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Bl(s))continue;const i=t[s];if(ue(i))e[s]=rv(s,i,r);else if(i!=null){const o=jl(i);e[s]=()=>o}}},og=(t,e)=>{const n=jl(e);t.slots.default=()=>n},ag=(t,e,n)=>{for(const r in e)(n||!Bl(r))&&(t[r]=e[r])},sv=(t,e,n)=>{const r=t.slots=tg();if(t.vnode.shapeFlag&32){const s=e._;s?(ag(r,e,n),n&&hp(r,"_",s,!0)):ig(e,r)}else e&&og(t,e)},iv=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ve;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:ag(s,e,n):(i=!e.$stable,ig(e,s)),o=e}else e&&(og(t,e),o={default:1});if(i)for(const c in s)!Bl(c)&&o[c]==null&&delete s[c]},Pt=uv;function ov(t){return av(t)}function av(t,e){const n=_a();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:g,setScopeId:v=an,insertStaticContent:P}=t,V=(E,I,S,D=null,F=null,O=null,W=void 0,$=null,j=!!I.dynamicChildren)=>{if(E===I)return;E&&!Sr(E,I)&&(D=x(E),tt(E,F,O,!0),E=null),I.patchFlag===-2&&(j=!1,I.dynamicChildren=null);const{type:U,ref:ne,shapeFlag:Q}=I;switch(U){case Sa:k(E,I,S,D);break;case vt:q(E,I,S,D);break;case yc:E==null&&B(I,S,D,W);break;case Nt:w(E,I,S,D,F,O,W,$,j);break;default:Q&1?ie(E,I,S,D,F,O,W,$,j):Q&6?y(E,I,S,D,F,O,W,$,j):(Q&64||Q&128)&&U.process(E,I,S,D,F,O,W,$,j,Z)}ne!=null&&F?ui(ne,E&&E.ref,O,I||E,!I):ne==null&&E&&E.ref!=null&&ui(E.ref,null,O,E,!0)},k=(E,I,S,D)=>{if(E==null)r(I.el=c(I.children),S,D);else{const F=I.el=E.el;I.children!==E.children&&u(F,I.children)}},q=(E,I,S,D)=>{E==null?r(I.el=l(I.children||""),S,D):I.el=E.el},B=(E,I,S,D)=>{[E.el,E.anchor]=P(E.children,I,S,D,E.el,E.anchor)},H=({el:E,anchor:I},S,D)=>{let F;for(;E&&E!==I;)F=g(E),r(E,S,D),E=F;r(I,S,D)},z=({el:E,anchor:I})=>{let S;for(;E&&E!==I;)S=g(E),s(E),E=S;s(I)},ie=(E,I,S,D,F,O,W,$,j)=>{if(I.type==="svg"?W="svg":I.type==="math"&&(W="mathml"),E==null)ce(I,S,D,F,O,W,$,j);else{const U=E.el&&E.el._isVueCE?E.el:null;try{U&&U._beginPatch(),_(E,I,F,O,W,$,j)}finally{U&&U._endPatch()}}},ce=(E,I,S,D,F,O,W,$)=>{let j,U;const{props:ne,shapeFlag:Q,transition:ee,dirs:re}=E;if(j=E.el=o(E.type,O,ne&&ne.is,ne),Q&8?f(j,E.children):Q&16&&T(E.children,j,null,D,F,_c(E,O),W,$),re&&vr(E,null,D,"created"),R(j,E,E.scopeId,W,D),ne){for(const Ce in ne)Ce!=="value"&&!ai(Ce)&&i(j,Ce,null,ne[Ce],O,D);"value"in ne&&i(j,"value",null,ne.value,O),(U=ne.onVnodeBeforeMount)&&nn(U,D,E)}re&&vr(E,null,D,"beforeMount");const pe=cv(F,ee);pe&&ee.beforeEnter(j),r(j,I,S),((U=ne&&ne.onVnodeMounted)||pe||re)&&Pt(()=>{U&&nn(U,D,E),pe&&ee.enter(j),re&&vr(E,null,D,"mounted")},F)},R=(E,I,S,D,F)=>{if(S&&v(E,S),D)for(let O=0;O<D.length;O++)v(E,D[O]);if(F){let O=F.subTree;if(I===O||hg(O.type)&&(O.ssContent===I||O.ssFallback===I)){const W=F.vnode;R(E,W,W.scopeId,W.slotScopeIds,F.parent)}}},T=(E,I,S,D,F,O,W,$,j=0)=>{for(let U=j;U<E.length;U++){const ne=E[U]=$?Qn(E[U]):on(E[U]);V(null,ne,I,S,D,F,O,W,$)}},_=(E,I,S,D,F,O,W)=>{const $=I.el=E.el;let{patchFlag:j,dynamicChildren:U,dirs:ne}=I;j|=E.patchFlag&16;const Q=E.props||Ve,ee=I.props||Ve;let re;if(S&&Tr(S,!1),(re=ee.onVnodeBeforeUpdate)&&nn(re,S,I,E),ne&&vr(I,E,S,"beforeUpdate"),S&&Tr(S,!0),(Q.innerHTML&&ee.innerHTML==null||Q.textContent&&ee.textContent==null)&&f($,""),U?b(E.dynamicChildren,U,$,S,D,_c(I,F),O):W||Ee(E,I,$,null,S,D,_c(I,F),O,!1),j>0){if(j&16)A($,Q,ee,S,F);else if(j&2&&Q.class!==ee.class&&i($,"class",null,ee.class,F),j&4&&i($,"style",Q.style,ee.style,F),j&8){const pe=I.dynamicProps;for(let Ce=0;Ce<pe.length;Ce++){const Ie=pe[Ce],at=Q[Ie],ct=ee[Ie];(ct!==at||Ie==="value")&&i($,Ie,at,ct,F,S)}}j&1&&E.children!==I.children&&f($,I.children)}else!W&&U==null&&A($,Q,ee,S,F);((re=ee.onVnodeUpdated)||ne)&&Pt(()=>{re&&nn(re,S,I,E),ne&&vr(I,E,S,"updated")},D)},b=(E,I,S,D,F,O,W)=>{for(let $=0;$<I.length;$++){const j=E[$],U=I[$],ne=j.el&&(j.type===Nt||!Sr(j,U)||j.shapeFlag&198)?p(j.el):S;V(j,U,ne,null,D,F,O,W,!0)}},A=(E,I,S,D,F)=>{if(I!==S){if(I!==Ve)for(const O in I)!ai(O)&&!(O in S)&&i(E,O,I[O],null,F,D);for(const O in S){if(ai(O))continue;const W=S[O],$=I[O];W!==$&&O!=="value"&&i(E,O,$,W,F,D)}"value"in S&&i(E,"value",I.value,S.value,F)}},w=(E,I,S,D,F,O,W,$,j)=>{const U=I.el=E?E.el:c(""),ne=I.anchor=E?E.anchor:c("");let{patchFlag:Q,dynamicChildren:ee,slotScopeIds:re}=I;re&&($=$?$.concat(re):re),E==null?(r(U,S,D),r(ne,S,D),T(I.children||[],S,ne,F,O,W,$,j)):Q>0&&Q&64&&ee&&E.dynamicChildren&&E.dynamicChildren.length===ee.length?(b(E.dynamicChildren,ee,S,F,O,W,$),(I.key!=null||F&&I===F.subTree)&&cg(E,I,!0)):Ee(E,I,S,ne,F,O,W,$,j)},y=(E,I,S,D,F,O,W,$,j)=>{I.slotScopeIds=$,E==null?I.shapeFlag&512?F.ctx.activate(I,S,D,W,j):Te(I,S,D,F,O,W,j):Be(E,I,j)},Te=(E,I,S,D,F,O,W)=>{const $=E.component=_v(E,D,F);if(wa(E)&&($.ctx.renderer=Z),yv($,!1,W),$.asyncDep){if(F&&F.registerDep($,Me,W),!E.el){const j=$.subTree=He(vt);q(null,j,I,S),E.placeholder=j.el}}else Me($,E,I,S,F,O,W)},Be=(E,I,S)=>{const D=I.component=E.component;if(YE(E,I,S))if(D.asyncDep&&!D.asyncResolved){Ae(D,I,S);return}else D.next=I,D.update();else I.el=E.el,D.vnode=I},Me=(E,I,S,D,F,O,W)=>{const $=()=>{if(E.isMounted){let{next:Q,bu:ee,u:re,parent:pe,vnode:Ce}=E;{const St=lg(E);if(St){Q&&(Q.el=Ce.el,Ae(E,Q,W)),St.asyncDep.then(()=>{E.isUnmounted||$()});return}}let Ie=Q,at;Tr(E,!1),Q?(Q.el=Ce.el,Ae(E,Q,W)):Q=Ce,ee&&vo(ee),(at=Q.props&&Q.props.onVnodeBeforeUpdate)&&nn(at,pe,Q,Ce),Tr(E,!0);const ct=Uh(E),bt=E.subTree;E.subTree=ct,V(bt,ct,p(bt.el),x(bt),E,F,O),Q.el=ct.el,Ie===null&&ZE(E,ct.el),re&&Pt(re,F),(at=Q.props&&Q.props.onVnodeUpdated)&&Pt(()=>nn(at,pe,Q,Ce),F)}else{let Q;const{el:ee,props:re}=I,{bm:pe,m:Ce,parent:Ie,root:at,type:ct}=E,bt=hi(I);Tr(E,!1),pe&&vo(pe),!bt&&(Q=re&&re.onVnodeBeforeMount)&&nn(Q,Ie,I),Tr(E,!0);{at.ce&&at.ce._def.shadowRoot!==!1&&at.ce._injectChildStyle(ct);const St=E.subTree=Uh(E);V(null,St,S,D,E,F,O),I.el=St.el}if(Ce&&Pt(Ce,F),!bt&&(Q=re&&re.onVnodeMounted)){const St=I;Pt(()=>nn(Q,Ie,St),F)}(I.shapeFlag&256||Ie&&hi(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&E.a&&Pt(E.a,F),E.isMounted=!0,I=S=D=null}};E.scope.on();const j=E.effect=new gp($);E.scope.off();const U=E.update=j.run.bind(j),ne=E.job=j.runIfDirty.bind(j);ne.i=E,ne.id=E.uid,j.scheduler=()=>Ul(ne),Tr(E,!0),U()},Ae=(E,I,S)=>{I.component=E;const D=E.vnode.props;E.vnode=I,E.next=null,tv(E,I.props,D,S),iv(E,I.children,S),Pn(),Nh(E),Nn()},Ee=(E,I,S,D,F,O,W,$,j=!1)=>{const U=E&&E.children,ne=E?E.shapeFlag:0,Q=I.children,{patchFlag:ee,shapeFlag:re}=I;if(ee>0){if(ee&128){Zt(U,Q,S,D,F,O,W,$,j);return}else if(ee&256){It(U,Q,S,D,F,O,W,$,j);return}}re&8?(ne&16&&ot(U,F,O),Q!==U&&f(S,Q)):ne&16?re&16?Zt(U,Q,S,D,F,O,W,$,j):ot(U,F,O,!0):(ne&8&&f(S,""),re&16&&T(Q,S,D,F,O,W,$,j))},It=(E,I,S,D,F,O,W,$,j)=>{E=E||os,I=I||os;const U=E.length,ne=I.length,Q=Math.min(U,ne);let ee;for(ee=0;ee<Q;ee++){const re=I[ee]=j?Qn(I[ee]):on(I[ee]);V(E[ee],re,S,null,F,O,W,$,j)}U>ne?ot(E,F,O,!0,!1,Q):T(I,S,D,F,O,W,$,j,Q)},Zt=(E,I,S,D,F,O,W,$,j)=>{let U=0;const ne=I.length;let Q=E.length-1,ee=ne-1;for(;U<=Q&&U<=ee;){const re=E[U],pe=I[U]=j?Qn(I[U]):on(I[U]);if(Sr(re,pe))V(re,pe,S,null,F,O,W,$,j);else break;U++}for(;U<=Q&&U<=ee;){const re=E[Q],pe=I[ee]=j?Qn(I[ee]):on(I[ee]);if(Sr(re,pe))V(re,pe,S,null,F,O,W,$,j);else break;Q--,ee--}if(U>Q){if(U<=ee){const re=ee+1,pe=re<ne?I[re].el:D;for(;U<=ee;)V(null,I[U]=j?Qn(I[U]):on(I[U]),S,pe,F,O,W,$,j),U++}}else if(U>ee)for(;U<=Q;)tt(E[U],F,O,!0),U++;else{const re=U,pe=U,Ce=new Map;for(U=pe;U<=ee;U++){const nt=I[U]=j?Qn(I[U]):on(I[U]);nt.key!=null&&Ce.set(nt.key,U)}let Ie,at=0;const ct=ee-pe+1;let bt=!1,St=0;const qt=new Array(ct);for(U=0;U<ct;U++)qt[U]=0;for(U=re;U<=Q;U++){const nt=E[U];if(at>=ct){tt(nt,F,O,!0);continue}let Xe;if(nt.key!=null)Xe=Ce.get(nt.key);else for(Ie=pe;Ie<=ee;Ie++)if(qt[Ie-pe]===0&&Sr(nt,I[Ie])){Xe=Ie;break}Xe===void 0?tt(nt,F,O,!0):(qt[Xe-pe]=U+1,Xe>=St?St=Xe:bt=!0,V(nt,I[Xe],S,null,F,O,W,$,j),at++)}const Kr=bt?lv(qt):os;for(Ie=Kr.length-1,U=ct-1;U>=0;U--){const nt=pe+U,Xe=I[nt],Ls=I[nt+1],gr=nt+1<ne?Ls.el||ug(Ls):D;qt[U]===0?V(null,Xe,S,gr,F,O,W,$,j):bt&&(Ie<0||U!==Kr[Ie]?Rt(Xe,S,gr,2):Ie--)}}},Rt=(E,I,S,D,F=null)=>{const{el:O,type:W,transition:$,children:j,shapeFlag:U}=E;if(U&6){Rt(E.component.subTree,I,S,D);return}if(U&128){E.suspense.move(I,S,D);return}if(U&64){W.move(E,I,S,Z);return}if(W===Nt){r(O,I,S);for(let Q=0;Q<j.length;Q++)Rt(j[Q],I,S,D);r(E.anchor,I,S);return}if(W===yc){H(E,I,S);return}if(D!==2&&U&1&&$)if(D===0)$.beforeEnter(O),r(O,I,S),Pt(()=>$.enter(O),F);else{const{leave:Q,delayLeave:ee,afterLeave:re}=$,pe=()=>{E.ctx.isUnmounted?s(O):r(O,I,S)},Ce=()=>{O._isLeaving&&O[wn](!0),Q(O,()=>{pe(),re&&re()})};ee?ee(O,pe,Ce):Ce()}else r(O,I,S)},tt=(E,I,S,D=!1,F=!1)=>{const{type:O,props:W,ref:$,children:j,dynamicChildren:U,shapeFlag:ne,patchFlag:Q,dirs:ee,cacheIndex:re}=E;if(Q===-2&&(F=!1),$!=null&&(Pn(),ui($,null,S,E,!0),Nn()),re!=null&&(I.renderCache[re]=void 0),ne&256){I.ctx.deactivate(E);return}const pe=ne&1&&ee,Ce=!hi(E);let Ie;if(Ce&&(Ie=W&&W.onVnodeBeforeUnmount)&&nn(Ie,I,E),ne&6)jt(E.component,S,D);else{if(ne&128){E.suspense.unmount(S,D);return}pe&&vr(E,null,I,"beforeUnmount"),ne&64?E.type.remove(E,I,S,Z,D):U&&!U.hasOnce&&(O!==Nt||Q>0&&Q&64)?ot(U,I,S,!1,!0):(O===Nt&&Q&384||!F&&ne&16)&&ot(j,I,S),D&&_n(E)}(Ce&&(Ie=W&&W.onVnodeUnmounted)||pe)&&Pt(()=>{Ie&&nn(Ie,I,E),pe&&vr(E,null,I,"unmounted")},S)},_n=E=>{const{type:I,el:S,anchor:D,transition:F}=E;if(I===Nt){Bt(S,D);return}if(I===yc){z(E);return}const O=()=>{s(S),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(E.shapeFlag&1&&F&&!F.persisted){const{leave:W,delayLeave:$}=F,j=()=>W(S,O);$?$(E.el,O,j):j()}else O()},Bt=(E,I)=>{let S;for(;E!==I;)S=g(E),s(E),E=S;s(I)},jt=(E,I,S)=>{const{bum:D,scope:F,job:O,subTree:W,um:$,m:j,a:U}=E;qh(j),qh(U),D&&vo(D),F.stop(),O&&(O.flags|=8,tt(W,E,I,S)),$&&Pt($,I),Pt(()=>{E.isUnmounted=!0},I)},ot=(E,I,S,D=!1,F=!1,O=0)=>{for(let W=O;W<E.length;W++)tt(E[W],I,S,D,F)},x=E=>{if(E.shapeFlag&6)return x(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const I=g(E.anchor||E.el),S=I&&I[TE];return S?g(S):I};let X=!1;const K=(E,I,S)=>{let D;E==null?I._vnode&&(tt(I._vnode,null,null,!0),D=I._vnode.component):V(I._vnode||null,E,I,null,null,null,S),I._vnode=E,X||(X=!0,Nh(D),kp(),X=!1)},Z={p:V,um:tt,m:Rt,r:_n,mt:Te,mc:T,pc:Ee,pbc:b,n:x,o:t};return{render:K,hydrate:void 0,createApp:zE(K)}}function _c({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Tr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function cv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function cg(t,e,n=!1){const r=t.children,s=e.children;if(se(r)&&se(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=Qn(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&cg(o,c)),c.type===Sa&&(c.patchFlag!==-1?c.el=o.el:c.__elIndex=i+(t.type===Nt?1:0)),c.type===vt&&!c.el&&(c.el=o.el)}}function lv(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function lg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:lg(e)}function qh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function ug(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?ug(e.subTree):null}const hg=t=>t.__isSuspense;function uv(t,e){e&&e.pendingBranch?se(t)?e.effects.push(...t):e.effects.push(t):_E(t)}const Nt=Symbol.for("v-fgt"),Sa=Symbol.for("v-txt"),vt=Symbol.for("v-cmt"),yc=Symbol.for("v-stc"),di=[];let Dt=null;function $t(t=!1){di.push(Dt=t?null:[])}function hv(){di.pop(),Dt=di[di.length-1]||null}let bi=1;function jo(t,e=!1){bi+=t,t<0&&Dt&&e&&(Dt.hasOnce=!0)}function fg(t){return t.dynamicChildren=bi>0?Dt||os:null,hv(),bi>0&&Dt&&Dt.push(t),t}function br(t,e,n,r,s,i){return fg(fe(t,e,n,r,s,i,!0))}function qo(t,e,n,r,s){return fg(He(t,e,n,r,s,!0))}function $o(t){return t?t.__v_isVNode===!0:!1}function Sr(t,e){return t.type===e.type&&t.key===e.key}const dg=({key:t})=>t??null,Ao=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?qe(t)||pt(t)||ue(t)?{i:Vt,r:t,k:e,f:!!n}:t:null);function fe(t,e=null,n=null,r=0,s=null,i=t===Nt?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&dg(e),ref:e&&Ao(e),scopeId:Mp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Vt};return c?(ql(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=qe(n)?8:16),bi>0&&!o&&Dt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Dt.push(l),l}const He=fv;function fv(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===LE)&&(t=vt),$o(t)){const c=cr(t,e,!0);return n&&ql(c,n),bi>0&&!i&&Dt&&(c.shapeFlag&6?Dt[Dt.indexOf(t)]=c:Dt.push(c)),c.patchFlag=-2,c}if(wv(t)&&(t=t.__vccOpts),e){e=dv(e);let{class:c,style:l}=e;c&&!qe(c)&&(e.class=ya(c)),Pe(l)&&(Ll(l)&&!se(l)&&(l=et({},l)),e.style=Nl(l))}const o=qe(t)?1:hg(t)?128:Up(t)?64:Pe(t)?4:ue(t)?2:0;return fe(t,e,n,r,s,o,i,!0)}function dv(t){return t?Ll(t)||ng(t)?et({},t):t:null}function cr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?pv(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&dg(u),ref:e&&e.ref?n&&i?se(i)?i.concat(Ao(e)):[i,Ao(e)]:Ao(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Nt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cr(t.ssContent),ssFallback:t.ssFallback&&cr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ri(f,l.clone(f)),f}function is(t=" ",e=0){return He(Sa,null,t,e)}function Kc(t="",e=!1){return e?($t(),qo(vt,null,t)):He(vt,null,t)}function on(t){return t==null||typeof t=="boolean"?He(vt):se(t)?He(Nt,null,t.slice()):$o(t)?Qn(t):He(Sa,null,String(t))}function Qn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cr(t)}function ql(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(se(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ql(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!ng(e)?e._ctx=Vt:s===3&&Vt&&(Vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ue(e)?(e={default:e,_ctx:Vt},n=32):(e=String(e),r&64?(n=16,e=[is(e)]):n=8);t.children=e,t.shapeFlag|=n}function pv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ya([e.class,r.class]));else if(s==="style")e.style=Nl([e.style,r.style]);else if(fa(s)){const i=e[s],o=r[s];o&&i!==o&&!(se(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function nn(t,e,n,r=null){Jt(t,e,7,[n,r])}const gv=Yp();let mv=0;function _v(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||gv,i={uid:mv++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sg(r,s),emitsOptions:Zp(r,s),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:r.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=KE.bind(null,i),t.ce&&t.ce(i),i}let dt=null;const pg=()=>dt||Vt;let Ho,Qc;{const t=_a(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ho=e("__VUE_INSTANCE_SETTERS__",n=>dt=n),Qc=e("__VUE_SSR_SETTERS__",n=>Si=n)}const qi=t=>{const e=dt;return Ho(t),t.scope.on(),()=>{t.scope.off(),Ho(e)}},$h=()=>{dt&&dt.scope.off(),Ho(null)};function gg(t){return t.vnode.shapeFlag&4}let Si=!1;function yv(t,e=!1,n=!1){e&&Qc(e);const{props:r,children:s}=t.vnode,i=gg(t);ev(t,r,i,e),sv(t,s,n||e);const o=i?Ev(t,e):void 0;return e&&Qc(!1),o}function Ev(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,UE);const{setup:r}=n;if(r){Pn();const s=t.setupContext=r.length>1?Tv(t):null,i=qi(t),o=ji(r,t,0,[t.props,s]),c=cp(o);if(Nn(),i(),(c||t.sp)&&!hi(t)&&zp(t),c){if(o.then($h,$h),e)return o.then(l=>{Hh(t,l)}).catch(l=>{Ia(l,t,0)});t.asyncDep=o}else Hh(t,o)}else mg(t)}function Hh(t,e,n){ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pe(e)&&(t.setupState=Vp(e)),mg(t)}function mg(t,e,n){const r=t.type;t.render||(t.render=r.render||an);{const s=qi(t);Pn();try{BE(t)}finally{Nn(),s()}}}const vv={get(t,e){return ht(t,"get",""),t[e]}};function Tv(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,vv),slots:t.slots,emit:t.emit,expose:e}}function Ca(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Vp(aE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in fi)return fi[n](t)},has(e,n){return n in e||n in fi}})):t.proxy}function Iv(t,e=!0){return ue(t)?t.displayName||t.name:t.name||e&&t.__name}function wv(t){return ue(t)&&"__vccOpts"in t}const kt=(t,e)=>fE(t,e,Si);function $l(t,e,n){try{jo(-1);const r=arguments.length;return r===2?Pe(e)&&!se(e)?$o(e)?He(t,null,[e]):He(t,e):He(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&$o(n)&&(n=[n]),He(t,e,n))}finally{jo(1)}}const Av="3.5.26";let Jc;const Gh=typeof window<"u"&&window.trustedTypes;if(Gh)try{Jc=Gh.createPolicy("vue",{createHTML:t=>t})}catch{}const _g=Jc?t=>Jc.createHTML(t):t=>t,Rv="http://www.w3.org/2000/svg",bv="http://www.w3.org/1998/Math/MathML",In=typeof document<"u"?document:null,zh=In&&In.createElement("template"),Sv={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?In.createElementNS(Rv,t):e==="mathml"?In.createElementNS(bv,t):n?In.createElement(t,{is:n}):In.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>In.createTextNode(t),createComment:t=>In.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>In.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{zh.innerHTML=_g(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=zh.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Hn="transition",Zs="animation",Ci=Symbol("_vtc"),yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Cv=et({},Bp,yg),Pv=t=>(t.displayName="Transition",t.props=Cv,t),Nv=Pv((t,{slots:e})=>$l(AE,Vv(t),e)),Ir=(t,e=[])=>{se(t)?t.forEach(n=>n(...e)):t&&t(...e)},Wh=t=>t?se(t)?t.some(e=>e.length>1):t.length>1:!1;function Vv(t){const e={};for(const w in t)w in yg||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=t,P=Dv(s),V=P&&P[0],k=P&&P[1],{onBeforeEnter:q,onEnter:B,onEnterCancelled:H,onLeave:z,onLeaveCancelled:ie,onBeforeAppear:ce=q,onAppear:R=B,onAppearCancelled:T=H}=e,_=(w,y,Te,Be)=>{w._enterCancelled=Be,wr(w,y?f:c),wr(w,y?u:o),Te&&Te()},b=(w,y)=>{w._isLeaving=!1,wr(w,p),wr(w,v),wr(w,g),y&&y()},A=w=>(y,Te)=>{const Be=w?R:B,Me=()=>_(y,w,Te);Ir(Be,[y,Me]),Kh(()=>{wr(y,w?l:i),En(y,w?f:c),Wh(Be)||Qh(y,r,V,Me)})};return et(e,{onBeforeEnter(w){Ir(q,[w]),En(w,i),En(w,o)},onBeforeAppear(w){Ir(ce,[w]),En(w,l),En(w,u)},onEnter:A(!1),onAppear:A(!0),onLeave(w,y){w._isLeaving=!0;const Te=()=>b(w,y);En(w,p),w._enterCancelled?(En(w,g),Yh(w)):(Yh(w),En(w,g)),Kh(()=>{w._isLeaving&&(wr(w,p),En(w,v),Wh(z)||Qh(w,r,k,Te))}),Ir(z,[w,Te])},onEnterCancelled(w){_(w,!1,void 0,!0),Ir(H,[w])},onAppearCancelled(w){_(w,!0,void 0,!0),Ir(T,[w])},onLeaveCancelled(w){b(w),Ir(ie,[w])}})}function Dv(t){if(t==null)return null;if(Pe(t))return[Ec(t.enter),Ec(t.leave)];{const e=Ec(t);return[e,e]}}function Ec(t){return Dy(t)}function En(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ci]||(t[Ci]=new Set)).add(e)}function wr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ci];n&&(n.delete(e),n.size||(t[Ci]=void 0))}function Kh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ov=0;function Qh(t,e,n,r){const s=t._endId=++Ov,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=kv(t,e);if(!o)return r();const u=o+"end";let f=0;const p=()=>{t.removeEventListener(u,g),i()},g=v=>{v.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},c+1),t.addEventListener(u,g)}function kv(t,e){const n=window.getComputedStyle(t),r=P=>(n[P]||"").split(", "),s=r(`${Hn}Delay`),i=r(`${Hn}Duration`),o=Jh(s,i),c=r(`${Zs}Delay`),l=r(`${Zs}Duration`),u=Jh(c,l);let f=null,p=0,g=0;e===Hn?o>0&&(f=Hn,p=o,g=i.length):e===Zs?u>0&&(f=Zs,p=u,g=l.length):(p=Math.max(o,u),f=p>0?o>u?Hn:Zs:null,g=f?f===Hn?i.length:l.length:0);const v=f===Hn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Hn}Property`).toString());return{type:f,timeout:p,propCount:g,hasTransform:v}}function Jh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Xh(n)+Xh(t[r])))}function Xh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Yh(t){return(t?t.ownerDocument:document).body.offsetHeight}function xv(t,e,n){const r=t[Ci];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Zh=Symbol("_vod"),Mv=Symbol("_vsh"),Lv=Symbol(""),Fv=/(?:^|;)\s*display\s*:/;function Uv(t,e,n){const r=t.style,s=qe(n);let i=!1;if(n&&!s){if(e)if(qe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&Ro(r,c,"")}else for(const o in e)n[o]==null&&Ro(r,o,"");for(const o in n)o==="display"&&(i=!0),Ro(r,o,n[o])}else if(s){if(e!==n){const o=r[Lv];o&&(n+=";"+o),r.cssText=n,i=Fv.test(n)}}else e&&t.removeAttribute("style");Zh in t&&(t[Zh]=i?r.display:"",t[Mv]&&(r.display="none"))}const ef=/\s*!important$/;function Ro(t,e,n){if(se(n))n.forEach(r=>Ro(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Bv(t,e);ef.test(n)?t.setProperty(qr(r),n.replace(ef,""),"important"):t[r]=n}}const tf=["Webkit","Moz","ms"],vc={};function Bv(t,e){const n=vc[e];if(n)return n;let r=Ut(e);if(r!=="filter"&&r in t)return vc[e]=r;r=ga(r);for(let s=0;s<tf.length;s++){const i=tf[s]+r;if(i in t)return vc[e]=i}return e}const nf="http://www.w3.org/1999/xlink";function rf(t,e,n,r,s,i=Fy(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(nf,e.slice(6,e.length)):t.setAttributeNS(nf,e,n):n==null||i&&!fp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":pn(n)?String(n):n)}function sf(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?_g(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=fp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Cr(t,e,n,r){t.addEventListener(e,n,r)}function jv(t,e,n,r){t.removeEventListener(e,n,r)}const of=Symbol("_vei");function qv(t,e,n,r,s=null){const i=t[of]||(t[of]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=$v(e);if(r){const u=i[e]=zv(r,s);Cr(t,c,u,l)}else o&&(jv(t,c,o,l),i[e]=void 0)}}const af=/(?:Once|Passive|Capture)$/;function $v(t){let e;if(af.test(t)){e={};let r;for(;r=t.match(af);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qr(t.slice(2)),e]}let Tc=0;const Hv=Promise.resolve(),Gv=()=>Tc||(Hv.then(()=>Tc=0),Tc=Date.now());function zv(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Jt(Wv(r,n.value),e,5,[r])};return n.value=t,n.attached=Gv(),n}function Wv(t,e){if(se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const cf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Kv=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?xv(t,r,o):e==="style"?Uv(t,n,r):fa(e)?Sl(e)||qv(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Qv(t,e,r,o))?(sf(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&rf(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qe(r))?sf(t,Ut(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),rf(t,e,r,o))};function Qv(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&cf(e)&&ue(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return cf(e)&&qe(n)?!1:e in t}const Go=t=>{const e=t.props["onUpdate:modelValue"]||!1;return se(e)?n=>vo(e,n):e};function Jv(t){t.target.composing=!0}function lf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const us=Symbol("_assign");function uf(t,e,n){return e&&(t=t.trim()),n&&(t=ma(t)),t}const LP={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[us]=Go(s);const i=r||s.props&&s.props.type==="number";Cr(t,e?"change":"input",o=>{o.target.composing||t[us](uf(t.value,n,i))}),(n||i)&&Cr(t,"change",()=>{t.value=uf(t.value,n,i)}),e||(Cr(t,"compositionstart",Jv),Cr(t,"compositionend",lf),Cr(t,"change",lf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[us]=Go(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?ma(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},FP={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=da(e);Cr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ma(zo(o)):zo(o));t[us](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Fl(()=>{t._assigning=!1})}),t[us]=Go(r)},mounted(t,{value:e}){hf(t,e)},beforeUpdate(t,e,n){t[us]=Go(n)},updated(t,{value:e}){t._assigning||hf(t,e)}};function hf(t,e){const n=t.multiple,r=se(e);if(!(n&&!r&&!da(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=zo(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(c)):o.selected=By(e,c)>-1}else o.selected=e.has(c);else if(Ea(zo(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function zo(t){return"_value"in t?t._value:t.value}const Xv=["ctrl","shift","alt","meta"],Yv={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Xv.some(n=>t[`${n}Key`]&&!e.includes(n))},Zv=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=Yv[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},eT=et({patchProp:Kv},Sv);let ff;function tT(){return ff||(ff=ov(eT))}const nT=((...t)=>{const e=tT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=sT(r);if(!s)return;const i=e._component;!ue(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,rT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function rT(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function sT(t){return qe(t)?document.querySelector(t):t}const es=typeof document<"u";function Eg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function iT(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Eg(t.default)}const Re=Object.assign;function Ic(t,e){const n={};for(const r in e){const s=e[r];n[r]=Xt(s)?s.map(t):t(s)}return n}const pi=()=>{},Xt=Array.isArray;function df(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const vg=/#/g,oT=/&/g,aT=/\//g,cT=/=/g,lT=/\?/g,Tg=/\+/g,uT=/%5B/g,hT=/%5D/g,Ig=/%5E/g,fT=/%60/g,wg=/%7B/g,dT=/%7C/g,Ag=/%7D/g,pT=/%20/g;function Hl(t){return t==null?"":encodeURI(""+t).replace(dT,"|").replace(uT,"[").replace(hT,"]")}function gT(t){return Hl(t).replace(wg,"{").replace(Ag,"}").replace(Ig,"^")}function Xc(t){return Hl(t).replace(Tg,"%2B").replace(pT,"+").replace(vg,"%23").replace(oT,"%26").replace(fT,"`").replace(wg,"{").replace(Ag,"}").replace(Ig,"^")}function mT(t){return Xc(t).replace(cT,"%3D")}function _T(t){return Hl(t).replace(vg,"%23").replace(lT,"%3F")}function yT(t){return _T(t).replace(aT,"%2F")}function Pi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const ET=/\/$/,vT=t=>t.replace(ET,"");function wc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=AT(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Pi(o)}}function TT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function pf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function IT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ys(e.matched[r],n.matched[s])&&Rg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ys(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Rg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!wT(t[n],e[n]))return!1;return!0}function wT(t,e){return Xt(t)?gf(t,e):Xt(e)?gf(e,t):t?.valueOf()===e?.valueOf()}function gf(t,e){return Xt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function AT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Yc=(function(t){return t.pop="pop",t.push="push",t})({}),Ac=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function RT(t){if(!t)if(es){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),vT(t)}const bT=/^[^#]+#/;function ST(t,e){return t.replace(bT,"#")+e}function CT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Pa=()=>({left:window.scrollX,top:window.scrollY});function PT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=CT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function mf(t,e){return(history.state?history.state.position-e:-1)+t}const Zc=new Map;function NT(t,e){Zc.set(t,e)}function VT(t){const e=Zc.get(t);return Zc.delete(t),e}function DT(t){return typeof t=="string"||t&&typeof t=="object"}function bg(t){return typeof t=="string"||typeof t=="symbol"}let Ue=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Sg=Symbol("");Ue.MATCHER_NOT_FOUND+"",Ue.NAVIGATION_GUARD_REDIRECT+"",Ue.NAVIGATION_ABORTED+"",Ue.NAVIGATION_CANCELLED+"",Ue.NAVIGATION_DUPLICATED+"";function Es(t,e){return Re(new Error,{type:t,[Sg]:!0},e)}function vn(t,e){return t instanceof Error&&Sg in t&&(e==null||!!(t.type&e))}const OT=["params","query","hash"];function kT(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of OT)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function xT(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Tg," "),i=s.indexOf("="),o=Pi(i<0?s:s.slice(0,i)),c=i<0?null:Pi(s.slice(i+1));if(o in e){let l=e[o];Xt(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function _f(t){let e="";for(let n in t){const r=t[n];if(n=mT(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Xt(r)?r.map(s=>s&&Xc(s)):[r&&Xc(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function MT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Xt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const LT=Symbol(""),yf=Symbol(""),Na=Symbol(""),Gl=Symbol(""),el=Symbol("");function ei(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Jn(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=g=>{g===!1?l(Es(Ue.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?l(g):DT(g)?l(Es(Ue.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(g=>l(g))})}function Rc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Eg(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Jn(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=iT(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const g=(p.__vccOpts||p)[e];return g&&Jn(g,n,r,o,c,s)()}))}}return i}function FT(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>ys(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>ys(u,l))||s.push(l))}return[n,r,s]}let UT=()=>location.protocol+"//"+location.host;function Cg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),pf(c,"")}return pf(n,t)+r+s}function BT(t,e,n,r){let s=[],i=[],o=null;const c=({state:g})=>{const v=Cg(t,location),P=n.value,V=e.value;let k=0;if(g){if(n.value=v,e.value=g,o&&o===P){o=null;return}k=V?g.position-V.position:0}else r(v);s.forEach(q=>{q(n.value,P,{delta:k,type:Yc.pop,direction:k?k>0?Ac.forward:Ac.back:Ac.unknown})})};function l(){o=n.value}function u(g){s.push(g);const v=()=>{const P=s.indexOf(g);P>-1&&s.splice(P,1)};return i.push(v),v}function f(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Re({},g.state,{scroll:Pa()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function Ef(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Pa():null}}function jT(t){const{history:e,location:n}=window,r={value:Cg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:UT()+t+l;try{e[f?"replaceState":"pushState"](u,"",g),s.value=u}catch(v){console.error(v),n[f?"replace":"assign"](g)}}function o(l,u){i(l,Re({},e.state,Ef(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Re({},s.value,e.state,{forward:l,scroll:Pa()});i(f.current,f,!0),i(l,Re({},Ef(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function qT(t){t=RT(t);const e=jT(t),n=BT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Re({location:"",base:t,go:r,createHref:ST.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function $T(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),qT(t)}let Pr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ke=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ke||{});const HT={type:Pr.Static,value:""},GT=/[a-zA-Z0-9_]/;function zT(t){if(!t)return[[]];if(t==="/")return[[HT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${u}": ${v}`)}let n=Ke.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===Ke.Static?i.push({type:Pr.Static,value:u}):n===Ke.Param||n===Ke.ParamRegExp||n===Ke.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Pr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Ke.ParamRegExp){r=n,n=Ke.EscapeNext;continue}switch(n){case Ke.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=Ke.Param):g();break;case Ke.EscapeNext:g(),n=r;break;case Ke.Param:l==="("?n=Ke.ParamRegExp:GT.test(l)?g():(p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Ke.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Ke.ParamRegExpEnd:f+=l;break;case Ke.ParamRegExpEnd:p(),n=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Ke.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const vf="[^/]+?",WT={sensitive:!1,strict:!1,start:!0,end:!0};var yt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(yt||{});const KT=/[.+*?^${}()[\]/\\]/g;function QT(t,e){const n=Re({},WT,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[yt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const g=u[p];let v=yt.Segment+(n.sensitive?yt.BonusCaseSensitive:0);if(g.type===Pr.Static)p||(s+="/"),s+=g.value.replace(KT,"\\$&"),v+=yt.Static;else if(g.type===Pr.Param){const{value:P,repeatable:V,optional:k,regexp:q}=g;i.push({name:P,repeatable:V,optional:k});const B=q||vf;if(B!==vf){v+=yt.BonusCustomRegExp;try{`${B}`}catch(z){throw new Error(`Invalid custom RegExp for param "${P}" (${B}): `+z.message)}}let H=V?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(H=k&&u.length<2?`(?:/${H})`:"/"+H),k&&(H+="?"),s+=H,v+=yt.Dynamic,k&&(v+=yt.BonusOptional),V&&(v+=yt.BonusRepeatable),B===".*"&&(v+=yt.BonusWildcard)}f.push(v)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=yt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let g=1;g<f.length;g++){const v=f[g]||"",P=i[g-1];p[P.name]=v&&P.repeatable?v.split("/"):v}return p}function l(u){let f="",p=!1;for(const g of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const v of g)if(v.type===Pr.Static)f+=v.value;else if(v.type===Pr.Param){const{value:P,repeatable:V,optional:k}=v,q=P in u?u[P]:"";if(Xt(q)&&!V)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const B=Xt(q)?q.join("/"):q;if(!B)if(k)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);f+=B}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function JT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===yt.Static+yt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===yt.Static+yt.Segment?1:-1:0}function Pg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=JT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Tf(r))return 1;if(Tf(s))return-1}return s.length-r.length}function Tf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const XT={strict:!1,end:!0,sensitive:!1};function YT(t,e,n){const r=QT(zT(t.path),n),s=Re(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function ZT(t,e){const n=[],r=new Map;e=df(XT,e);function s(p){return r.get(p)}function i(p,g,v){const P=!v,V=wf(p);V.aliasOf=v&&v.record;const k=df(e,p),q=[V];if("alias"in p){const z=typeof p.alias=="string"?[p.alias]:p.alias;for(const ie of z)q.push(wf(Re({},V,{components:v?v.record.components:V.components,path:ie,aliasOf:v?v.record:V})))}let B,H;for(const z of q){const{path:ie}=z;if(g&&ie[0]!=="/"){const ce=g.record.path,R=ce[ce.length-1]==="/"?"":"/";z.path=g.record.path+(ie&&R+ie)}if(B=YT(z,g,k),v?v.alias.push(B):(H=H||B,H!==B&&H.alias.push(B),P&&p.name&&!Af(B)&&o(p.name)),Ng(B)&&l(B),V.children){const ce=V.children;for(let R=0;R<ce.length;R++)i(ce[R],B,v&&v.children[R])}v=v||B}return H?()=>{o(H)}:pi}function o(p){if(bg(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const g=nI(p,n);n.splice(g,0,p),p.record.name&&!Af(p)&&r.set(p.record.name,p)}function u(p,g){let v,P={},V,k;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw Es(Ue.MATCHER_NOT_FOUND,{location:p});k=v.record.name,P=Re(If(g.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&If(p.params,v.keys.map(H=>H.name))),V=v.stringify(P)}else if(p.path!=null)V=p.path,v=n.find(H=>H.re.test(V)),v&&(P=v.parse(V),k=v.record.name);else{if(v=g.name?r.get(g.name):n.find(H=>H.re.test(g.path)),!v)throw Es(Ue.MATCHER_NOT_FOUND,{location:p,currentLocation:g});k=v.record.name,P=Re({},g.params,p.params),V=v.stringify(P)}const q=[];let B=v;for(;B;)q.unshift(B.record),B=B.parent;return{name:k,path:V,params:P,matched:q,meta:tI(q)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function If(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function wf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:eI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function eI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Af(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function tI(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function nI(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;Pg(t,e[i])<0?r=i:n=i+1}const s=rI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function rI(t){let e=t;for(;e=e.parent;)if(Ng(e)&&Pg(t,e)===0)return e}function Ng({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Rf(t){const e=Wt(Na),n=Wt(Gl),r=kt(()=>{const l=kr(t.to);return e.resolve(l)}),s=kt(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const g=p.findIndex(ys.bind(null,f));if(g>-1)return g;const v=bf(l[u-2]);return u>1&&bf(f)===v&&p[p.length-1].path!==v?p.findIndex(ys.bind(null,l[u-2])):g}),i=kt(()=>s.value>-1&&cI(n.params,r.value.params)),o=kt(()=>s.value>-1&&s.value===n.matched.length-1&&Rg(n.params,r.value.params));function c(l={}){if(aI(l)){const u=e[kr(t.replace)?"replace":"push"](kr(t.to)).catch(pi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:kt(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function sI(t){return t.length===1?t[0]:t}const iI=Gp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rf,setup(t,{slots:e}){const n=Ta(Rf(t)),{options:r}=Wt(Na),s=kt(()=>({[Sf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Sf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&sI(e.default(n));return t.custom?i:$l("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),oI=iI;function aI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function cI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Xt(s)||s.length!==r.length||r.some((i,o)=>i.valueOf()!==s[o].valueOf()))return!1}return!0}function bf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Sf=(t,e,n)=>t??e??n,lI=Gp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Wt(el),s=kt(()=>t.route||r.value),i=Wt(yf,0),o=kt(()=>{let u=kr(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=kt(()=>s.value.matched[o.value]);Io(yf,kt(()=>o.value+1)),Io(LT,c),Io(el,s);const l=ti();return wo(()=>[l.value,c.value,t.name],([u,f,p],[g,v,P])=>{f&&(f.instances[p]=u,v&&v!==f&&u&&u===g&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),u&&f&&(!v||!ys(f,v)||!g)&&(f.enterCallbacks[p]||[]).forEach(V=>V(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,g=p&&p.components[f];if(!g)return Cf(n.default,{Component:g,route:u});const v=p.props[f],P=v?v===!0?u.params:typeof v=="function"?v(u):v:null,k=$l(g,Re({},P,e,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return Cf(n.default,{Component:k,route:u})||k}}});function Cf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Vg=lI;function uI(t){const e=ZT(t.routes,t),n=t.parseQuery||xT,r=t.stringifyQuery||_f,s=t.history,i=ei(),o=ei(),c=ei(),l=cE(Gn);let u=Gn;es&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ic.bind(null,x=>""+x),p=Ic.bind(null,yT),g=Ic.bind(null,Pi);function v(x,X){let K,Z;return bg(x)?(K=e.getRecordMatcher(x),Z=X):Z=x,e.addRoute(Z,K)}function P(x){const X=e.getRecordMatcher(x);X&&e.removeRoute(X)}function V(){return e.getRoutes().map(x=>x.record)}function k(x){return!!e.getRecordMatcher(x)}function q(x,X){if(X=Re({},X||l.value),typeof x=="string"){const S=wc(n,x,X.path),D=e.resolve({path:S.path},X),F=s.createHref(S.fullPath);return Re(S,D,{params:g(D.params),hash:Pi(S.hash),redirectedFrom:void 0,href:F})}let K;if(x.path!=null)K=Re({},x,{path:wc(n,x.path,X.path).path});else{const S=Re({},x.params);for(const D in S)S[D]==null&&delete S[D];K=Re({},x,{params:p(S)}),X.params=p(X.params)}const Z=e.resolve(K,X),ge=x.hash||"";Z.params=f(g(Z.params));const E=TT(r,Re({},x,{hash:gT(ge),path:Z.path})),I=s.createHref(E);return Re({fullPath:E,hash:ge,query:r===_f?MT(x.query):x.query||{}},Z,{redirectedFrom:void 0,href:I})}function B(x){return typeof x=="string"?wc(n,x,l.value.path):Re({},x)}function H(x,X){if(u!==x)return Es(Ue.NAVIGATION_CANCELLED,{from:X,to:x})}function z(x){return R(x)}function ie(x){return z(Re(B(x),{replace:!0}))}function ce(x,X){const K=x.matched[x.matched.length-1];if(K&&K.redirect){const{redirect:Z}=K;let ge=typeof Z=="function"?Z(x,X):Z;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=B(ge):{path:ge},ge.params={}),Re({query:x.query,hash:x.hash,params:ge.path!=null?{}:x.params},ge)}}function R(x,X){const K=u=q(x),Z=l.value,ge=x.state,E=x.force,I=x.replace===!0,S=ce(K,Z);if(S)return R(Re(B(S),{state:typeof S=="object"?Re({},ge,S.state):ge,force:E,replace:I}),X||K);const D=K;D.redirectedFrom=X;let F;return!E&&IT(r,Z,K)&&(F=Es(Ue.NAVIGATION_DUPLICATED,{to:D,from:Z}),Rt(Z,Z,!0,!1)),(F?Promise.resolve(F):b(D,Z)).catch(O=>vn(O)?vn(O,Ue.NAVIGATION_GUARD_REDIRECT)?O:Zt(O):Ee(O,D,Z)).then(O=>{if(O){if(vn(O,Ue.NAVIGATION_GUARD_REDIRECT))return R(Re({replace:I},B(O.to),{state:typeof O.to=="object"?Re({},ge,O.to.state):ge,force:E}),X||D)}else O=w(D,Z,!0,I,ge);return A(D,Z,O),O})}function T(x,X){const K=H(x,X);return K?Promise.reject(K):Promise.resolve()}function _(x){const X=Bt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(x):x()}function b(x,X){let K;const[Z,ge,E]=FT(x,X);K=Rc(Z.reverse(),"beforeRouteLeave",x,X);for(const S of Z)S.leaveGuards.forEach(D=>{K.push(Jn(D,x,X))});const I=T.bind(null,x,X);return K.push(I),ot(K).then(()=>{K=[];for(const S of i.list())K.push(Jn(S,x,X));return K.push(I),ot(K)}).then(()=>{K=Rc(ge,"beforeRouteUpdate",x,X);for(const S of ge)S.updateGuards.forEach(D=>{K.push(Jn(D,x,X))});return K.push(I),ot(K)}).then(()=>{K=[];for(const S of E)if(S.beforeEnter)if(Xt(S.beforeEnter))for(const D of S.beforeEnter)K.push(Jn(D,x,X));else K.push(Jn(S.beforeEnter,x,X));return K.push(I),ot(K)}).then(()=>(x.matched.forEach(S=>S.enterCallbacks={}),K=Rc(E,"beforeRouteEnter",x,X,_),K.push(I),ot(K))).then(()=>{K=[];for(const S of o.list())K.push(Jn(S,x,X));return K.push(I),ot(K)}).catch(S=>vn(S,Ue.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function A(x,X,K){c.list().forEach(Z=>_(()=>Z(x,X,K)))}function w(x,X,K,Z,ge){const E=H(x,X);if(E)return E;const I=X===Gn,S=es?history.state:{};K&&(Z||I?s.replace(x.fullPath,Re({scroll:I&&S&&S.scroll},ge)):s.push(x.fullPath,ge)),l.value=x,Rt(x,X,K,I),Zt()}let y;function Te(){y||(y=s.listen((x,X,K)=>{if(!jt.listening)return;const Z=q(x),ge=ce(Z,jt.currentRoute.value);if(ge){R(Re(ge,{replace:!0,force:!0}),Z).catch(pi);return}u=Z;const E=l.value;es&&NT(mf(E.fullPath,K.delta),Pa()),b(Z,E).catch(I=>vn(I,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_CANCELLED)?I:vn(I,Ue.NAVIGATION_GUARD_REDIRECT)?(R(Re(B(I.to),{force:!0}),Z).then(S=>{vn(S,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Yc.pop&&s.go(-1,!1)}).catch(pi),Promise.reject()):(K.delta&&s.go(-K.delta,!1),Ee(I,Z,E))).then(I=>{I=I||w(Z,E,!1),I&&(K.delta&&!vn(I,Ue.NAVIGATION_CANCELLED)?s.go(-K.delta,!1):K.type===Yc.pop&&vn(I,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(Z,E,I)}).catch(pi)}))}let Be=ei(),Me=ei(),Ae;function Ee(x,X,K){Zt(x);const Z=Me.list();return Z.length?Z.forEach(ge=>ge(x,X,K)):console.error(x),Promise.reject(x)}function It(){return Ae&&l.value!==Gn?Promise.resolve():new Promise((x,X)=>{Be.add([x,X])})}function Zt(x){return Ae||(Ae=!x,Te(),Be.list().forEach(([X,K])=>x?K(x):X()),Be.reset()),x}function Rt(x,X,K,Z){const{scrollBehavior:ge}=t;if(!es||!ge)return Promise.resolve();const E=!K&&VT(mf(x.fullPath,0))||(Z||!K)&&history.state&&history.state.scroll||null;return Fl().then(()=>ge(x,X,E)).then(I=>I&&PT(I)).catch(I=>Ee(I,x,X))}const tt=x=>s.go(x);let _n;const Bt=new Set,jt={currentRoute:l,listening:!0,addRoute:v,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:V,resolve:q,options:t,push:z,replace:ie,go:tt,back:()=>tt(-1),forward:()=>tt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:It,install(x){x.component("RouterLink",oI),x.component("RouterView",Vg),x.config.globalProperties.$router=jt,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>kr(l)}),es&&!_n&&l.value===Gn&&(_n=!0,z(s.location).catch(Z=>{}));const X={};for(const Z in Gn)Object.defineProperty(X,Z,{get:()=>l.value[Z],enumerable:!0});x.provide(Na,jt),x.provide(Gl,Pp(X)),x.provide(el,l);const K=x.unmount;Bt.add(x),x.unmount=function(){Bt.delete(x),Bt.size<1&&(u=Gn,y&&y(),y=null,l.value=Gn,_n=!1,Ae=!1),K()}}};function ot(x){return x.reduce((X,K)=>X.then(()=>_(K)),Promise.resolve())}return jt}function Dg(){return Wt(Na)}function hI(t){return Wt(Gl)}const Og="/assets/logo2-CefVcnt0.png",fI=()=>{};var Pf={};const kg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|u>>6,v=u&63;l||(v=64,o||(g=64)),r.push(n[f],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new pI;const g=i<<2|c>>4;if(r.push(g),u!==64){const v=c<<4&240|u>>2;if(r.push(v),p!==64){const P=u<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gI=function(t){const e=kg(t);return xg.encodeByteArray(e,!0)},Wo=function(t){return gI(t).replace(/\./g,"")},Mg=function(t){try{return xg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _I=()=>mI().__FIREBASE_DEFAULTS__,yI=()=>{if(typeof process>"u"||typeof Pf>"u")return;const t=Pf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},EI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mg(t[1]);return e&&JSON.parse(e)},Va=()=>{try{return fI()||_I()||yI()||EI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lg=t=>Va()?.emulatorHosts?.[t],vI=t=>{const e=Lg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fg=()=>Va()?.config,Ug=t=>Va()?.[`_${t}`];class TI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Cs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bg(t){return(await fetch(t,{credentials:"include"})).ok}function II(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wo(JSON.stringify(n)),Wo(JSON.stringify(o)),""].join(".")}const gi={};function wI(){const t={prod:[],emulator:[]};for(const e of Object.keys(gi))gi[e]?t.emulator.push(e):t.prod.push(e);return t}function AI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Nf=!1;function jg(t,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||gi[t]===e||gi[t]||Nf)return;gi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=wI().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Nf=!0,o()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=AI(r),v=n("text"),P=document.getElementById(v)||document.createElement("span"),V=n("learnmore"),k=document.getElementById(V)||document.createElement("a"),q=n("preprendIcon"),B=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const H=g.element;c(H),f(k,V);const z=u();l(B,q),H.append(B,P,k,z),document.body.appendChild(H)}i?(P.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function bI(){const t=Va()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NI(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VI(){return!bI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DI(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const kI="FirebaseError";class Ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kI,Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}}class $i{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ln(s,c,r)}}function xI(t,e){return t.replace(MI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MI=/\{\$([^}]+)}/g;function LI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vf(i)&&Vf(o)){if(!Lr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vf(t){return t!==null&&typeof t=="object"}function Hi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FI(t,e){const n=new UI(t,e);return n.subscribe.bind(n)}class UI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bc),s.error===void 0&&(s.error=bc),s.complete===void 0&&(s.complete=bc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bc(){}function Tt(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rr="[DEFAULT]";class jI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($I(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qI(t){return t===Rr?void 0:t}function $I(t){return t.instantiationMode==="EAGER"}class HI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const GI={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},zI=me.INFO,WI={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},KI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zl{constructor(e){this.name=e,this._logLevel=zI,this._logHandler=KI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const QI=(t,e)=>e.some(n=>t instanceof n);let Df,Of;function JI(){return Df||(Df=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XI(){return Of||(Of=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qg=new WeakMap,tl=new WeakMap,$g=new WeakMap,Sc=new WeakMap,Wl=new WeakMap;function YI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qg.set(n,t)}).catch(()=>{}),Wl.set(e,t),e}function ZI(t){if(tl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});tl.set(t,e)}let nl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$g.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ew(t){nl=t(nl)}function tw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cc(this),e,...n);return $g.set(r,e.sort?e.sort():[e]),nr(r)}:XI().includes(t)?function(...e){return t.apply(Cc(this),e),nr(qg.get(this))}:function(...e){return nr(t.apply(Cc(this),e))}}function nw(t){return typeof t=="function"?tw(t):(t instanceof IDBTransaction&&ZI(t),QI(t,JI())?new Proxy(t,nl):t)}function nr(t){if(t instanceof IDBRequest)return YI(t);if(Sc.has(t))return Sc.get(t);const e=nw(t);return e!==t&&(Sc.set(t,e),Wl.set(e,t)),e}const Cc=t=>Wl.get(t);function rw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=nr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(nr(o.result),l.oldVersion,l.newVersion,nr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const sw=["get","getKey","getAll","getAllKeys","count"],iw=["put","add","delete","clear"],Pc=new Map;function kf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pc.get(e))return Pc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sw.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Pc.set(e,i),i}ew(t=>({...t,get:(e,n,r)=>kf(e,n)||t.get(e,n,r),has:(e,n)=>!!kf(e,n)||t.has(e,n)}));class ow{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aw(t){return t.getComponent()?.type==="VERSION"}const rl="@firebase/app",xf="0.14.6";const Dn=new zl("@firebase/app"),cw="@firebase/app-compat",lw="@firebase/analytics-compat",uw="@firebase/analytics",hw="@firebase/app-check-compat",fw="@firebase/app-check",dw="@firebase/auth",pw="@firebase/auth-compat",gw="@firebase/database",mw="@firebase/data-connect",_w="@firebase/database-compat",yw="@firebase/functions",Ew="@firebase/functions-compat",vw="@firebase/installations",Tw="@firebase/installations-compat",Iw="@firebase/messaging",ww="@firebase/messaging-compat",Aw="@firebase/performance",Rw="@firebase/performance-compat",bw="@firebase/remote-config",Sw="@firebase/remote-config-compat",Cw="@firebase/storage",Pw="@firebase/storage-compat",Nw="@firebase/firestore",Vw="@firebase/ai",Dw="@firebase/firestore-compat",Ow="firebase",kw="12.6.0";const sl="[DEFAULT]",xw={[rl]:"fire-core",[cw]:"fire-core-compat",[uw]:"fire-analytics",[lw]:"fire-analytics-compat",[fw]:"fire-app-check",[hw]:"fire-app-check-compat",[dw]:"fire-auth",[pw]:"fire-auth-compat",[gw]:"fire-rtdb",[mw]:"fire-data-connect",[_w]:"fire-rtdb-compat",[yw]:"fire-fn",[Ew]:"fire-fn-compat",[vw]:"fire-iid",[Tw]:"fire-iid-compat",[Iw]:"fire-fcm",[ww]:"fire-fcm-compat",[Aw]:"fire-perf",[Rw]:"fire-perf-compat",[bw]:"fire-rc",[Sw]:"fire-rc-compat",[Cw]:"fire-gcs",[Pw]:"fire-gcs-compat",[Nw]:"fire-fst",[Dw]:"fire-fst-compat",[Vw]:"fire-vertex","fire-js":"fire-js",[Ow]:"fire-js-all"};const Ko=new Map,Mw=new Map,il=new Map;function Mf(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vs(t){const e=t.name;if(il.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;il.set(e,t);for(const n of Ko.values())Mf(n,t);for(const n of Mw.values())Mf(n,t);return!0}function Kl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xt(t){return t==null?!1:t.settings!==void 0}const Lw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new $i("app","Firebase",Lw);class Fw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}const Ps=kw;function Hg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw rr.create("bad-app-name",{appName:String(s)});if(n||(n=Fg()),!n)throw rr.create("no-options");const i=Ko.get(s);if(i){if(Lr(n,i.options)&&Lr(r,i.config))return i;throw rr.create("duplicate-app",{appName:s})}const o=new HI(s);for(const l of il.values())o.addComponent(l);const c=new Fw(n,r,o);return Ko.set(s,c),c}function Gg(t=sl){const e=Ko.get(t);if(!e&&t===sl&&Fg())return Hg();if(!e)throw rr.create("no-app",{appName:t});return e}function sr(t,e,n){let r=xw[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(o.join(" "));return}vs(new Fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Uw="firebase-heartbeat-database",Bw=1,Ni="firebase-heartbeat-store";let Nc=null;function zg(){return Nc||(Nc=rw(Uw,Bw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ni)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),Nc}async function jw(t){try{const n=(await zg()).transaction(Ni),r=await n.objectStore(Ni).get(Wg(t));return await n.done,r}catch(e){if(e instanceof Ln)Dn.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e?.message});Dn.warn(n.message)}}}async function Lf(t,e){try{const r=(await zg()).transaction(Ni,"readwrite");await r.objectStore(Ni).put(e,Wg(t)),await r.done}catch(n){if(n instanceof Ln)Dn.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n?.message});Dn.warn(r.message)}}}function Wg(t){return`${t.name}!${t.options.appId}`}const qw=1024,$w=30;class Hw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ff();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>$w){const s=Ww(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Dn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ff(),{heartbeatsToSend:n,unsentEntries:r}=Gw(this._heartbeatsCache.heartbeats),s=Wo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Dn.warn(e),""}}}function Ff(){return new Date().toISOString().substring(0,10)}function Gw(t,e=qw){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Uf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DI()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uf(t){return Wo(JSON.stringify({version:2,heartbeats:t})).length}function Ww(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Kw(t){vs(new Fr("platform-logger",e=>new ow(e),"PRIVATE")),vs(new Fr("heartbeat",e=>new Hw(e),"PRIVATE")),sr(rl,xf,t),sr(rl,xf,"esm2020"),sr("fire-js","")}Kw("");var Qw="firebase",Jw="12.7.0";sr(Qw,Jw,"app");var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ir,Kg;(function(){var t;function e(R,T){function _(){}_.prototype=T.prototype,R.F=T.prototype,R.prototype=new _,R.prototype.constructor=R,R.D=function(b,A,w){for(var y=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)y[Te-2]=arguments[Te];return T.prototype[A].apply(b,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,_){_||(_=0);const b=Array(16);if(typeof T=="string")for(var A=0;A<16;++A)b[A]=T.charCodeAt(_++)|T.charCodeAt(_++)<<8|T.charCodeAt(_++)<<16|T.charCodeAt(_++)<<24;else for(A=0;A<16;++A)b[A]=T[_++]|T[_++]<<8|T[_++]<<16|T[_++]<<24;T=R.g[0],_=R.g[1],A=R.g[2];let w=R.g[3],y;y=T+(w^_&(A^w))+b[0]+3614090360&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[1]+3905402710&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[2]+606105819&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[3]+3250441966&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[4]+4118548399&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[5]+1200080426&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[6]+2821735955&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[7]+4249261313&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[8]+1770035416&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[9]+2336552879&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[10]+4294925233&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[11]+2304563134&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(w^_&(A^w))+b[12]+1804603682&4294967295,T=_+(y<<7&4294967295|y>>>25),y=w+(A^T&(_^A))+b[13]+4254626195&4294967295,w=T+(y<<12&4294967295|y>>>20),y=A+(_^w&(T^_))+b[14]+2792965006&4294967295,A=w+(y<<17&4294967295|y>>>15),y=_+(T^A&(w^T))+b[15]+1236535329&4294967295,_=A+(y<<22&4294967295|y>>>10),y=T+(A^w&(_^A))+b[1]+4129170786&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[6]+3225465664&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[11]+643717713&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[0]+3921069994&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[5]+3593408605&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[10]+38016083&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[15]+3634488961&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[4]+3889429448&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[9]+568446438&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[14]+3275163606&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[3]+4107603335&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[8]+1163531501&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(A^w&(_^A))+b[13]+2850285829&4294967295,T=_+(y<<5&4294967295|y>>>27),y=w+(_^A&(T^_))+b[2]+4243563512&4294967295,w=T+(y<<9&4294967295|y>>>23),y=A+(T^_&(w^T))+b[7]+1735328473&4294967295,A=w+(y<<14&4294967295|y>>>18),y=_+(w^T&(A^w))+b[12]+2368359562&4294967295,_=A+(y<<20&4294967295|y>>>12),y=T+(_^A^w)+b[5]+4294588738&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[8]+2272392833&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[11]+1839030562&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[14]+4259657740&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[1]+2763975236&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[4]+1272893353&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[7]+4139469664&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[10]+3200236656&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[13]+681279174&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[0]+3936430074&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[3]+3572445317&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[6]+76029189&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(_^A^w)+b[9]+3654602809&4294967295,T=_+(y<<4&4294967295|y>>>28),y=w+(T^_^A)+b[12]+3873151461&4294967295,w=T+(y<<11&4294967295|y>>>21),y=A+(w^T^_)+b[15]+530742520&4294967295,A=w+(y<<16&4294967295|y>>>16),y=_+(A^w^T)+b[2]+3299628645&4294967295,_=A+(y<<23&4294967295|y>>>9),y=T+(A^(_|~w))+b[0]+4096336452&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[7]+1126891415&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[14]+2878612391&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[5]+4237533241&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[12]+1700485571&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[3]+2399980690&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[10]+4293915773&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[1]+2240044497&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[8]+1873313359&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[15]+4264355552&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[6]+2734768916&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[13]+1309151649&4294967295,_=A+(y<<21&4294967295|y>>>11),y=T+(A^(_|~w))+b[4]+4149444226&4294967295,T=_+(y<<6&4294967295|y>>>26),y=w+(_^(T|~A))+b[11]+3174756917&4294967295,w=T+(y<<10&4294967295|y>>>22),y=A+(T^(w|~_))+b[2]+718787259&4294967295,A=w+(y<<15&4294967295|y>>>17),y=_+(w^(A|~T))+b[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(A+(y<<21&4294967295|y>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+w&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const _=T-this.blockSize,b=this.C;let A=this.h,w=0;for(;w<T;){if(A==0)for(;w<=_;)s(this,R,w),w+=this.blockSize;if(typeof R=="string"){for(;w<T;)if(b[A++]=R.charCodeAt(w++),A==this.blockSize){s(this,b),A=0;break}}else for(;w<T;)if(b[A++]=R[w++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var _=R.length-8;_<R.length;++_)R[_]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,_=0;_<4;++_)for(let b=0;b<32;b+=8)R[T++]=this.g[_]>>>b&255;return R};function i(R,T){var _=c;return Object.prototype.hasOwnProperty.call(_,R)?_[R]:_[R]=T(R)}function o(R,T){this.h=T;const _=[];let b=!0;for(let A=R.length-1;A>=0;A--){const w=R[A]|0;b&&w==T||(_[A]=w,b=!1)}this.g=_}var c={};function l(R){return-128<=R&&R<128?i(R,function(T){return new o([T|0],T<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return k(u(-R));const T=[];let _=1;for(let b=0;R>=_;b++)T[b]=R/_|0,_*=4294967296;return new o(T,0)}function f(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return k(f(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=u(Math.pow(T,8));let b=p;for(let w=0;w<R.length;w+=8){var A=Math.min(8,R.length-w);const y=parseInt(R.substring(w,w+A),T);A<8?(A=u(Math.pow(T,A)),b=b.j(A).add(u(y))):(b=b.j(_),b=b.add(u(y)))}return b}var p=l(0),g=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(V(this))return-k(this).m();let R=0,T=1;for(let _=0;_<this.g.length;_++){const b=this.i(_);R+=(b>=0?b:4294967296+b)*T,T*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(V(this))return"-"+k(this).toString(R);const T=u(Math.pow(R,6));var _=this;let b="";for(;;){const A=z(_,T).g;_=q(_,A.j(T));let w=((_.g.length>0?_.g[0]:_.h)>>>0).toString(R);if(_=A,P(_))return w+b;for(;w.length<6;)w="0"+w;b=w+b}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function V(R){return R.h==-1}t.l=function(R){return R=q(this,R),V(R)?-1:P(R)?0:1};function k(R){const T=R.g.length,_=[];for(let b=0;b<T;b++)_[b]=~R.g[b];return new o(_,~R.h).add(g)}t.abs=function(){return V(this)?k(this):this},t.add=function(R){const T=Math.max(this.g.length,R.g.length),_=[];let b=0;for(let A=0;A<=T;A++){let w=b+(this.i(A)&65535)+(R.i(A)&65535),y=(w>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);b=y>>>16,w&=65535,y&=65535,_[A]=y<<16|w}return new o(_,_[_.length-1]&-2147483648?-1:0)};function q(R,T){return R.add(k(T))}t.j=function(R){if(P(this)||P(R))return p;if(V(this))return V(R)?k(this).j(k(R)):k(k(this).j(R));if(V(R))return k(this.j(k(R)));if(this.l(v)<0&&R.l(v)<0)return u(this.m()*R.m());const T=this.g.length+R.g.length,_=[];for(var b=0;b<2*T;b++)_[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<R.g.length;A++){const w=this.i(b)>>>16,y=this.i(b)&65535,Te=R.i(A)>>>16,Be=R.i(A)&65535;_[2*b+2*A]+=y*Be,B(_,2*b+2*A),_[2*b+2*A+1]+=w*Be,B(_,2*b+2*A+1),_[2*b+2*A+1]+=y*Te,B(_,2*b+2*A+1),_[2*b+2*A+2]+=w*Te,B(_,2*b+2*A+2)}for(R=0;R<T;R++)_[R]=_[2*R+1]<<16|_[2*R];for(R=T;R<2*T;R++)_[R]=0;return new o(_,0)};function B(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function H(R,T){this.g=R,this.h=T}function z(R,T){if(P(T))throw Error("division by zero");if(P(R))return new H(p,p);if(V(R))return T=z(k(R),T),new H(k(T.g),k(T.h));if(V(T))return T=z(R,k(T)),new H(k(T.g),T.h);if(R.g.length>30){if(V(R)||V(T))throw Error("slowDivide_ only works with positive integers.");for(var _=g,b=T;b.l(R)<=0;)_=ie(_),b=ie(b);var A=ce(_,1),w=ce(b,1);for(b=ce(b,2),_=ce(_,2);!P(b);){var y=w.add(b);y.l(R)<=0&&(A=A.add(_),w=y),b=ce(b,1),_=ce(_,1)}return T=q(R,A.j(T)),new H(A,T)}for(A=p;R.l(T)>=0;){for(_=Math.max(1,Math.floor(R.m()/T.m())),b=Math.ceil(Math.log(_)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),w=u(_),y=w.j(T);V(y)||y.l(R)>0;)_-=b,w=u(_),y=w.j(T);P(w)&&(w=g),A=A.add(w),R=q(R,y)}return new H(A,R)}t.B=function(R){return z(this,R).h},t.and=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)&R.i(b);return new o(_,this.h&R.h)},t.or=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)|R.i(b);return new o(_,this.h|R.h)},t.xor=function(R){const T=Math.max(this.g.length,R.g.length),_=[];for(let b=0;b<T;b++)_[b]=this.i(b)^R.i(b);return new o(_,this.h^R.h)};function ie(R){const T=R.g.length+1,_=[];for(let b=0;b<T;b++)_[b]=R.i(b)<<1|R.i(b-1)>>>31;return new o(_,R.h)}function ce(R,T){const _=T>>5;T%=32;const b=R.g.length-_,A=[];for(let w=0;w<b;w++)A[w]=T>0?R.i(w+_)>>>T|R.i(w+_+1)<<32-T:R.i(w+_);return new o(A,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Kg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,ir=o}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qg,ri,Jg,bo,ol,Xg,Yg,Zg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof po=="object"&&po];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in d))break e;d=d[C]}a=a[a.length-1],m=d[a],h=h(m),h!=m&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&d.push([m,h[m]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,C,N){for(var G=Array(arguments.length-2),de=2;de<arguments.length;de++)G[de-2]=arguments[de];return h.prototype[C].apply(m,G)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function v(a){const h=a.length;if(h>0){const d=Array(h);for(let m=0;m<h;m++)d[m]=a[m];return d}return[]}function P(a,h){for(let m=1;m<arguments.length;m++){const C=arguments[m];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const N=C.length||0;a.length=d+N;for(let G=0;G<N;G++)a[d+G]=C[G]}else a.push(C)}}class V{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(a){o.setTimeout(()=>{throw a},0)}function q(){var a=R;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class B{constructor(){this.h=this.g=null}add(h,d){const m=H.get();m.set(h,d),this.h?this.h.next=m:this.g=m,this.h=m}}var H=new V(()=>new z,a=>a.reset());class z{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ce=!1,R=new B,T=()=>{const a=Promise.resolve(void 0);ie=()=>{a.then(_)}};function _(){for(var a;a=q();){try{a.h.call(a.g)}catch(d){k(d)}var h=H;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}ce=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function y(a){return/^[\s\xa0]*$/.test(a)}function Te(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Te,A),Te.prototype.init=function(a,h){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),Me=0;function Ae(a,h,d,m,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!m,this.ha=C,this.key=++Me,this.da=this.fa=!1}function Ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function It(a,h,d){for(const m in a)h.call(d,a[m],m,a)}function Zt(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function Rt(a){const h={};for(const d in a)h[d]=a[d];return h}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _n(a,h){let d,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(d in m)a[d]=m[d];for(let N=0;N<tt.length;N++)d=tt[N],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function Bt(a){this.src=a,this.g={},this.h=0}Bt.prototype.add=function(a,h,d,m,C){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const G=ot(a,h,m,C);return G>-1?(h=a[G],d||(h.fa=!1)):(h=new Ae(h,this.src,N,!!m,C),h.fa=d,a.push(h)),h};function jt(a,h){const d=h.type;if(d in a.g){var m=a.g[d],C=Array.prototype.indexOf.call(m,h,void 0),N;(N=C>=0)&&Array.prototype.splice.call(m,C,1),N&&(Ee(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ot(a,h,d,m){for(let C=0;C<a.length;++C){const N=a[C];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==m)return C}return-1}var x="closure_lm_"+(Math.random()*1e6|0),X={};function K(a,h,d,m,C){if(Array.isArray(h)){for(let N=0;N<h.length;N++)K(a,h[N],d,m,C);return null}return d=W(d),a&&a[Be]?a.J(h,d,c(m)?!!m.capture:!1,C):Z(a,h,d,!1,m,C)}function Z(a,h,d,m,C,N){if(!h)throw Error("Invalid event type");const G=c(C)?!!C.capture:!!C;let de=F(a);if(de||(a[x]=de=new Bt(a)),d=de.add(h,d,m,G,N),d.proxy)return d;if(m=ge(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)w||(C=G),C===void 0&&(C=!1),a.addEventListener(h.toString(),m,C);else if(a.attachEvent)a.attachEvent(S(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ge(){function a(d){return h.call(a.src,a.listener,d)}const h=D;return a}function E(a,h,d,m,C){if(Array.isArray(h))for(var N=0;N<h.length;N++)E(a,h[N],d,m,C);else m=c(m)?!!m.capture:!!m,d=W(d),a&&a[Be]?(a=a.i,N=String(h).toString(),N in a.g&&(h=a.g[N],d=ot(h,d,m,C),d>-1&&(Ee(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[N],a.h--)))):a&&(a=F(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ot(h,d,m,C)),(d=a>-1?h[a]:null)&&I(d))}function I(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Be])jt(h.i,a);else{var d=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(d,m,a.capture):h.detachEvent?h.detachEvent(S(d),m):h.addListener&&h.removeListener&&h.removeListener(m),(d=F(h))?(jt(d,a),d.h==0&&(d.src=null,h[x]=null)):Ee(a)}}}function S(a){return a in X?X[a]:X[a]="on"+a}function D(a,h){if(a.da)a=!0;else{h=new Te(h,this);const d=a.listener,m=a.ha||a.src;a.fa&&I(a),a=d.call(m,h)}return a}function F(a){return a=a[x],a instanceof Bt?a:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(a){return typeof a=="function"?a:(a[O]||(a[O]=function(h){return a.handleEvent(h)}),a[O])}function $(){b.call(this),this.i=new Bt(this),this.M=this,this.G=null}p($,b),$.prototype[Be]=!0,$.prototype.removeEventListener=function(a,h,d,m){E(this,a,h,d,m)};function j(a,h){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var C=h;h=new A(m,a),_n(h,C)}C=!0;let N,G;if(d)for(G=d.length-1;G>=0;G--)N=h.g=d[G],C=U(N,m,!0,h)&&C;if(N=h.g=a,C=U(N,m,!0,h)&&C,C=U(N,m,!1,h)&&C,d)for(G=0;G<d.length;G++)N=h.g=d[G],C=U(N,m,!1,h)&&C}$.prototype.N=function(){if($.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let m=0;m<d.length;m++)Ee(d[m]);delete a.g[h],a.h--}}this.G=null},$.prototype.J=function(a,h,d,m){return this.i.add(String(a),h,!1,d,m)},$.prototype.K=function(a,h,d,m){return this.i.add(String(a),h,!0,d,m)};function U(a,h,d,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let C=!0;for(let N=0;N<h.length;++N){const G=h[N];if(G&&!G.da&&G.capture==d){const de=G.listener,We=G.ha||G.src;G.fa&&jt(a.i,G),C=de.call(We,m)!==!1&&C}}return C&&!m.defaultPrevented}function ne(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Q(a){a.g=ne(()=>{a.g=null,a.i&&(a.i=!1,Q(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ee extends b{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(a){b.call(this),this.h=a,this.g={}}p(re,b);var pe=[];function Ce(a){It(a.g,function(h,d){this.g.hasOwnProperty(d)&&I(h)},a),a.g={}}re.prototype.N=function(){re.Z.N.call(this),Ce(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=o.JSON.stringify,at=o.JSON.parse,ct=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function bt(){}function St(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kr(){A.call(this,"d")}p(Kr,A);function nt(){A.call(this,"c")}p(nt,A);var Xe={},Ls=null;function gr(){return Ls=Ls||new $}Xe.Ia="serverreachability";function Fu(a){A.call(this,Xe.Ia,a)}p(Fu,A);function Fs(a){const h=gr();j(h,new Fu(h))}Xe.STAT_EVENT="statevent";function Uu(a,h){A.call(this,Xe.STAT_EVENT,a),this.stat=h}p(Uu,A);function mt(a){const h=gr();j(h,new Uu(h,a))}Xe.Ja="timingevent";function Bu(a,h){A.call(this,Xe.Ja,a),this.size=h}p(Bu,A);function Us(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function oy(a,h,d,m,C,N){a.info(function(){if(a.g)if(N){var G="",de=N.split("&");for(let Ne=0;Ne<de.length;Ne++){var We=de[Ne].split("=");if(We.length>1){const Ye=We[0];We=We[1];const tn=Ye.split("_");G=tn.length>=2&&tn[1]=="type"?G+(Ye+"="+We+"&"):G+(Ye+"=redacted&")}}}else G=null;else G=N;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+d+`
`+G})}function ay(a,h,d,m,C,N,G){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+d+`
`+N+" "+G})}function Qr(a,h,d,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ly(a,d)+(m?" "+m:"")})}function cy(a,h){a.info(function(){return"TIMEOUT: "+h})}Bs.prototype.info=function(){};function ly(a,h){if(!a.g)return h;if(!h)return null;try{const N=JSON.parse(h);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var C=m[0];if(C!="noop"&&C!="stop"&&C!="close")for(let G=1;G<m.length;G++)m[G]=""}}}}return Ie(N)}catch{return h}}var Zi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ju={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qu;function Ja(){}p(Ja,bt),Ja.prototype.g=function(){return new XMLHttpRequest},qu=new Ja;function js(a){return encodeURIComponent(String(a))}function uy(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Fn(a,h,d,m){this.j=a,this.i=h,this.l=d,this.S=m||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $u}function $u(){this.i=null,this.g="",this.h=!1}var Hu={},Xa={};function Ya(a,h,d){a.M=1,a.A=to(en(h)),a.u=d,a.R=!0,Gu(a,null)}function Gu(a,h){a.F=Date.now(),eo(a),a.B=en(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),sh(d.i,"t",m),a.C=0,d=a.j.L,a.h=new $u,a.g=Ih(a.j,d?h:null,!a.u),a.P>0&&(a.O=new ee(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,m=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(pe[0]=C.toString()),C=pe);for(let N=0;N<C.length;N++){const G=K(d,C[N],m||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.J?Rt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Fs(),oy(a.i,a.v,a.B,a.l,a.S,a.u)}Fn.prototype.ba=function(a){a=a.target;const h=this.O;h&&jn(a)==3?h.j():this.Y(a)},Fn.prototype.Y=function(a){try{if(a==this.g)e:{const de=jn(this.g),We=this.g.ya(),Ne=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||hh(this.g)))){this.K||de!=4||We==7||(We==8||Ne<=0?Fs(3):Fs(2)),Za(this);var h=this.g.ca();this.X=h;var d=hy(this);if(this.o=h==200,ay(this.i,this.v,this.B,this.l,this.S,de,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(m)){var N=m;break t}}N=null}if(a=N)Qr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ec(this,a);else{this.o=!1,this.m=3,mt(12),mr(this),qs(this);break e}}if(this.R){a=!0;let Ye;for(;!this.K&&this.C<d.length;)if(Ye=fy(this,d),Ye==Xa){de==4&&(this.m=4,mt(14),a=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==Hu){this.m=4,mt(15),Qr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Qr(this.i,this.l,Ye,null),ec(this,Ye);if(zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||d.length!=0||this.h.h||(this.m=1,mt(16),a=!1),this.o=this.o&&a,!a)Qr(this.i,this.l,d,"[Invalid Chunked Response]"),mr(this),qs(this);else if(d.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),cc(G),G.P=!0,mt(11))}}else Qr(this.i,this.l,d,null),ec(this,d);de==4&&mr(this),this.o&&!this.K&&(de==4?yh(this.j,this):(this.o=!1,eo(this)))}else by(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),mr(this),qs(this)}}}catch{}};function hy(a){if(!zu(a))return a.g.la();const h=hh(a.g);if(h==="")return"";let d="";const m=h.length,C=jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return mr(a),qs(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<m;N++)a.h.h=!0,d+=a.h.i.decode(h[N],{stream:!(C&&N==m-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function zu(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function fy(a,h){var d=a.C,m=h.indexOf(`
`,d);return m==-1?Xa:(d=Number(h.substring(d,m)),isNaN(d)?Hu:(m+=1,m+d>h.length?Xa:(h=h.slice(m,m+d),a.C=m+d,h)))}Fn.prototype.cancel=function(){this.K=!0,mr(this)};function eo(a){a.T=Date.now()+a.H,Wu(a,a.H)}function Wu(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Us(u(a.aa,a),h)}function Za(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Fn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(cy(this.i,this.B),this.M!=2&&(Fs(),mt(17)),mr(this),this.m=2,qs(this)):Wu(this,this.T-a)};function qs(a){a.j.I==0||a.K||yh(a.j,a)}function mr(a){Za(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ce(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function ec(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||tc(d.h,a))){if(!a.L&&tc(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)oo(d),so(d);else break e;ac(d),mt(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Us(u(d.Va,d),6e3));Ju(d.h)<=1&&d.ta&&(d.ta=void 0)}else yr(d,11)}else if((a.L||d.g==a)&&oo(d),!y(h))for(C=d.Ba.g.parse(h),h=0;h<C.length;h++){let Ne=C[h];const Ye=Ne[0];if(!(Ye<=d.K))if(d.K=Ye,Ne=Ne[1],d.I==2)if(Ne[0]=="c"){d.M=Ne[1],d.ba=Ne[2];const tn=Ne[3];tn!=null&&(d.ka=tn,d.j.info("VER="+d.ka));const Er=Ne[4];Er!=null&&(d.za=Er,d.j.info("SVER="+d.za));const qn=Ne[5];qn!=null&&typeof qn=="number"&&qn>0&&(m=1.5*qn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const $n=a.g;if($n){const co=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var N=m.h;N.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(nc(N,N.h),N.h=null))}if(m.G){const lc=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(m.wa=lc,ke(m.J,m.G,lc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var G=a;if(m.na=Th(m,m.L?m.ba:null,m.W),G.L){Xu(m.h,G);var de=G,We=m.O;We&&(de.H=We),de.D&&(Za(de),eo(de)),m.g=G}else mh(m);d.i.length>0&&io(d)}else Ne[0]!="stop"&&Ne[0]!="close"||yr(d,7);else d.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?yr(d,7):oc(d):Ne[0]!="noop"&&d.l&&d.l.qa(Ne),d.A=0)}}Fs(4)}catch{}}var dy=class{constructor(a,h){this.g=a,this.map=h}};function Ku(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ju(a){return a.h?1:a.g?a.g.size:0}function tc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function nc(a,h){a.g?a.g.add(h):a.h=h}function Xu(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ku.prototype.cancel=function(){if(this.i=Yu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Yu(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return v(a.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function py(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let C,N=null;m>=0?(C=a[d].substring(0,m),N=a[d].substring(m+1)):C=a[d],h(C,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Un(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Un?(this.l=a.l,$s(this,a.j),this.o=a.o,this.g=a.g,Hs(this,a.u),this.h=a.h,rc(this,ih(a.i)),this.m=a.m):a&&(h=String(a).match(Zu))?(this.l=!1,$s(this,h[1]||"",!0),this.o=Gs(h[2]||""),this.g=Gs(h[3]||"",!0),Hs(this,h[4]),this.h=Gs(h[5]||"",!0),rc(this,h[6]||"",!0),this.m=Gs(h[7]||"")):(this.l=!1,this.i=new Ws(null,this.l))}Un.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(zs(h,eh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(zs(h,eh,!0),"@"),a.push(js(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(zs(d,d.charAt(0)=="/"?_y:my,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",zs(d,Ey)),a.join("")},Un.prototype.resolve=function(a){const h=en(this);let d=!!a.j;d?$s(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var m=a.h;if(d)Hs(h,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var C=h.h.lastIndexOf("/");C!=-1&&(m=h.h.slice(0,C+1)+m)}if(C=m,C==".."||C==".")m="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){m=C.lastIndexOf("/",0)==0,C=C.split("/");const N=[];for(let G=0;G<C.length;){const de=C[G++];de=="."?m&&G==C.length&&N.push(""):de==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),m&&G==C.length&&N.push("")):(N.push(de),m=!0)}m=N.join("/")}else m=C}return d?h.h=m:d=a.i.toString()!=="",d?rc(h,ih(a.i)):d=!!a.m,d&&(h.m=a.m),h};function en(a){return new Un(a)}function $s(a,h,d){a.j=d?Gs(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Hs(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function rc(a,h,d){h instanceof Ws?(a.i=h,vy(a.i,a.l)):(d||(h=zs(h,yy)),a.i=new Ws(h,a.l))}function ke(a,h,d){a.i.set(h,d)}function to(a){return ke(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Gs(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function zs(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,gy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function gy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var eh=/[#\/\?@]/g,my=/[#\?:]/g,_y=/[#\?]/g,yy=/[#\?@]/g,Ey=/#/g;function Ws(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&py(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=Ws.prototype,t.add=function(a,h){_r(this),this.i=null,a=Jr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function th(a,h){_r(a),h=Jr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function nh(a,h){return _r(a),h=Jr(a,h),a.g.has(h)}t.forEach=function(a,h){_r(this),this.g.forEach(function(d,m){d.forEach(function(C){a.call(h,C,m,this)},this)},this)};function rh(a,h){_r(a);let d=[];if(typeof h=="string")nh(a,h)&&(d=d.concat(a.g.get(Jr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return _r(this),this.i=null,a=Jr(this,a),nh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=rh(this,a),a.length>0?String(a[0]):h):h};function sh(a,h,d){th(a,h),d.length>0&&(a.i=null,a.g.set(Jr(a,h),v(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var d=h[m];const C=js(d);d=rh(this,d);for(let N=0;N<d.length;N++){let G=C;d[N]!==""&&(G+="="+js(d[N])),a.push(G)}}return this.i=a.join("&")};function ih(a){const h=new Ws;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Jr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function vy(a,h){h&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(d,m){const C=m.toLowerCase();m!=C&&(th(this,m),sh(this,C,d))},a)),a.j=h}function Ty(a,h){const d=new Bs;if(o.Image){const m=new Image;m.onload=f(Bn,d,"TestLoadImage: loaded",!0,h,m),m.onerror=f(Bn,d,"TestLoadImage: error",!1,h,m),m.onabort=f(Bn,d,"TestLoadImage: abort",!1,h,m),m.ontimeout=f(Bn,d,"TestLoadImage: timeout",!1,h,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function Iy(a,h){const d=new Bs,m=new AbortController,C=setTimeout(()=>{m.abort(),Bn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(N=>{clearTimeout(C),N.ok?Bn(d,"TestPingServer: ok",!0,h):Bn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Bn(d,"TestPingServer: error",!1,h)})}function Bn(a,h,d,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(d)}catch{}}function wy(){this.g=new ct}function sc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(sc,bt),sc.prototype.g=function(){return new no(this.i,this.h)};function no(a,h){$.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(no,$),t=no.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Qs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;oh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function oh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ks(this):Qs(this),this.readyState==3&&oh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ks(this))},t.Na=function(a){this.g&&(this.response=a,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Qs(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function Qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ah(a){let h="";return It(a,function(d,m){h+=m,h+=":",h+=d,h+=`\r
`}),h}function ic(a,h,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=ah(d),typeof a=="string"?d!=null&&js(d):ke(a,h,d))}function Fe(a){$.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Fe,$);var Ay=/^https?$/i,Ry=["POST","PUT"];t=Fe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qu.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){ch(this,N);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)d.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const N of m.keys())d.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Ry,h,void 0)>=0)||m||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,G]of d)this.g.setRequestHeader(N,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){ch(this,N)}};function ch(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,lh(a),ro(a)}function lh(a){a.A||(a.A=!0,j(a,"complete"),j(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,j(this,"complete"),j(this,"abort"),ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ro(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?uh(this):this.Xa())},t.Xa=function(){uh(this)};function uh(a){if(a.h&&typeof i<"u"){if(a.v&&jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(j(a,"readystatechange"),jn(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var m;if(m=N===0){let G=String(a.D).match(Zu)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),m=!Ay.test(G?G.toLowerCase():"")}d=m}if(d)j(a,"complete"),j(a,"success");else{a.o=6;try{var C=jn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",lh(a)}}finally{ro(a)}}}}function ro(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||j(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),at(h)}};function hh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function by(a){const h={};a=(a.g&&jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(y(a[m]))continue;var d=uy(a[m]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[C]||[];h[C]=N,N.push(d)}Zt(h,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function fh(a){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Js("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Js("baseRetryDelayMs",5e3,a),this.Za=Js("retryDelaySeedMs",1e4,a),this.Ta=Js("forwardChannelMaxRetries",2,a),this.va=Js("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ku(a&&a.concurrentRequestLimit),this.Ba=new wy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=fh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,m){mt(0),this.W=a,this.H=h||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=Th(this,null,this.W),io(this)};function oc(a){if(dh(a),a.I==3){var h=a.V++,d=en(a.J);if(ke(d,"SID",a.M),ke(d,"RID",h),ke(d,"TYPE","terminate"),Xs(a,d),h=new Fn(a,a.j,h),h.M=2,h.A=to(en(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=Ih(h.j,null),h.g.ea(h.A)),h.F=Date.now(),eo(h)}vh(a)}function so(a){a.g&&(cc(a),a.g.cancel(),a.g=null)}function dh(a){so(a),a.v&&(o.clearTimeout(a.v),a.v=null),oo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function io(a){if(!Qu(a.h)&&!a.m){a.m=!0;var h=a.Ea;ie||T(),ce||(ie(),ce=!0),R.add(h,a),a.D=0}}function Sy(a,h){return Ju(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Us(u(a.Ea,a,h),Eh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Fn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=Rt(N),_n(N,this.U)):N=this.U),this.u!==null||this.R||(C.J=N,N=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=gh(this,C,h),d=en(this.J),ke(d,"RID",a),ke(d,"CVER",22),this.G&&ke(d,"X-HTTP-Session-Id",this.G),Xs(this,d),N&&(this.R?h="headers="+js(ah(N))+"&"+h:this.u&&ic(d,this.u,N)),nc(this.h,C),this.Ra&&ke(d,"TYPE","init"),this.S?(ke(d,"$req",h),ke(d,"SID","null"),C.U=!0,Ya(C,d,null)):Ya(C,d,h),this.I=2}}else this.I==3&&(a?ph(this,a):this.i.length==0||Qu(this.h)||ph(this))};function ph(a,h){var d;h?d=h.l:d=a.V++;const m=en(a.J);ke(m,"SID",a.M),ke(m,"RID",d),ke(m,"AID",a.K),Xs(a,m),a.u&&a.o&&ic(m,a.u,a.o),d=new Fn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=gh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),nc(a.h,d),Ya(d,m,h)}function Xs(a,h){a.H&&It(a.H,function(d,m){ke(h,m,d)}),a.l&&It({},function(d,m){ke(h,m,d)})}function gh(a,h,d){d=Math.min(a.i.length,d);const m=a.l?u(a.l.Ka,a.l,a):null;e:{var C=a.i;let de=-1;for(;;){const We=["count="+d];de==-1?d>0?(de=C[0].g,We.push("ofs="+de)):de=0:We.push("ofs="+de);let Ne=!0;for(let Ye=0;Ye<d;Ye++){var N=C[Ye].g;const tn=C[Ye].map;if(N-=de,N<0)de=Math.max(0,C[Ye].g-100),Ne=!1;else try{N="req"+N+"_"||"";try{var G=tn instanceof Map?tn:Object.entries(tn);for(const[Er,qn]of G){let $n=qn;c(qn)&&($n=Ie(qn)),We.push(N+Er+"="+encodeURIComponent($n))}}catch(Er){throw We.push(N+"type="+encodeURIComponent("_badmap")),Er}}catch{m&&m(tn)}}if(Ne){G=We.join("&");break e}}G=void 0}return a=a.i.splice(0,d),h.G=a,G}function mh(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;ie||T(),ce||(ie(),ce=!0),R.add(h,a),a.A=0}}function ac(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Us(u(a.Da,a),Eh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,_h(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Us(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),so(this),_h(this))};function cc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function _h(a){a.g=new Fn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=en(a.na);ke(h,"RID","rpc"),ke(h,"SID",a.M),ke(h,"AID",a.K),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&ke(h,"TO",a.ia),ke(h,"TYPE","xmlhttp"),Xs(a,h),a.u&&a.o&&ic(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=to(en(h)),d.u=null,d.R=!0,Gu(d,a)}t.Va=function(){this.C!=null&&(this.C=null,so(this),ac(this),mt(19))};function oo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function yh(a,h){var d=null;if(a.g==h){oo(a),cc(a),a.g=null;var m=2}else if(tc(a.h,h))d=h.G,Xu(a.h,h),m=1;else return;if(a.I!=0){if(h.o)if(m==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var C=a.D;m=gr(),j(m,new Bu(m,d)),io(a)}else mh(a);else if(C=h.m,C==3||C==0&&h.X>0||!(m==1&&Sy(a,h)||m==2&&ac(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),C){case 1:yr(a,5);break;case 4:yr(a,10);break;case 3:yr(a,6);break;default:yr(a,2)}}}function Eh(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function yr(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),m=a.Ua;const C=!m;m=new Un(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$s(m,"https"),to(m),C?Ty(m.toString(),d):Iy(m.toString(),d)}else mt(2);a.I=0,a.l&&a.l.pa(h),vh(a),dh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function vh(a){if(a.I=0,a.ja=[],a.l){const h=Yu(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,v(a.i),a.i.length=0),a.l.oa()}}function Th(a,h,d){var m=d instanceof Un?en(d):new Un(d);if(m.g!="")h&&(m.g=h+"."+m.g),Hs(m,m.u);else{var C=o.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;const N=new Un(null);m&&$s(N,m),h&&(N.g=h),C&&Hs(N,C),d&&(N.h=d),m=N}return d=a.G,h=a.wa,d&&h&&ke(m,d,h),ke(m,"VER",a.ka),Xs(a,m),m}function Ih(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Fe(new sc({ab:d})):new Fe(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}t=wh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ao(){}ao.prototype.g=function(a,h){return new Ct(a,h)};function Ct(a,h){$.call(this),this.g=new fh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!y(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Xr(this)}p(Ct,$),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){oc(this.g)},Ct.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ie(a),a=d);h.i.push(new dy(h.Ya++,a)),h.I==3&&io(h)},Ct.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Ct.Z.N.call(this)};function Ah(a){Kr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Ah,Kr);function Rh(){nt.call(this),this.status=1}p(Rh,nt);function Xr(a){this.g=a}p(Xr,wh),Xr.prototype.ra=function(){j(this.g,"a")},Xr.prototype.qa=function(a){j(this.g,new Ah(a))},Xr.prototype.pa=function(a){j(this.g,new Rh)},Xr.prototype.oa=function(){j(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,Zg=function(){return new ao},Yg=function(){return gr()},Xg=Xe,ol={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,bo=Zi,ju.COMPLETE="complete",Jg=ju,St.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",$.prototype.listen=$.prototype.J,ri=St,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,Qg=Fe}).apply(typeof po<"u"?po:typeof self<"u"?self:typeof window<"u"?window:{});const jf="@firebase/firestore",qf="4.9.3";class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");let Ns="12.7.0";const Ur=new zl("@firebase/firestore");function ts(){return Ur.logLevel}function Y(t,...e){if(Ur.logLevel<=me.DEBUG){const n=e.map(Ql);Ur.debug(`Firestore (${Ns}): ${t}`,...n)}}function On(t,...e){if(Ur.logLevel<=me.ERROR){const n=e.map(Ql);Ur.error(`Firestore (${Ns}): ${t}`,...n)}}function Ts(t,...e){if(Ur.logLevel<=me.WARN){const n=e.map(Ql);Ur.warn(`Firestore (${Ns}): ${t}`,...n)}}function Ql(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,em(t,r,n)}function em(t,e,n){let r=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw On(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||em(e,s,r)}function he(t,e){return t}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class tm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ut.UNAUTHENTICATED)))}shutdown(){}}class Yw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Zw{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new tm(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class eA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $f{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $f(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $f(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Jl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function al(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Vc(s)===Vc(i)?_e(s,i):Vc(s)?1:-1}return _e(t.length,e.length)}const sA=55296,iA=57343;function Vc(t){const e=t.charCodeAt(0);return e>=sA&&e<=iA}function Is(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Hf="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),s=sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?sn.extractNumericId(e).compare(sn.extractNumericId(n)):al(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class Oe extends sn{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Oe(n)}static emptyPath(){return new Oe([])}}const oA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends sn{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return oA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hf}static keyField(){return new st([Hf])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new J(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new J(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}class te{constructor(e){this.path=e}static fromPath(e){return new te(Oe.fromString(e))}static fromName(e){return new te(Oe.fromString(e).popFirst(5))}static empty(){return new te(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Oe(e.slice()))}}function nm(t,e,n){if(!n)throw new J(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aA(t,e,n,r){if(e===!0&&r===!0)throw new J(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gf(t){if(!te.isDocumentKey(t))throw new J(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zf(t){if(te.isDocumentKey(t))throw new J(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rm(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Da(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function hs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Da(t);throw new J(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Gi(t,e){if(!rm(t))throw new J(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(M.INVALID_ARGUMENT,n);return!0}const Wf=-62135596800,Kf=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kf);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wf)throw new J(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kf}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gi(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:ze("string",xe._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new xe(0,0))}static max(){return new le(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vi=-1;function cA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new lr(s,te.empty(),e)}function lA(t){return new lr(t.readTime,t.key,Vi)}class lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lr(le.min(),te.empty(),Vi)}static max(){return new lr(le.max(),te.empty(),Vi)}}function uA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}const hA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vs(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==hA)throw t;Y("LocalStore","Unexpectedly lost primary lease")}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):L.reject(n)}static resolve(e){return new L(((n,r)=>{n(e)}))}static reject(e){return new L(((n,r)=>{r(e)}))}static waitFor(e){return new L(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next((s=>s?L.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new L(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new L(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function dA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ds(t){return t.name==="IndexedDbTransactionError"}class Oa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oa.ce=-1;const Xl=-1;function ka(t){return t==null}function Qo(t){return t===0&&1/t==-1/0}function pA(t){return typeof t=="number"&&Number.isInteger(t)&&!Qo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const sm="";function gA(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qf(e)),e=mA(t.get(n),e);return Qf(e)}function mA(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case sm:n+="";break;default:n+=i}}return n}function Qf(t){return t+sm+""}function Jf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function im(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Le{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new go(this.root,e,this.comparator,!1)}getReverseIterator(){return new go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new go(this.root,e,this.comparator,!0)}}class go{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Je{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xf(this.data.getIterator())}getIteratorFrom(e){return new Xf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class Xf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ht{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Je(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class om extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new om("Invalid base64 string: "+i):i}})(e);return new it(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const _A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=_A.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}const am="server_timestamp",cm="__type__",lm="__previous_value__",um="__local_write_time__";function Yl(t){return(t?.mapValue?.fields||{})[cm]?.stringValue===am}function xa(t){const e=t.mapValue.fields[lm];return Yl(e)?xa(e):e}function Di(t){const e=ur(t.mapValue.fields[um].timestampValue);return new xe(e.seconds,e.nanos)}class yA{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Jo="(default)";class Oi{constructor(e,n){this.projectId=e,this.database=n||Jo}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database===Jo}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}const hm="__type__",EA="__max__",mo={mapValue:{}},fm="__vector__",Xo="value";function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yl(t)?4:TA(t)?9007199254740991:vA(t)?10:11:oe(28295,{value:t})}function gn(t,e){if(t===e)return!0;const n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Di(t).isEqual(Di(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ur(s.timestampValue),c=ur(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return hr(s.bytesValue).isEqual(hr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),c=je(i.doubleValue);return o===c?Qo(o)===Qo(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Jf(o)!==Jf(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!gn(o[l],c[l])))return!1;return!0})(t,e);default:return oe(52216,{left:t})}}function ki(t,e){return(t.values||[]).find((n=>gn(n,e)))!==void 0}function ws(t,e){if(t===e)return 0;const n=fr(t),r=fr(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=je(i.integerValue||i.doubleValue),l=je(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Yf(t.timestampValue,e.timestampValue);case 4:return Yf(Di(t),Di(e));case 5:return al(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=hr(i),l=hr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=_e(c[u],l[u]);if(f!==0)return f}return _e(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=_e(je(i.latitude),je(o.latitude));return c!==0?c:_e(je(i.longitude),je(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Zf(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[Xo]?.arrayValue,f=l[Xo]?.arrayValue,p=_e(u?.values?.length||0,f?.values?.length||0);return p!==0?p:Zf(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===mo.mapValue&&o===mo.mapValue)return 0;if(i===mo.mapValue)return 1;if(o===mo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const g=al(l[p],f[p]);if(g!==0)return g;const v=ws(c[l[p]],u[f[p]]);if(v!==0)return v}return _e(l.length,f.length)})(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function Yf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=ur(t),r=ur(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Zf(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ws(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function As(t){return cl(t)}function cl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ur(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return hr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cl(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cl(n.fields[o])}`;return s+"}"})(t.mapValue):oe(61005,{value:t})}function So(t){switch(fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xa(t);return e?16+So(e):16;case 5:return 2*t.stringValue.length;case 6:return hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+So(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return $r(r.fields,((i,o)=>{s+=i.length+So(o)})),s})(t.mapValue);default:throw oe(13486,{value:t})}}function ed(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ll(t){return!!t&&"integerValue"in t}function Zl(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function nd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Co(t){return!!t&&"mapValue"in t}function vA(t){return(t?.mapValue?.fields||{})[hm]?.stringValue===fm}function mi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $r(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=mi(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mi(t.arrayValue.values[n]);return e}return{...t}}function TA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===EA}class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Co(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mi(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=mi(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Co(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Co(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){$r(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Mt(mi(this.value))}}function dm(t){const e=[];return $r(t.fields,((n,r)=>{const s=new st([n]);if(Co(r)){const i=dm(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Ht(e)}class ft{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ft(e,0,le.min(),le.min(),le.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,le.min(),le.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,le.min(),le.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yo{constructor(e,n){this.position=e,this.inclusive=n}}function rd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=ws(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}class xi{constructor(e,n="asc"){this.field=e,this.dir=n}}function IA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class pm{}class Ge extends pm{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AA(e,n,r):n==="array-contains"?new SA(e,r):n==="in"?new CA(e,r):n==="not-in"?new PA(e,r):n==="array-contains-any"?new NA(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RA(e,r):new bA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ws(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends pm{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yt(e,n)}matches(e){return gm(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gm(t){return t.op==="and"}function mm(t){return wA(t)&&gm(t)}function wA(t){for(const e of t.filters)if(e instanceof Yt)return!1;return!0}function ul(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+As(t.value);if(mm(t))return t.filters.map((e=>ul(e))).join(",");{const e=t.filters.map((n=>ul(n))).join(",");return`${t.op}(${e})`}}function _m(t,e){return t instanceof Ge?(function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&gn(r.value,s.value)})(t,e):t instanceof Yt?(function(r,s){return s instanceof Yt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&_m(o,s.filters[c])),!0):!1})(t,e):void oe(19439)}function ym(t){return t instanceof Ge?(function(n){return`${n.field.canonicalString()} ${n.op} ${As(n.value)}`})(t):t instanceof Yt?(function(n){return n.op.toString()+" {"+n.getFilters().map(ym).join(" ,")+"}"})(t):"Filter"}class AA extends Ge{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class RA extends Ge{constructor(e,n){super(e,"in",n),this.keys=Em("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bA extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Em("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Em(t,e){return(e.arrayValue?.values||[]).map((n=>te.fromName(n.referenceValue)))}class SA extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zl(n)&&ki(n.arrayValue,this.value)}}class CA extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ki(this.value.arrayValue,n)}}class PA extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ki(this.value.arrayValue,n)}}class NA extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ki(this.value.arrayValue,r)))}}class VA{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function id(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VA(t,e,n,r,s,i,o)}function eu(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ul(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ka(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>As(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>As(r))).join(",")),e.Te=n}return e.Te}function tu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_m(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function hl(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Os{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DA(t,e,n,r,s,i,o,c){return new Os(t,e,n,r,s,i,o,c)}function nu(t){return new Os(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vm(t){return t.collectionGroup!==null}function _i(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Je(st.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new xi(i,r))})),n.has(st.keyField().canonicalString())||e.Ie.push(new xi(st.keyField(),r))}return e.Ie}function cn(t){const e=he(t);return e.Ee||(e.Ee=OA(e,_i(t))),e.Ee}function OA(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new xi(s.field,i)}));const n=t.endAt?new Yo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yo(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fl(t,e){const n=t.filters.concat([e]);return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dl(t,e,n){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ma(t,e){return tu(cn(t),cn(e))&&t.limitType===e.limitType}function Tm(t){return`${eu(cn(t))}|lt:${t.limitType}`}function ns(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ym(s))).join(", ")}]`),ka(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>As(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>As(s))).join(",")),`Target(${r})`})(cn(t))}; limitType=${t.limitType})`}function La(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of _i(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=rd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,_i(r),s)||r.endAt&&!(function(o,c,l){const u=rd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,_i(r),s))})(t,e)}function kA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Im(t){return(e,n)=>{let r=!1;for(const s of _i(t)){const i=xA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xA(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?ws(l,u):oe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}class Hr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return im(this.inner)}size(){return this.innerSize}}const MA=new Le(te.comparator);function kn(){return MA}const wm=new Le(te.comparator);function si(...t){let e=wm;for(const n of t)e=e.insert(n.key,n);return e}function Am(t){let e=wm;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Nr(){return yi()}function Rm(){return yi()}function yi(){return new Hr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const LA=new Le(te.comparator),FA=new Je(te.comparator);function ye(...t){let e=FA;for(const n of t)e=e.add(n);return e}const UA=new Je(_e);function BA(){return UA}function ru(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qo(e)?"-0":e}}function bm(t){return{integerValue:""+t}}function jA(t,e){return pA(e)?bm(e):ru(t,e)}class Fa{constructor(){this._=void 0}}function qA(t,e,n){return t instanceof Zo?(function(s,i){const o={fields:{[cm]:{stringValue:am},[um]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Yl(i)&&(i=xa(i)),i&&(o.fields[lm]=i),{mapValue:o}})(n,e):t instanceof Mi?Cm(t,e):t instanceof Li?Pm(t,e):(function(s,i){const o=Sm(s,i),c=ad(o)+ad(s.Ae);return ll(o)&&ll(s.Ae)?bm(c):ru(s.serializer,c)})(t,e)}function $A(t,e,n){return t instanceof Mi?Cm(t,e):t instanceof Li?Pm(t,e):n}function Sm(t,e){return t instanceof ea?(function(r){return ll(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Zo extends Fa{}class Mi extends Fa{constructor(e){super(),this.elements=e}}function Cm(t,e){const n=Nm(e);for(const r of t.elements)n.some((s=>gn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Li extends Fa{constructor(e){super(),this.elements=e}}function Pm(t,e){let n=Nm(e);for(const r of t.elements)n=n.filter((s=>!gn(s,r)));return{arrayValue:{values:n}}}class ea extends Fa{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ad(t){return je(t.integerValue||t.doubleValue)}function Nm(t){return Zl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HA(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Mi&&s instanceof Mi||r instanceof Li&&s instanceof Li?Is(r.elements,s.elements,gn):r instanceof ea&&s instanceof ea?gn(r.Ae,s.Ae):r instanceof Zo&&s instanceof Zo})(t.transform,e.transform)}class GA{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Po(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ua{}function Vm(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new su(t.key,ln.none()):new zi(t.key,t.data,ln.none());{const n=t.data,r=Mt.empty();let s=new Je(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gr(t.key,r,new Ht(s.toArray()),ln.none())}}function zA(t,e,n){t instanceof zi?(function(s,i,o){const c=s.value.clone(),l=ld(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Gr?(function(s,i,o){if(!Po(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ld(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Dm(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ei(t,e,n,r){return t instanceof zi?(function(i,o,c,l){if(!Po(i.precondition,o))return c;const u=i.value.clone(),f=ud(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Gr?(function(i,o,c,l){if(!Po(i.precondition,o))return c;const u=ud(i.fieldTransforms,l,o),f=o.data;return f.setAll(Dm(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Po(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function WA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Sm(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function cd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Is(r,s,((i,o)=>HA(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zi extends Ua{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gr extends Ua{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dm(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ld(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,$A(o,c,n[s]))}return r}function ud(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qA(i,o,e))}return r}class su extends Ua{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KA extends Ua{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&zA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ei(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ei(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Rm();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=Vm(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ye())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,((n,r)=>cd(n,r)))&&Is(this.baseMutations,e.baseMutations,((n,r)=>cd(n,r)))}}class iu{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return LA})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new iu(e,n,r,s)}}class JA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XA{constructor(e,n){this.count=e,this.unchangedNames=n}}var $e,ve;function YA(t){switch(t){case M.OK:return oe(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function Om(t){if(t===void 0)return On("GRPC error has no .code"),M.UNKNOWN;switch(t){case $e.OK:return M.OK;case $e.CANCELLED:return M.CANCELLED;case $e.UNKNOWN:return M.UNKNOWN;case $e.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case $e.INTERNAL:return M.INTERNAL;case $e.UNAVAILABLE:return M.UNAVAILABLE;case $e.UNAUTHENTICATED:return M.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case $e.NOT_FOUND:return M.NOT_FOUND;case $e.ALREADY_EXISTS:return M.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return M.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case $e.ABORTED:return M.ABORTED;case $e.OUT_OF_RANGE:return M.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return M.UNIMPLEMENTED;case $e.DATA_LOSS:return M.DATA_LOSS;default:return oe(39323,{code:t})}}(ve=$e||($e={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";function ZA(){return new TextEncoder}const eR=new ir([4294967295,4294967295],0);function hd(t){const e=ZA().encode(t),n=new Kg;return n.update(e),new Uint8Array(n.digest())}function fd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ir([n,r],0),new ir([s,i],0)]}class ou{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ii(`Invalid padding: ${n}`);if(r<0)throw new ii(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ii(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ii(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ir.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ir.fromNumber(r)));return s.compare(eR)===1&&(s=new ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hd(e),[r,s]=fd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ou(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=hd(e),[r,s]=fd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ba{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ba(le.min(),s,new Le(_e),kn(),ye())}}class Wi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wi(r,n,ye(),ye(),ye())}}class No{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class km{constructor(e,n){this.targetId=e,this.Ce=n}}class xm{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dd{constructor(){this.ve=0,this.Fe=pd(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),n=ye(),r=ye();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}})),new Wi(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tR{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.Je=_o(),this.He=_o(),this.Ye=new Le(_e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(hl(i))if(r===0){const o=new te(i.path);this.et(n,o,ft.newNoDocument(o,le.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=hr(r).toUint8Array()}catch(l){if(l instanceof om)return Ts("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new ou(o,s,i)}catch(l){return Ts(l instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&hl(c.target)){const l=new te(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ft.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=ye();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Ba(e,n,this.Ye,this.je,r);return this.je=kn(),this.Je=_o(),this.He=_o(),this.Ye=new Le(_e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Je(_e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Je(_e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _o(){return new Le(te.comparator)}function pd(){return new Le(te.comparator)}const nR={asc:"ASCENDING",desc:"DESCENDING"},rR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sR={and:"AND",or:"OR"};class iR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pl(t,e){return t.useProto3Json||ka(e)?e:{value:e}}function ta(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mm(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oR(t,e){return ta(t,e.toTimestamp())}function un(t){return Se(!!t,49232),le.fromTimestamp((function(n){const r=ur(n);return new xe(r.seconds,r.nanos)})(t))}function au(t,e){return gl(t,e).canonicalString()}function gl(t,e){const n=(function(s){return new Oe(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Lm(t){const e=Oe.fromString(t);return Se(qm(e),10190,{key:e.toString()}),e}function ml(t,e){return au(t.databaseId,e.path)}function Dc(t,e){const n=Lm(e);if(n.get(1)!==t.databaseId.projectId)throw new J(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(Um(n))}function Fm(t,e){return au(t.databaseId,e)}function aR(t){const e=Lm(t);return e.length===4?Oe.emptyPath():Um(e)}function _l(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Um(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gd(t,e,n){return{name:ml(t,e),fields:n.value.mapValue.fields}}function cR(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:oe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Se(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?M.UNKNOWN:Om(u.code);return new J(f,u.message||"")})(o);n=new xm(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Dc(t,r.document.name),i=un(r.document.updateTime),o=r.document.createTime?un(r.document.createTime):le.min(),c=new Mt({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new No(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Dc(t,r.document),i=r.readTime?un(r.readTime):le.min(),o=ft.newNoDocument(s,i),c=r.removedTargetIds||[];n=new No([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Dc(t,r.document),i=r.removedTargetIds||[];n=new No([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new XA(s,i),c=r.targetId;n=new km(c,o)}}return n}function lR(t,e){let n;if(e instanceof zi)n={update:gd(t,e.key,e.value)};else if(e instanceof su)n={delete:ml(t,e.key)};else if(e instanceof Gr)n={update:gd(t,e.key,e.data),updateMask:yR(e.fieldMask)};else{if(!(e instanceof KA))return oe(16599,{Vt:e.type});n={verify:ml(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof Zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ea)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw oe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:oR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)})(t,e.precondition)),n}function uR(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?un(s.updateTime):un(i);return o.isEqual(le.min())&&(o=un(i)),new GA(o,s.transformResults||[])})(n,e)))):[]}function hR(t,e){return{documents:[Fm(t,e.path)]}}function fR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fm(t,s);const i=(function(u){if(u.length!==0)return jm(Yt.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:rs(g.field),direction:gR(g.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=pl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function dR(t){let e=aR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const g=Bm(p);return g instanceof Yt&&mm(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(P){return new xi(ss(P.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(g)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,ka(g)?null:g})(n.limit));let l=null;n.startAt&&(l=(function(p){const g=!!p.before,v=p.values||[];return new Yo(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const g=!p.before,v=p.values||[];return new Yo(v,g)})(n.endAt)),DA(e,s,o,i,c,"F",l,u)}function pR(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bm(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ss(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ss(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ss(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ss(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ge.create(ss(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Yt.create(n.compositeFilter.filters.map((r=>Bm(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}})(n.compositeFilter.op))})(t):oe(30097,{filter:t})}function gR(t){return nR[t]}function mR(t){return rR[t]}function _R(t){return sR[t]}function rs(t){return{fieldPath:t.canonicalString()}}function ss(t){return st.fromServerFormat(t.fieldPath)}function jm(t){return t instanceof Ge?(function(n){if(n.op==="=="){if(nd(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(td(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nd(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(td(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:mR(n.op),value:n.value}}})(t):t instanceof Yt?(function(n){const r=n.getFilters().map((s=>jm(s)));return r.length===1?r[0]:{compositeFilter:{op:_R(n.op),filters:r}}})(t):oe(54877,{filter:t})}function yR(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qm(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class er{constructor(e,n,r,s,i=le.min(),o=le.min(),c=it.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ER{constructor(e){this.yt=e}}function vR(t){const e=dR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dl(e,e.limit,"L"):e}class TR{constructor(){this.Cn=new IR}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(lr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class IR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(Oe.comparator)).toArray()}}const md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$m=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At($m,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);class Rs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rs(0)}static cr(){return new Rs(-1)}}const _d="LruGarbageCollector",wR=1048576;function yd([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class AR{constructor(e){this.Ir=e,this.buffer=new Je(yd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(_d,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ds(n)?Y(_d,"Ignoring IndexedDB error during garbage collection: ",n):await Vs(n)}await this.Vr(3e5)}))}}class bR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Oa.ce);const r=new AR(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(md)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),md):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),ts()<=me.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function SR(t,e){return new bR(t,e)}class CR{constructor(){this.changes=new Hr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class NR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Ei(r.mutation,s,Ht.empty(),xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ye()){const s=Nr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=si();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Nr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ye())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=kn();const o=yi(),c=(function(){return yi()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Gr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ei(f.mutation,u,f.mutation.getFieldMask(),xe.now())):o.set(u.key,Ht.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new PR(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=yi();let s=new Le(((o,c)=>o-c)),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Ht.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||ye()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=Rm();f.forEach((g=>{if(!i.has(g)){const v=Vm(n.get(g),r.get(g));v!==null&&p.set(g,v),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return L.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Nr());let c=Vi,l=i;return o.next((u=>L.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,ye()))).next((f=>({batchId:c,changes:Am(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next((r=>{let s=si();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=si();return this.indexManager.getCollectionParents(e,i).next((c=>L.forEach(c,(l=>{const u=(function(p,g){return new Os(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))}));let c=si();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Ei(f.mutation,u,Ht.empty(),xe.now()),La(n,u)&&(c=c.insert(l,u))})),c}))}}class VR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}})(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:vR(s.bundledQuery),readTime:un(s.readTime)}})(n)),L.resolve()}}class DR{constructor(){this.overlays=new Le(te.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nr();return L.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Nr(),i=n.length+1,o=new te(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Nr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Nr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return L.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JA(n,r));let i=this.qr.get(n);i===void 0&&(i=ye(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class OR{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}class cu{constructor(){this.Qr=new Je(Ze.$r),this.Ur=new Je(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Ze(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new te(new Oe([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Oe([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=ye();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}class kR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Je(Ze.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QA(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Ze(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Xl:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(_e);return n.forEach((s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new te(i),0);let c=new Je(_e);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),L.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,(s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Ze(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class xR{constructor(e){this.ri=e,this.docs=(function(){return new Le(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=kn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))})),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=kn();const o=n.path,c=new te(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||uA(lA(f),r)<=0||(s.has(f.key)||La(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ii(e,n){return L.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new MR(this)}getSize(e){return L.resolve(this.size)}}class MR extends CR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class LR{constructor(e){this.persistence=e,this.si=new Hr((n=>eu(n)),tu),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new cu,this.targetCount=0,this.ai=Rs.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),L.waitFor(i).next((()=>s))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}class Hm{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oa(0),this.li=!1,this.li=!0,this.hi=new OR,this.referenceDelegate=e(this),this.Pi=new LR(this),this.indexManager=new TR,this.remoteDocumentCache=(function(s){return new xR(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ER(n),this.Ii=new VR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new FR(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class FR extends fA{constructor(e){super(),this.currentSequenceNumber=e}}class lu{constructor(e){this.persistence=e,this.Ri=new cu,this.Vi=null}static mi(e){return new lu(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const s=te.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class na{constructor(e,n){this.persistence=e,this.pi=new Hr((r=>gA(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=SR(this,n)}static mi(e,n){return new na(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return L.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?L.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=So(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class uu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new uu(e,n.fromCache,r,s)}}class UR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VI()?8:dA(gt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new UR;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(ts()<=me.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ts()<=me.DEBUG&&Y("QueryEngine","Query:",ns(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ts()<=me.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):L.resolve())}ys(e,n){if(od(n))return L.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=dl(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=ye(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,dl(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return od(n)||s.isEqual(le.min())?L.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(ts()<=me.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ns(n)),this.vs(e,o,n,cA(s,Vi)).next((c=>c)))}))}Ds(e,n){let r=new Je(Im(e));return n.forEach(((s,i)=>{La(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ts()<=me.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ns(n)),this.ps.getDocumentsMatchingQuery(e,n,lr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const hu="LocalStore",jR=3e8;class qR{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Le(_e),this.xs=new Hr((i=>eu(i)),tu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function $R(t,e,n,r){return new qR(t,e,n,r)}async function Gm(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=ye();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function HR(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,g=p.keys();let v=L.resolve();return g.forEach((P=>{v=v.next((()=>f.getEntry(l,P))).next((V=>{const k=u.docVersions.get(P);Se(k!==null,48541),V.version.compareTo(k)<0&&(p.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),f.addEntry(V)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=ye();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function zm(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GR(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(it.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(p,v),(function(V,k,q){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=jR?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(g,v,f)&&c.push(n.Pi.updateTargetData(i,v))}));let l=kn(),u=ye();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(zR(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return L.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function zR(t,e,n){let r=ye(),s=ye();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=kn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Y(hu,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function WR(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Xl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function KR(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function yl(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ds(o))throw o;Y(hu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Ed(t,e,n){const r=he(t);let s=le.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=he(l),g=p.xs.get(f);return g!==void 0?L.resolve(p.Ms.get(g)):p.Pi.getTargetData(u,f)})(r,o,cn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:ye()))).next((c=>(QR(r,kA(e),c),{documents:c,Qs:i})))))}function QR(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class vd{constructor(){this.activeTargetIds=BA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JR{constructor(){this.Mo=new vd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XR{Oo(e){}shutdown(){}}const Td="ConnectivityMonitor";class Id{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(Td,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(Td,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yo=null;function El(){return yo===null?yo=(function(){return 268435456+Math.round(2147483648*Math.random())})():yo++,"0x"+yo.toString(16)}const Oc="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Jo?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=El(),c=this.zo(e,n.toUriEncodedString());Y(Oc,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=Cs(u);return this.Jo(e,c,l,r,f).then((p=>(Y(Oc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Ts(Oc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ns})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=YR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class eb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lt="WebChannelConnection";class tb extends ZR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=El();return new Promise(((c,l)=>{const u=new Qg;u.setWithCredentials(!0),u.listenOnce(Jg.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case bo.NO_ERROR:const p=u.getResponseJson();Y(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case bo.TIMEOUT:Y(lt,`RPC '${e}' ${o} timed out`),l(new J(M.DEADLINE_EXCEEDED,"Request time out"));break;case bo.HTTP_ERROR:const g=u.getStatus();if(Y(lt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v?.error;if(P&&P.status&&P.message){const V=(function(q){const B=q.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(B)>=0?B:M.UNKNOWN})(P.status);l(new J(V,P.message))}else l(new J(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(M.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Y(lt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);Y(lt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=El(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zg(),c=Yg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");Y(lt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let g=!1,v=!1;const P=new eb({Yo:k=>{v?Y(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(Y(lt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Y(lt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Zo:()=>p.close()}),V=(k,q,B)=>{k.listen(q,(H=>{try{B(H)}catch(z){setTimeout((()=>{throw z}),0)}}))};return V(p,ri.EventType.OPEN,(()=>{v||(Y(lt,`RPC '${e}' stream ${s} transport opened.`),P.o_())})),V(p,ri.EventType.CLOSE,(()=>{v||(v=!0,Y(lt,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(p))})),V(p,ri.EventType.ERROR,(k=>{v||(v=!0,Ts(lt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),P.a_(new J(M.UNAVAILABLE,"The operation could not be completed")))})),V(p,ri.EventType.MESSAGE,(k=>{if(!v){const q=k.data[0];Se(!!q,16349);const B=q,H=B?.error||B[0]?.error;if(H){Y(lt,`RPC '${e}' stream ${s} received error:`,H);const z=H.status;let ie=(function(T){const _=$e[T];if(_!==void 0)return Om(_)})(z),ce=H.message;ie===void 0&&(ie=M.INTERNAL,ce="Unknown error status: "+z+" with message "+H.message),v=!0,P.a_(new J(ie,ce)),p.close()}else Y(lt,`RPC '${e}' stream ${s} received:`,q),P.u_(q)}})),V(c,Xg.STAT_EVENT,(k=>{k.stat===ol.PROXY?Y(lt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===ol.NOPROXY&&Y(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function kc(){return typeof document<"u"?document:null}function ja(t){return new iR(t,!0)}class Wm{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wd="PersistentStream";class Km{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wm(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new J(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Y(wd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Y(wd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nb extends Km{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cR(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?un(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_l(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=hl(l)?{documents:hR(i,l)}:{query:fR(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Mm(i,o.resumeToken);const u=pl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=ta(i,o.snapshotVersion.toTimestamp());const u=pl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=pR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_l(this.serializer),n.removeTarget=e,this.q_(n)}}class rb extends Km{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uR(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_l(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>lR(this.serializer,r)))};this.q_(n)}}class sb{}class ib extends sb{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,gl(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(M.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,gl(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(M.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ob{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(On(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Br="RemoteStore";class ab{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{zr(this)&&(Y(Br,"Restarting streams for network reachability change."),await(async function(l){const u=he(l);u.Ea.add(4),await Ki(u),u.Ra.set("Unknown"),u.Ea.delete(4),await qa(u)})(this))}))})),this.Ra=new ob(r,s)}}async function qa(t){if(zr(t))for(const e of t.da)await e(!0)}async function Ki(t){for(const e of t.da)await e(!1)}function Qm(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gu(n)?pu(n):ks(n).O_()&&du(n,e))}function fu(t,e){const n=he(t),r=ks(n);n.Ia.delete(e),r.O_()&&Jm(n,e),n.Ia.size===0&&(r.O_()?r.L_():zr(n)&&n.Ra.set("Unknown"))}function du(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ks(t).Y_(e)}function Jm(t,e){t.Va.Ue(e),ks(t).Z_(e)}function pu(t){t.Va=new tR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ks(t).start(),t.Ra.ua()}function gu(t){return zr(t)&&!ks(t).x_()&&t.Ia.size>0}function zr(t){return he(t).Ea.size===0}function Xm(t){t.Va=void 0}async function cb(t){t.Ra.set("Online")}async function lb(t){t.Ia.forEach(((e,n)=>{du(t,e)}))}async function ub(t,e){Xm(t),gu(t)?(t.Ra.ha(e),pu(t)):t.Ra.set("Unknown")}async function hb(t,e,n){if(t.Ra.set("Online"),e instanceof xm&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){Y(Br,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ra(t,r)}else if(e instanceof No?t.Va.Ze(e):e instanceof km?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await zm(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),Jm(i,l);const p=new er(f.target,l,u,f.sequenceNumber);du(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Y(Br,"Failed to raise snapshot:",r),await ra(t,r)}}async function ra(t,e,n){if(!Ds(e))throw e;t.Ea.add(1),await Ki(t),t.Ra.set("Offline"),n||(n=()=>zm(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Y(Br,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qa(t)}))}function Ym(t,e){return e().catch((n=>ra(t,n,e)))}async function $a(t){const e=he(t),n=dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xl;for(;fb(e);)try{const s=await WR(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,db(e,s)}catch(s){await ra(e,s)}Zm(e)&&e_(e)}function fb(t){return zr(t)&&t.Ta.length<10}function db(t,e){t.Ta.push(e);const n=dr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Zm(t){return zr(t)&&!dr(t).x_()&&t.Ta.length>0}function e_(t){dr(t).start()}async function pb(t){dr(t).ra()}async function gb(t){const e=dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mb(t,e,n){const r=t.Ta.shift(),s=iu.from(r,e,n);await Ym(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await $a(t)}async function _b(t,e){e&&dr(t).X_&&await(async function(r,s){if((function(o){return YA(o)&&o!==M.ABORTED})(s.code)){const i=r.Ta.shift();dr(r).B_(),await Ym(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await $a(r)}})(t,e),Zm(t)&&e_(t)}async function Ad(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Y(Br,"RemoteStore received new credentials");const r=zr(n);n.Ea.add(3),await Ki(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qa(n)}async function yb(t,e){const n=he(t);e?(n.Ea.delete(2),await qa(n)):e||(n.Ea.add(2),await Ki(n),n.Ra.set("Unknown"))}function ks(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new nb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:cb.bind(null,t),t_:lb.bind(null,t),r_:ub.bind(null,t),H_:hb.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),gu(t)?pu(t):t.Ra.set("Unknown")):(await t.ma.stop(),Xm(t))}))),t.ma}function dr(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new rb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pb.bind(null,t),r_:_b.bind(null,t),ta:gb.bind(null,t),na:mb.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await $a(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Br,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class mu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new mu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _u(t,e){if(On("AsyncQueue",`${e}: ${t}`),Ds(t))return new J(M.UNAVAILABLE,`${e}: ${t}`);throw t}class fs{static emptySet(e){return new fs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=si(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Rd{constructor(){this.ga=new Le(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class bs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new bs(e,n,fs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ma(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class Eb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vb{constructor(){this.queries=bd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=bd(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new J(M.ABORTED,"Firestore shutting down"))}}function bd(){return new Hr((t=>Tm(t)),Ma)}async function Tb(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Eb,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=_u(o,`Initialization of query '${ns(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&yu(n)}async function Ib(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wb(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&yu(n)}function Ab(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function yu(t){t.Ca.forEach((e=>{e.next()}))}var vl,Sd;(Sd=vl||(vl={})).Ma="default",Sd.Cache="cache";class Rb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vl.Cache}}class t_{constructor(e){this.key=e}}class n_{constructor(e){this.key=e}}class bb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ye(),this.mutatedKeys=ye(),this.eu=Im(e),this.tu=new fs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Rd,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const g=s.get(f),v=La(this.query,p)?p:null,P=!!g&&this.mutatedKeys.has(g.key),V=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;g&&v?g.data.isEqual(v.data)?P!==V&&(r.track({type:3,doc:v}),k=!0):this.su(g,v)||(r.track({type:2,doc:v}),k=!0,(l&&this.eu(v,l)>0||u&&this.eu(v,u)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(l||u)&&(c=!0)),k&&(v?(o=o.add(v),i=V?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(v,P){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:k})}};return V(v)-V(P)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new bs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new n_(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new t_(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eu="SyncEngine";class Sb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Cb{constructor(e){this.key=e,this.hu=!1}}class Pb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Hr((c=>Tm(c)),Ma),this.Iu=new Map,this.Eu=new Set,this.du=new Le(te.comparator),this.Au=new Map,this.Ru=new cu,this.Vu={},this.mu=new Map,this.fu=Rs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nb(t,e,n=!0){const r=c_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await r_(r,e,n,!0),s}async function Vb(t,e){const n=c_(t);await r_(n,e,!0,!1)}async function r_(t,e,n,r){const s=await KR(t.localStore,cn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await Db(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Qm(t.remoteStore,s),c}async function Db(t,e,n,r,s){t.pu=(p,g,v)=>(async function(V,k,q,B){let H=k.view.ru(q);H.Cs&&(H=await Ed(V.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,H))));const z=B&&B.targetChanges.get(k.targetId),ie=B&&B.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(H,V.isPrimaryClient,z,ie);return Pd(V,k.targetId,ce.au),ce.snapshot})(t,p,g,v);const i=await Ed(t.localStore,e,!0),o=new bb(e,i.Qs),c=o.ru(i.documents),l=Wi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);Pd(t,n,u.au);const f=new Sb(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Ob(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Ma(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fu(r.remoteStore,s.targetId),Tl(r,s.targetId)})).catch(Vs)):(Tl(r,s.targetId),await yl(r.localStore,s.targetId,!0))}async function kb(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fu(n.remoteStore,r.targetId))}async function xb(t,e,n){const r=qb(t);try{const s=await(function(o,c){const l=he(o),u=xe.now(),f=c.reduce(((v,P)=>v.add(P.key)),ye());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let P=kn(),V=ye();return l.Ns.getEntries(v,f).next((k=>{P=k,P.forEach(((q,B)=>{B.isValidDocument()||(V=V.add(q))}))})).next((()=>l.localDocuments.getOverlayedDocuments(v,P))).next((k=>{p=k;const q=[];for(const B of c){const H=WA(B,p.get(B.key).overlayedDocument);H!=null&&q.push(new Gr(B.key,H,dm(H.value.mapValue),ln.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,q,c)})).next((k=>{g=k;const q=k.applyToLocalDocumentSet(p,V);return l.documentOverlayCache.saveOverlays(v,k.batchId,q)}))})).then((()=>({batchId:g.batchId,changes:Am(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Le(_e)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await Qi(r,s.changes),await $a(r.remoteStore)}catch(s){const i=_u(s,"Failed to persist write");n.reject(i)}}async function s_(t,e){const n=he(t);try{const r=await GR(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Se(o.hu,14607):s.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))})),await Qi(n,r,e)}catch(r){await Vs(r)}}function Cd(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=he(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const g of p.Sa)g.va(c)&&(u=!0)})),u&&yu(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mb(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Le(te.comparator);o=o.insert(i,ft.newNoDocument(i,le.min()));const c=ye().add(i),l=new Ba(le.min(),new Map,new Le(_e),o,c);await s_(r,l),r.du=r.du.remove(i),r.Au.delete(e),vu(r)}else await yl(r.localStore,e,!1).then((()=>Tl(r,e,n))).catch(Vs)}async function Lb(t,e){const n=he(t),r=e.batch.batchId;try{const s=await HR(n.localStore,e);o_(n,r,null),i_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qi(n,s)}catch(s){await Vs(s)}}async function Fb(t,e,n){const r=he(t);try{const s=await(function(o,c){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Se(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);o_(r,e,n),i_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qi(r,s)}catch(s){await Vs(s)}}function i_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function o_(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Tl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||a_(t,r)}))}function a_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vu(t))}function Pd(t,e,n){for(const r of n)r instanceof t_?(t.Ru.addReference(r.key,e),Ub(t,r)):r instanceof n_?(Y(Eu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||a_(t,r.key)):oe(19791,{wu:r})}function Ub(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Eu,"New document in limbo: "+n),t.Eu.add(r),vu(t))}function vu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Oe.fromString(e)),r=t.fu.next();t.Au.set(r,new Cb(n)),t.du=t.du.insert(n,r),Qm(t.remoteStore,new er(cn(nu(n.path)),r,"TargetPurposeLimboResolution",Oa.ce))}}async function Qi(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=uu.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=he(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>L.forEach(u,(g=>L.forEach(g.Es,(v=>f.persistence.referenceDelegate.addReference(p,g.targetId,v))).next((()=>L.forEach(g.ds,(v=>f.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))))))}catch(p){if(!Ds(p))throw p;Y(hu,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const v=f.Ms.get(g),P=v.snapshotVersion,V=v.withLastLimboFreeSnapshotVersion(P);f.Ms=f.Ms.insert(g,V)}}})(r.localStore,i))}async function Bb(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Y(Eu,"User change. New user:",e.toKey());const r=await Gm(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new J(M.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qi(n,r.Ls)}}function jb(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let s=ye();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function c_(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mb.bind(null,e),e.Pu.H_=wb.bind(null,e.eventManager),e.Pu.yu=Ab.bind(null,e.eventManager),e}function qb(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,e),e}class sa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ja(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $R(this.persistence,new BR,e.initialUser,this.serializer)}Cu(e){return new Hm(lu.mi,this.serializer)}Du(e){return new JR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sa.provider={build:()=>new sa};class $b extends sa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof na,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new Hm((r=>na.mi(r,n)),this.serializer)}}class Il{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bb.bind(null,this.syncEngine),await yb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vb})()}createDatastore(e){const n=ja(e.databaseInfo.databaseId),r=(function(i){return new tb(i)})(e.databaseInfo);return(function(i,o,c,l){return new ib(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new ab(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Cd(this.syncEngine,n,0)),(function(){return Id.v()?new Id:new XR})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new Pb(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);Y(Br,"RemoteStore shutting down."),r.Ea.add(5),await Ki(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Il.provider={build:()=>new Il};class Hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const pr="FirestoreClient";class Gb{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=Jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Y(pr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Y(pr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_u(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xc(t,e){t.asyncQueue.verifyOperationInProgress(),Y(pr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Gm(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Nd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zb(t);Y(pr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ad(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Ad(e.remoteStore,s))),t._onlineComponents=e}async function zb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(pr,"Using user provided OfflineComponentProvider");try{await xc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ts("Error using user provided cache. Falling back to memory cache: "+n),await xc(t,new sa)}}else Y(pr,"Using default OfflineComponentProvider"),await xc(t,new $b(void 0));return t._offlineComponents}async function l_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(pr,"Using user provided OnlineComponentProvider"),await Nd(t,t._uninitializedComponentsProvider._online)):(Y(pr,"Using default OnlineComponentProvider"),await Nd(t,new Il))),t._onlineComponents}function Wb(t){return l_(t).then((e=>e.syncEngine))}async function Vd(t){const e=await l_(t),n=e.eventManager;return n.onListen=Nb.bind(null,e.syncEngine),n.onUnlisten=Ob.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Vb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kb.bind(null,e.syncEngine),n}function u_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Dd=new Map;const h_="firestore.googleapis.com",Od=!0;class kd{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h_,this.ssl=Od}else this.host=e.host,this.ssl=e.ssl??Od;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$m;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wR)throw new J(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u_(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ha{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xw;switch(r.type){case"firstParty":return new tA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Dd.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Dd.delete(n),r.terminate())})(this),Promise.resolve()}}function Kb(t,e,n,r={}){t=hs(t,Ha);const s=Cs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Bg(`https://${c}`),jg("Firestore",!0)),i.host!==h_&&i.host!==c&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Lr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=ut.MOCK_USER;else{u=II(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new J(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ut(p)}t._authCredentials=new Yw(new tm(u,f))}}class Wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wr(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gi(n,Qe._jsonSchema))return new Qe(e,r||null,new te(Oe.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:ze("string",Qe._jsonSchemaVersion),referencePath:ze("string")};class or extends Wr{constructor(e,n,r){super(e,n,nu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new te(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function BP(t,e,...n){if(t=Tt(t),nm("collection","path",e),t instanceof Ha){const r=Oe.fromString(e,...n);return zf(r),new or(t,null,r)}{if(!(t instanceof Qe||t instanceof or))throw new J(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return zf(r),new or(t.firestore,null,r)}}function Qb(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Jl.newId()),nm("doc","path",e),t instanceof Ha){const r=Oe.fromString(e,...n);return Gf(r),new Qe(t,null,new te(r))}{if(!(t instanceof Qe||t instanceof or))throw new J(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return Gf(r),new Qe(t.firestore,t instanceof or?t.converter:null,new te(r))}}const xd="AsyncQueue";class Md{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wm(this,"async_queue_retry"),this._c=()=>{const r=kc();r&&Y(xd,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ds(e))throw e;Y(xd,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,On("INTERNAL UNHANDLED ERROR: ",Ld(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=mu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:Ld(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ld(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function Fd(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Fi extends Ha{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Md,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Md(e),this._firestoreClient=void 0,await e}}}function Jb(t,e){const n=typeof t=="object"?t:Gg(),r=typeof t=="string"?t:Jo,s=Kl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vI("firestore");i&&Kb(s,...i)}return s}function f_(t){if(t._terminated)throw new J(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xb(t),t._firestoreClient}function Xb(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new yA(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,u_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Gb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Lt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lt(it.fromBase64String(e))}catch(n){throw new J(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lt(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gi(e,Lt._jsonSchema))return Lt.fromBase64String(e.bytes)}}Lt._jsonSchemaVersion="firestore/bytes/1.0",Lt._jsonSchema={type:ze("string",Lt._jsonSchemaVersion),bytes:ze("string")};class Tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class d_{constructor(e){this._methodName=e}}class hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hn._jsonSchemaVersion}}static fromJSON(e){if(Gi(e,hn._jsonSchema))return new hn(e.latitude,e.longitude)}}hn._jsonSchemaVersion="firestore/geoPoint/1.0",hn._jsonSchema={type:ze("string",hn._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};class fn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gi(e,fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new fn(e.vectorValues);throw new J(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fn._jsonSchemaVersion="firestore/vectorValue/1.0",fn._jsonSchema={type:ze("string",fn._jsonSchemaVersion),vectorValues:ze("object")};const Yb=/^__.*__$/;class Zb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new zi(e,this.data,n,this.fieldTransforms)}}function p_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:t})}}class Iu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Iu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ia(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p_(this.Ac)&&Yb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ja(e)}Cc(e,n,r,s=!1){return new Iu({Ac:e,methodName:n,Dc:r,path:st.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function g_(t){const e=t._freezeSettings(),n=ja(t._databaseId);return new eS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tS(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);y_("Data must be an object, but it was:",o,r);const c=m_(r,o);let l,u;if(i.merge)l=new Ht(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=rS(e,p,n);if(!o.contains(g))throw new J(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);iS(f,g)||f.push(g)}l=new Ht(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new Zb(new Mt(c),l,u)}function nS(t,e,n,r=!1){return wu(n,t.Cc(r?4:3,e))}function wu(t,e){if(__(t=Tt(t)))return y_("Unsupported field value:",e,t),m_(t,e);if(t instanceof d_)return(function(r,s){if(!p_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=wu(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:ta(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ta(s.serializer,i)}}if(r instanceof hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lt)return{bytesValue:Mm(s.serializer,r._byteString)};if(r instanceof Qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:au(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fn)return(function(o,c){return{mapValue:{fields:{[hm]:{stringValue:fm},[Xo]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return ru(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Da(r)}`)})(t,e)}function m_(t,e){const n={};return im(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(t,((r,s)=>{const i=wu(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function __(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof hn||t instanceof Lt||t instanceof Qe||t instanceof d_||t instanceof fn)}function y_(t,e,n){if(!__(n)||!rm(n)){const r=Da(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function rS(t,e,n){if((e=Tt(e))instanceof Tu)return e._internalPath;if(typeof e=="string")return E_(t,e);throw ia("Field path arguments must be of type string or ",t,!1,void 0,n)}const sS=new RegExp("[~\\*/\\[\\]]");function E_(t,e,n){if(e.search(sS)>=0)throw ia(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tu(...e.split("."))._internalPath}catch{throw ia(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ia(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(M.INVALID_ARGUMENT,c+t+l)}function iS(t,e){return t.some((n=>n.isEqual(e)))}class v_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ga("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oS extends v_{data(){return super.data()}}function Ga(t,e){return typeof e=="string"?E_(t,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function aS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Au{}class T_ extends Au{}function jP(t,e,...n){let r=[];e instanceof Au&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Ru)).length,c=i.filter((l=>l instanceof za)).length;if(o>1||o>0&&c>0)throw new J(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class za extends T_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new za(e,n,r)}_apply(e){const n=this._parse(e);return I_(e._query,n),new Wr(e.firestore,e.converter,fl(e._query,n))}_parse(e){const n=g_(e.firestore);return(function(i,o,c,l,u,f,p){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new J(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Bd(p,f);const P=[];for(const V of p)P.push(Ud(l,i,V));g={arrayValue:{values:P}}}else g=Ud(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Bd(p,f),g=nS(c,o,p,f==="in"||f==="not-in");return Ge.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qP(t,e,n){const r=e,s=Ga("where",t);return za._create(s,r,n)}class Ru extends Au{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ru(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)I_(o,l),o=fl(o,l)})(e._query,n),new Wr(e.firestore,e.converter,fl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bu extends T_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bu(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new J(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xi(i,o)})(e._query,this._field,this._direction);return new Wr(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Os(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function $P(t,e="asc"){const n=e,r=Ga("orderBy",t);return bu._create(r,n)}function Ud(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new J(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vm(e)&&n.indexOf("/")!==-1)throw new J(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!te.isDocumentKey(r))throw new J(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ed(t,new te(r))}if(n instanceof Qe)return ed(t,n._key);throw new J(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Da(n)}.`)}function Bd(t,e){if(!Array.isArray(t)||t.length===0)throw new J(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I_(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new J(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cS{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $r(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Xo].arrayValue?.values?.map((r=>je(r.doubleValue)));return new fn(n)}convertGeoPoint(e){return new hn(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xa(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Di(e));default:return null}}convertTimestamp(e){const n=ur(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Se(qm(r),9688,{name:e});const s=new Oi(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||On(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function lS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends v_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ga("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:ze("string",Mr._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class Vo extends Mr{data(e={}){return super.data(e)}}class ds{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new oi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Vo(this._firestore,this._userDataWriter,r.key,r,new oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Vo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Vo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oi(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:uS(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ds._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}ds._jsonSchemaVersion="firestore/querySnapshot/1.0",ds._jsonSchema={type:ze("string",ds._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class w_ extends cS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function HP(t){return A_(hs(t.firestore,Fi),[new su(t._key,ln.none())])}function GP(t,e){const n=hs(t.firestore,Fi),r=Qb(t),s=lS(t.converter,e);return A_(n,[tS(g_(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then((()=>r))}function zP(t,...e){t=Tt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Fd(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Fd(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,c;if(t instanceof Qe)o=hs(t.firestore,Fi),c=nu(t._key.path),i={next:l=>{e[r]&&e[r](hS(o,t,l))},error:e[r+1],complete:e[r+2]};else{const l=hs(t,Wr);o=hs(l.firestore,Fi),c=l._query;const u=new w_(o);i={next:f=>{e[r]&&e[r](new ds(o,u,l,f))},error:e[r+1],complete:e[r+2]},aS(t._query)}return(function(u,f,p,g){const v=new Hb(g),P=new Rb(f,v,p);return u.asyncQueue.enqueueAndForget((async()=>Tb(await Vd(u),P))),()=>{v.Nu(),u.asyncQueue.enqueueAndForget((async()=>Ib(await Vd(u),P)))}})(f_(o),c,s,i)}function A_(t,e){return(function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget((async()=>xb(await Wb(r),s,i))),i.promise})(f_(t),e)}function hS(t,e,n){const r=n.docs.get(e._key),s=new w_(t);return new Mr(t,s,e._key,r,new oi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ns=s})(Ps),vs(new Fr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Fi(new Zw(r.getProvider("auth-internal")),new nA(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),sr(jf,qf,e),sr(jf,qf,"esm2020")})();function R_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fS=R_,b_=new $i("auth","Firebase",R_());const oa=new zl("@firebase/auth");function dS(t,...e){oa.logLevel<=me.WARN&&oa.warn(`Auth (${Ps}): ${t}`,...e)}function Do(t,...e){oa.logLevel<=me.ERROR&&oa.error(`Auth (${Ps}): ${t}`,...e)}function mn(t,...e){throw Cu(t,...e)}function Kt(t,...e){return Cu(t,...e)}function Su(t,e,n){const r={...fS(),[e]:n};return new $i("auth","Firebase",r).create(e,{appName:t.name})}function ar(t){return Su(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S_(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(t,"argument-error"),Su(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cu(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b_.create(t,...e)}function ae(t,e,...n){if(!t)throw Cu(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Do(e),new Error(e)}function xn(t,e){t||Sn(e)}function wl(){return typeof self<"u"&&self.location?.href||""}function pS(){return jd()==="http:"||jd()==="https:"}function jd(){return typeof self<"u"&&self.location?.protocol||null}function gS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pS()||CI()||"connection"in navigator)?navigator.onLine:!0}function mS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ji{constructor(e,n){this.shortDelay=e,this.longDelay=n,xn(n>e,"Short delay should be less than long delay!"),this.isMobile=RI()||PI()}get(){return gS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pu(t,e){xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class C_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ES=new Ji(3e4,6e4);function Nu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xs(t,e,n,r,s={}){return P_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Hi({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return SI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(u.credentials="include"),C_.fetch()(await N_(t,t.config.apiHost,n,c),u)})}async function P_(t,e,n){t._canInitEmulator=!1;const r={..._S,...e};try{const s=new TS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Eo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Eo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Eo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Su(t,f,u);mn(t,f)}}catch(s){if(s instanceof Ln)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function vS(t,e,n,r,s={}){const i=await xs(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function N_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Pu(t.config,s):`${t.config.apiScheme}://${s}`;return yS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class TS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kt(this.auth,"network-request-failed")),ES.get())})}}function Eo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Kt(t,e,r);return s.customData._tokenResponse=n,s}async function IS(t,e){return xs(t,"POST","/v1/accounts:delete",e)}async function aa(t,e){return xs(t,"POST","/v1/accounts:lookup",e)}function vi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wS(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=Vu(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:vi(Mc(s.auth_time)),issuedAtTime:vi(Mc(s.iat)),expirationTime:vi(Mc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Mc(t){return Number(t)*1e3}function Vu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Do("JWT malformed, contained fewer than 3 sections"),null;try{const s=Mg(n);return s?JSON.parse(s):(Do("Failed to decode base64 JWT payload"),null)}catch(s){return Do("Caught error parsing JWT payload as JSON",s?.toString()),null}}function qd(t){const e=Vu(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&AS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class RS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Al{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vi(this.lastLoginAt),this.creationTime=vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ca(t){const e=t.auth,n=await t.getIdToken(),r=await Ui(t,aa(e,{idToken:n}));ae(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?V_(s.providerUserInfo):[],o=SS(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Al(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function bS(t){const e=Tt(t);await ca(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function V_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function CS(t,e){const n=await P_(t,{},async()=>{const r=Hi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await N_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Cs(t.emulatorConfig.host)&&(l.credentials="include"),C_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PS(t,e){return xs(t,"POST","/v2/accounts:revokeToken",Nu(t,e))}class ps{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=qd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await CS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ps;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ps,this.toJSON())}_performRefresh(){return Sn("not implemented")}}function zn(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new RS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Al(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wS(this,e)}reload(){return bS(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ca(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject(ar(this.auth));const e=await this.getIdToken();return await Ui(this,IS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:v,providerData:P,stsTokenManager:V}=n;ae(p&&V,e,"internal-error");const k=ps.fromJSON(this.name,V);ae(typeof p=="string",e,"internal-error"),zn(r,e.name),zn(s,e.name),ae(typeof g=="boolean",e,"internal-error"),ae(typeof v=="boolean",e,"internal-error"),zn(i,e.name),zn(o,e.name),zn(c,e.name),zn(l,e.name),zn(u,e.name),zn(f,e.name);const q=new Gt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:k,createdAt:u,lastLoginAt:f});return P&&Array.isArray(P)&&(q.providerData=P.map(B=>({...B}))),l&&(q._redirectEventId=l),q}static async _fromIdTokenResponse(e,n,r=!1){const s=new ps;s.updateFromServerResponse(n);const i=new Gt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ca(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?V_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new ps;c.updateFromIdToken(r);const l=new Gt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Al(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const $d=new Map;function Cn(t){xn(t instanceof Function,"Expected a class definition");let e=$d.get(t);return e?(xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$d.set(t,e),e)}class D_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}D_.type="NONE";const Hd=D_;function Oo(t,e,n){return`firebase:${t}:${e}:${n}`}class gs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Oo(this.userKey,s.apiKey,i),this.fullPersistenceKey=Oo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await aa(this.auth,{idToken:e}).catch(()=>{});return n?Gt._fromGetAccountInfoResponse(this.auth,n,e):null}return Gt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gs(Cn(Hd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Cn(Hd);const o=Oo(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const g=await aa(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Gt._fromGetAccountInfoResponse(e,g,f)}else p=Gt._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new gs(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new gs(i,e,r))}}function Gd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F_(e))return"Blackberry";if(U_(e))return"Webos";if(k_(e))return"Safari";if((e.includes("chrome/")||x_(e))&&!e.includes("edge/"))return"Chrome";if(L_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function O_(t=gt()){return/firefox\//i.test(t)}function k_(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x_(t=gt()){return/crios\//i.test(t)}function M_(t=gt()){return/iemobile/i.test(t)}function L_(t=gt()){return/android/i.test(t)}function F_(t=gt()){return/blackberry/i.test(t)}function U_(t=gt()){return/webos/i.test(t)}function Du(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NS(t=gt()){return Du(t)&&!!window.navigator?.standalone}function VS(){return NI()&&document.documentMode===10}function B_(t=gt()){return Du(t)||L_(t)||U_(t)||F_(t)||/windows phone/i.test(t)||M_(t)}function j_(t,e=[]){let n;switch(t){case"Browser":n=Gd(gt());break;case"Worker":n=`${Gd(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}class DS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function OS(t,e={}){return xs(t,"GET","/v2/passwordPolicy",Nu(t,e))}const kS=6;class xS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class MS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zd(this),this.idTokenSubscription=new zd(this),this.beforeStateQueue=new DS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aa(this,{idToken:e}),r=await Gt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ca(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject(ar(this));const n=e?Tt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject(ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject(ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OS(this),n=new xS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $i("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PS(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await gs.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=j_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ms(t){return Tt(t)}class zd{constructor(e){this.auth=e,this.observer=null,this.addObserver=FI(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ou={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LS(t){Ou=t}function FS(t){return Ou.loadJS(t)}function US(){return Ou.gapiScript}function BS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function jS(t,e){const n=Kl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function qS(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Cn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function $S(t,e,n){const r=Ms(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=q_(e),{host:o,port:c}=HS(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(Lr(u,r.config.emulator)&&Lr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Cs(o)?(Bg(`${i}//${o}${l}`),jg("Auth",!0)):GS()}function q_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HS(t){const e=q_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Wd(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Wd(o)}}}function Wd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class $_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function ms(t,e){return vS(t,"POST","/v1/accounts:signInWithIdp",Nu(t,e))}const zS="http://localhost";class jr extends $_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new jr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ms(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ms(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ms(e,n)}buildRequest(){const e={requestUri:zS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hi(n)}return e}}class Wa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xi extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xn extends Xi{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";class bn extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bn.credential(n,r)}catch{return null}}}bn.GOOGLE_SIGN_IN_METHOD="google.com";bn.PROVIDER_ID="google.com";class Yn extends Xi{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.GITHUB_SIGN_IN_METHOD="github.com";Yn.PROVIDER_ID="github.com";class Zn extends Xi{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.TWITTER_SIGN_IN_METHOD="twitter.com";Zn.PROVIDER_ID="twitter.com";class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gt._fromIdTokenResponse(e,r,s),o=Kd(r);return new Ss({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kd(r);return new Ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class la extends Ln{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,la.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new la(e,n,r,s)}}function H_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?la._fromErrorAndOperation(t,i,e,r):i})}async function WS(t,e,n=!1){const r=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}async function KS(t,e,n=!1){const{auth:r}=t;if(xt(r.app))return Promise.reject(ar(r));const s="reauthenticate";try{const i=await Ui(t,H_(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=Vu(i.idToken);ae(o,r,"internal-error");const{sub:c}=o;return ae(t.uid===c,r,"user-mismatch"),Ss._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}async function QS(t,e,n=!1){if(xt(t.app))return Promise.reject(ar(t));const r="signIn",s=await H_(t,r,e),i=await Ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function JS(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function XS(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function YS(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function ZS(t){return Tt(t).signOut()}const ua="__sak";class G_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ua,"1"),this.storage.removeItem(ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eC=1e3,tC=10;class z_ extends G_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);VS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,tC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z_.type="LOCAL";const nC=z_;class W_ extends G_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}W_.type="SESSION";const K_=W_;function rC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ka{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ka(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await rC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ka.receivers=[];function ku(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class sC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=ku("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function dn(){return window}function iC(t){dn().location.href=t}function Q_(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function oC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aC(){return navigator?.serviceWorker?.controller||null}function cC(){return Q_()?self:null}const J_="firebaseLocalStorageDb",lC=1,ha="firebaseLocalStorage",X_="fbase_key";class Yi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qa(t,e){return t.transaction([ha],e?"readwrite":"readonly").objectStore(ha)}function uC(){const t=indexedDB.deleteDatabase(J_);return new Yi(t).toPromise()}function Rl(){const t=indexedDB.open(J_,lC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ha,{keyPath:X_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ha)?e(r):(r.close(),await uC(),e(await Rl()))})})}async function Qd(t,e,n){const r=Qa(t,!0).put({[X_]:e,value:n});return new Yi(r).toPromise()}async function hC(t,e){const n=Qa(t,!1).get(e),r=await new Yi(n).toPromise();return r===void 0?null:r.value}function Jd(t,e){const n=Qa(t,!0).delete(e);return new Yi(n).toPromise()}const fC=800,dC=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ka._getInstance(cC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await oC(),!this.activeServiceWorker)return;this.sender=new sC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rl();return await Qd(e,ua,"1"),await Jd(e,ua),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qd(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qa(s,!1).getAll();return new Yi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const pC=Y_;new Ji(3e4,6e4);function xu(t,e){return e?Cn(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Mu extends $_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ms(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ms(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gC(t){return QS(t.auth,new Mu(t),t.bypassAuthState)}function mC(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),KS(n,new Mu(t),t.bypassAuthState)}async function _C(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),WS(n,new Mu(t),t.bypassAuthState)}class Z_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return _C;case"reauthViaPopup":case"reauthViaRedirect":return mC;default:mn(this.auth,"internal-error")}}resolve(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yC=new Ji(2e3,1e4);async function EC(t,e,n){if(xt(t.app))return Promise.reject(Kt(t,"operation-not-supported-in-this-environment"));const r=Ms(t);S_(t,e,Wa);const s=xu(r,n);return new Vr(r,"signInViaPopup",e,s).executeNotNull()}class Vr extends Z_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vr.currentPopupAction&&Vr.currentPopupAction.cancel(),Vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){xn(this.filter.length===1,"Popup operations only handle one event");const e=ku();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yC.get())};e()}}Vr.currentPopupAction=null;const vC="pendingRedirect",ko=new Map;class TC extends Z_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ko.get(this.auth._key());if(!e){try{const r=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ko.set(this.auth._key(),e)}return this.bypassAuthState||ko.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(t,e){const n=ty(e),r=ey(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function wC(t,e){return ey(t)._set(ty(e),"true")}function AC(t,e){ko.set(t._key(),e)}function ey(t){return Cn(t._redirectPersistence)}function ty(t){return Oo(vC,t.config.apiKey,t.name)}function RC(t,e,n){return bC(t,e,n)}async function bC(t,e,n){if(xt(t.app))return Promise.reject(ar(t));const r=Ms(t);S_(t,e,Wa),await r._initializationPromise;const s=xu(r,n);return await wC(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function SC(t,e){return await Ms(t)._initializationPromise,ny(t,e,!1)}async function ny(t,e,n=!1){if(xt(t.app))return Promise.reject(ar(t));const r=Ms(t),s=xu(r,e),o=await new TC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const CC=600*1e3;class PC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ry(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Kt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xd(e))}saveEventToCache(e){this.cachedEventUids.add(Xd(e)),this.lastProcessedEventTime=Date.now()}}function Xd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ry({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function NC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ry(t);default:return!1}}async function VC(t,e={}){return xs(t,"GET","/v1/projects",e)}const DC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function kC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VC(t);for(const n of e)try{if(xC(n))return}catch{}mn(t,"unauthorized-domain")}function xC(t){const e=wl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OC.test(n))return!1;if(DC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const MC=new Ji(3e4,6e4);function Yd(){const t=dn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LC(t){return new Promise((e,n)=>{function r(){Yd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yd(),n(Kt(t,"network-request-failed"))},timeout:MC.get()})}if(dn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(dn().gapi?.load)r();else{const s=BS("iframefcb");return dn()[s]=()=>{gapi.load?r():n(Kt(t,"network-request-failed"))},FS(`${US()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw xo=null,e})}let xo=null;function FC(t){return xo=xo||LC(t),xo}const UC=new Ji(5e3,15e3),BC="__/auth/iframe",jC="emulator/auth/iframe",qC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$C=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HC(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pu(e,jC):`https://${t.config.authDomain}/${BC}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},s=$C.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Hi(r).slice(1)}`}async function GC(t){const e=await FC(t),n=dn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:HC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Kt(t,"network-request-failed"),c=dn().setTimeout(()=>{i(o)},UC.get());function l(){dn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const zC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,KC=600,QC="_blank",JC="http://localhost";class Zd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XC(t,e,n,r=WC,s=KC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...zC,width:r.toString(),height:s.toString(),top:i,left:o},u=gt().toLowerCase();n&&(c=x_(u)?QC:n),O_(u)&&(e=e||JC,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[v,P])=>`${g}${v}=${P},`,"");if(NS(u)&&c!=="_self")return YC(e||"",c),new Zd(null);const p=window.open(e||"",c,f);ae(p,t,"popup-blocked");try{p.focus()}catch{}return new Zd(p)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const ZC="__/auth/handler",eP="emulator/auth/handler",tP=encodeURIComponent("fac");async function ep(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:s};if(e instanceof Wa){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Xi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${tP}=${encodeURIComponent(l)}`:"";return`${nP(t)}?${Hi(c).slice(1)}${u}`}function nP({config:t}){return t.emulator?Pu(t,eP):`https://${t.authDomain}/${ZC}`}const Lc="webStorageSupport";class rP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K_,this._completeRedirectFn=ny,this._overrideRedirectResult=AC}async _openPopup(e,n,r,s){xn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ep(e,n,r,wl(),s);return XC(e,i,ku())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ep(e,n,r,wl(),s);return iC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GC(e),r=new PC(e);return n.register("authEvent",s=>(ae(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lc,{type:Lc},s=>{const i=s?.[0]?.[Lc];i!==void 0&&n(!!i),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B_()||k_()||Du()}}const sP=rP;var tp="@firebase/auth",np="1.12.0";class iP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aP(t){vs(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j_(t)},u=new MS(r,s,i,l);return qS(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vs(new Fr("auth-internal",e=>{const n=Ms(e.getProvider("auth").getImmediate());return(r=>new iP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(tp,np,oP(t)),sr(tp,np,"esm2020")}const cP=300,lP=Ug("authIdTokenMaxAge")||cP;let rp=null;const uP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lP)return;const s=n?.token;rp!==s&&(rp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hP(t=Gg()){const e=Kl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jS(t,{popupRedirectResolver:sP,persistence:[pC,nC,K_]}),r=Ug("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=uP(i.toString());XS(n,o,()=>o(n.currentUser)),JS(n,c=>o(c))}}const s=Lg("auth");return s&&$S(n,`http://${s}`),n}function fP(){return document.getElementsByTagName("head")?.[0]??document}LS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Kt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aP("Browser");const dP={apiKey:"AIzaSyAnH6OrDHBa-ljtrEpfAmwDzSXZdVqLBzw",authDomain:"taro-test-dc290.firebaseapp.com",projectId:"taro-test-dc290",storageBucket:"taro-test-dc290.firebasestorage.app",messagingSenderId:"561002476888",appId:"1:561002476888:web:8a51ece156741e965a212d",measurementId:"G-7LQTPF9BNL"},sy=Hg(dP),WP=Jb(sy),Ti=hP(sy),sp=new bn,Lu=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},pP={class:"navbar-container"},gP={class:"sidebar-desktop"},mP={class:"user-profile"},_P=["src"],yP={class:"user-name"},EP={class:"menu-sections"},vP={class:"category-section"},TP={class:"category-list"},IP={class:"bottom-nav-mobile"},wP=["src"],AP={class:"mobile-category-grid"},RP={__name:"Navbar",setup(t){const e=Dg(),n=ti({name:"",avatar:"https://cdn-icons-png.flaticon.com/512/3682/3682281.png"}),r=ti(!1);Ra(()=>{YS(Ti,l=>{l?(n.value={name:l.displayName||"",avatar:l.photoURL||"https://cdn-icons-png.flaticon.com/512/3682/3682281.png"},r.value=!0):(n.value={name:"",avatar:"https://cdn-icons-png.flaticon.com/512/3682/3682281.png"},r.value=!1)})});const s=async()=>{try{await ZS(Ti),e.push("/")}catch(l){console.error("",l)}},i=ti(["","","",""]),o=ti(!1),c=()=>{o.value=!o.value};return(l,u)=>{const f=ME("router-link");return $t(),br("nav",pP,[fe("aside",gP,[u[6]||(u[6]=fe("div",{class:"brand"},[fe("img",{src:Og,alt:"Favory Logo",class:"brand-logo"}),fe("h1",{class:"brand-name"},"Favory")],-1)),fe("div",mP,[fe("img",{src:n.value.avatar,alt:"avatar",class:"avatar"},null,8,_P),fe("span",yP,To(n.value.name),1),r.value?($t(),br("button",{key:0,onClick:s,class:"logout-btn"},"")):Kc("",!0)]),fe("div",EP,[He(f,{to:"/List",class:"nav-link"},{default:Tn(()=>[...u[2]||(u[2]=[fe("span",{class:"icon"},"",-1),is("  ",-1)])]),_:1}),He(f,{to:"/AddFavory",class:"nav-link"},{default:Tn(()=>[...u[3]||(u[3]=[fe("span",{class:"icon"},"",-1),is("  ",-1)])]),_:1}),u[5]||(u[5]=fe("div",{class:"divider"},null,-1)),fe("div",vP,[u[4]||(u[4]=fe("p",{class:"section-label"},"",-1)),fe("div",TP,[($t(!0),br(Nt,null,kh(i.value,p=>($t(),qo(f,{key:p,to:`/category/${p}`,class:"category-item"},{default:Tn(()=>[is(" # "+To(p),1)]),_:2},1032,["to"]))),128))])])])]),fe("div",IP,[He(f,{to:"/List",class:"mobile-nav-item"},{default:Tn(()=>[...u[7]||(u[7]=[fe("span",{class:"icon"},"",-1),fe("span",{class:"label"},"",-1)])]),_:1}),He(f,{to:"/AddFavory",class:"mobile-nav-item"},{default:Tn(()=>[...u[8]||(u[8]=[fe("span",{class:"icon"},"",-1),fe("span",{class:"label"},"",-1)])]),_:1}),fe("button",{onClick:c,class:"mobile-nav-item btn-reset"},[...u[9]||(u[9]=[fe("span",{class:"icon"},"",-1),fe("span",{class:"label"},"",-1)])]),He(f,{to:"/profile",class:"mobile-nav-item"},{default:Tn(()=>[fe("img",{src:n.value.avatar,class:"mini-avatar"},null,8,wP),u[10]||(u[10]=fe("span",{class:"label"},"",-1))]),_:1})]),He(Nv,{name:"fade"},{default:Tn(()=>[o.value?($t(),br("div",{key:0,class:"mobile-modal-overlay",onClick:c},[fe("div",{class:"mobile-modal-content",onClick:u[1]||(u[1]=Zv(()=>{},["stop"]))},[u[11]||(u[11]=fe("h3",null,"",-1)),fe("div",AP,[($t(!0),br(Nt,null,kh(i.value,p=>($t(),qo(f,{key:p,to:`/category/${p}`,class:"m-cat-item",onClick:u[0]||(u[0]=g=>o.value=!1)},{default:Tn(()=>[is(To(p),1)]),_:2},1032,["to"]))),128))]),fe("button",{class:"close-btn",onClick:c},"")])])):Kc("",!0)]),_:1})])}}},bP=Lu(RP,[["__scopeId","data-v-72183fc1"]]),SP={class:"app-layout"},CP={__name:"App",setup(t){const e=hI(),n=kt(()=>e.path==="/");return(r,s)=>($t(),br("div",SP,[n.value?Kc("",!0):($t(),qo(bP,{key:0})),fe("main",{class:ya(n.value?"loginpage":"main-container")},[He(kr(Vg))],2)]))}},PP=Lu(CP,[["__scopeId","data-v-647f550f"]]),NP="modulepreload",VP=function(t){return"/"+t},ip={},op=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=VP(u),u in ip)return;ip[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":NP,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((v,P)=>{g.addEventListener("load",v),g.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},DP={class:"login-container"},OP={__name:"HomeView",setup(t){const e=Dg();Ra(async()=>{try{const r=await SC(Ti);r&&(console.log(":",r.user.displayName),e.push("/List"))}catch(r){console.error(":",r.code)}});const n=async()=>{const r=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);try{r?await RC(Ti,sp):(await EC(Ti,sp),e.push("/List"))}catch(s){console.error(s)}};return(r,s)=>($t(),br("div",DP,[s[4]||(s[4]=fe("div",{class:"brand-section"},[fe("div",{class:"brand-content"},[fe("img",{src:Og,alt:"Logo",class:"main-logo"}),fe("p",{class:"app-slogan"},"")])],-1)),fe("div",{class:"auth-section"},[fe("div",{class:"login-card"},[s[1]||(s[1]=fe("h2",null," ",-1)),s[2]||(s[2]=fe("p",null," Google ",-1)),fe("button",{onClick:n,class:"google-login-btn"},[...s[0]||(s[0]=[fe("img",{src:"https://cdn-icons-png.flaticon.com/512/2991/2991148.png",class:"google-icon"},null,-1),is("  Google  ",-1)])]),s[3]||(s[3]=fe("div",{class:"footer-links"},[fe("span",null,"")],-1))])])]))}},kP=Lu(OP,[["__scopeId","data-v-2fc2ba75"]]),xP=uI({history:$T("/"),routes:[{path:"/",name:"home",component:kP},{path:"/List",name:"List",component:()=>op(()=>import("./ListView-CqyzCYbZ.js"),__vite__mapDeps([0,1]))},{path:"/AddFavory",name:"AddFavory",component:()=>op(()=>import("./AddFavoryView-CGCm1cjI.js"),__vite__mapDeps([2,3]))}]}),iy=nT(PP);iy.use(xP);iy.mount("#app");export{Nt as F,Lu as _,YS as a,fe as b,br as c,Kc as d,kh as e,$P as f,BP as g,WP as h,zP as i,Ti as j,$t as k,HP as l,Qb as m,He as n,Ra as o,MP as p,jP as q,ti as r,ya as s,To as t,FP as u,LP as v,qP as w,GP as x};
