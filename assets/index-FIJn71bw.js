(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ja(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const St={},Sr=[],We=()=>{},Xh=()=>!1,ro=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Za=e=>e.startsWith("onUpdate:"),ce=Object.assign,tl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Nm=Object.prototype.hasOwnProperty,At=(e,t)=>Nm.call(e,t),ot=Array.isArray,Cr=e=>so(e)==="[object Map]",Yh=e=>so(e)==="[object Set]",ct=e=>typeof e=="function",qt=e=>typeof e=="string",qn=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",Jh=e=>(Nt(e)||ct(e))&&ct(e.then)&&ct(e.catch),Zh=Object.prototype.toString,so=e=>Zh.call(e),xm=e=>so(e).slice(8,-1),tf=e=>so(e)==="[object Object]",el=e=>qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vs=Ja(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),io=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Om=/-\w/g,Mn=io(e=>e.replace(Om,t=>t.slice(1).toUpperCase())),Mm=/\B([A-Z])/g,$n=io(e=>e.replace(Mm,"-$1").toLowerCase()),ef=io(e=>e.charAt(0).toUpperCase()+e.slice(1)),$o=io(e=>e?`on${ef(e)}`:""),Vn=(e,t)=>!Object.is(e,t),Ti=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},nf=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},nl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $c;const oo=()=>$c||($c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rl(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=qt(r)?Um(r):rl(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(qt(e)||Nt(e))return e}const km=/;(?![^(]*\))/g,Lm=/:([^]+)/,Fm=/\/\*[^]*?\*\//g;function Um(e){const t={};return e.replace(Fm,"").split(km).forEach(n=>{if(n){const r=n.split(Lm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function sl(e){let t="";if(qt(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const r=sl(e[n]);r&&(t+=r+" ")}else if(Nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jm=Ja(Bm);function rf(e){return!!e||e===""}const sf=e=>!!(e&&e.__v_isRef===!0),Ni=e=>qt(e)?e:e==null?"":ot(e)||Nt(e)&&(e.toString===Zh||!ct(e.toString))?sf(e)?Ni(e.value):JSON.stringify(e,of,2):String(e),of=(e,t)=>sf(t)?of(e,t.value):Cr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ho(r,i)+" =>"]=s,n),{})}:Yh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ho(n))}:qn(t)?Ho(t):Nt(t)&&!ot(t)&&!tf(t)?String(t):t,Ho=(e,t="")=>{var n;return qn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let ye;class qm{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ye,!t&&ye&&(this.index=(ye.scopes||(ye.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ye;try{return ye=this,t()}finally{ye=n}}}on(){++this._on===1&&(this.prevScope=ye,ye=this)}off(){this._on>0&&--this._on===0&&(ye=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function $m(){return ye}let Ct;const Go=new WeakSet;class af{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ye&&ye.active&&ye.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Go.has(this)&&(Go.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hc(this),uf(this);const t=Ct,n=Le;Ct=this,Le=!0;try{return this.fn()}finally{hf(this),Ct=t,Le=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)al(t);this.deps=this.depsTail=void 0,Hc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Go.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){da(this)&&this.run()}get dirty(){return da(this)}}let lf=0,Ts,Is;function cf(e,t=!1){if(e.flags|=8,t){e.next=Is,Is=e;return}e.next=Ts,Ts=e}function il(){lf++}function ol(){if(--lf>0)return;if(Is){let t=Is;for(Is=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ts;){let t=Ts;for(Ts=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function uf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function hf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),al(r),Hm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function da(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ff(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ff(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Os)||(e.globalVersion=Os,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!da(e))))return;e.flags|=2;const t=e.dep,n=Ct,r=Le;Ct=e,Le=!0;try{uf(e);const s=e.fn(e._value);(t.version===0||Vn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Ct=n,Le=r,hf(e),e.flags&=-3}}function al(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)al(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Hm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Le=!0;const df=[];function hn(){df.push(Le),Le=!1}function fn(){const e=df.pop();Le=e===void 0?!0:e}function Hc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ct;Ct=void 0;try{t()}finally{Ct=n}}}let Os=0;class Gm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ll{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ct||!Le||Ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ct)n=this.activeLink=new Gm(Ct,this),Ct.deps?(n.prevDep=Ct.depsTail,Ct.depsTail.nextDep=n,Ct.depsTail=n):Ct.deps=Ct.depsTail=n,pf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ct.depsTail,n.nextDep=void 0,Ct.depsTail.nextDep=n,Ct.depsTail=n,Ct.deps===n&&(Ct.deps=r)}return n}trigger(t){this.version++,Os++,this.notify(t)}notify(t){il();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ol()}}}function pf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)pf(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const pa=new WeakMap,er=Symbol(""),ma=Symbol(""),Ms=Symbol("");function oe(e,t,n){if(Le&&Ct){let r=pa.get(e);r||pa.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new ll),s.map=r,s.key=n),s.track()}}function on(e,t,n,r,s,i){const a=pa.get(e);if(!a){Os++;return}const l=c=>{c&&c.trigger()};if(il(),t==="clear")a.forEach(l);else{const c=ot(e),h=c&&el(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,g)=>{(g==="length"||g===Ms||!qn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(Ms)),t){case"add":c?h&&l(a.get("length")):(l(a.get(er)),Cr(e)&&l(a.get(ma)));break;case"delete":c||(l(a.get(er)),Cr(e)&&l(a.get(ma)));break;case"set":Cr(e)&&l(a.get(er));break}}ol()}function Er(e){const t=It(e);return t===e?t:(oe(t,"iterate",Ms),De(e)?t:t.map(Fe))}function ao(e){return oe(e=It(e),"iterate",Ms),e}function Rn(e,t){return dn(e)?nr(e)?Or(Fe(t)):Or(t):Fe(t)}const zm={__proto__:null,[Symbol.iterator](){return zo(this,Symbol.iterator,e=>Rn(this,e))},concat(...e){return Er(this).concat(...e.map(t=>ot(t)?Er(t):t))},entries(){return zo(this,"entries",e=>(e[1]=Rn(this,e[1]),e))},every(e,t){return nn(this,"every",e,t,void 0,arguments)},filter(e,t){return nn(this,"filter",e,t,n=>n.map(r=>Rn(this,r)),arguments)},find(e,t){return nn(this,"find",e,t,n=>Rn(this,n),arguments)},findIndex(e,t){return nn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return nn(this,"findLast",e,t,n=>Rn(this,n),arguments)},findLastIndex(e,t){return nn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return nn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ko(this,"includes",e)},indexOf(...e){return Ko(this,"indexOf",e)},join(e){return Er(this).join(e)},lastIndexOf(...e){return Ko(this,"lastIndexOf",e)},map(e,t){return nn(this,"map",e,t,void 0,arguments)},pop(){return fs(this,"pop")},push(...e){return fs(this,"push",e)},reduce(e,...t){return Gc(this,"reduce",e,t)},reduceRight(e,...t){return Gc(this,"reduceRight",e,t)},shift(){return fs(this,"shift")},some(e,t){return nn(this,"some",e,t,void 0,arguments)},splice(...e){return fs(this,"splice",e)},toReversed(){return Er(this).toReversed()},toSorted(e){return Er(this).toSorted(e)},toSpliced(...e){return Er(this).toSpliced(...e)},unshift(...e){return fs(this,"unshift",e)},values(){return zo(this,"values",e=>Rn(this,e))}};function zo(e,t,n){const r=ao(e),s=r[t]();return r!==e&&!De(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Km=Array.prototype;function nn(e,t,n,r,s,i){const a=ao(e),l=a!==e&&!De(e),c=a[t];if(c!==Km[t]){const p=c.apply(e,i);return l?Fe(p):p}let h=n;a!==e&&(l?h=function(p,g){return n.call(this,Rn(e,p),g,e)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,e)}));const d=c.call(a,h,r);return l&&s?s(d):d}function Gc(e,t,n,r){const s=ao(e);let i=n;return s!==e&&(De(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Rn(e,l),c,e)}),s[t](i,...r)}function Ko(e,t,n){const r=It(e);oe(r,"iterate",Ms);const s=r[t](...n);return(s===-1||s===!1)&&hl(n[0])?(n[0]=It(n[0]),r[t](...n)):s}function fs(e,t,n=[]){hn(),il();const r=It(e)[t].apply(e,n);return ol(),fn(),r}const Wm=Ja("__proto__,__v_isRef,__isVue"),mf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(qn));function Qm(e){qn(e)||(e=String(e));const t=It(this);return oe(t,"has",e),t.hasOwnProperty(e)}class gf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?ig:vf:i?Ef:yf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!s){let c;if(a&&(c=zm[n]))return c;if(n==="hasOwnProperty")return Qm}const l=Reflect.get(t,n,le(t)?t:r);if((qn(n)?mf.has(n):Wm(n))||(s||oe(t,"get",n),i))return l;if(le(l)){const c=a&&el(n)?l:l.value;return s&&Nt(c)?_a(c):c}return Nt(l)?s?_a(l):lo(l):l}}class _f extends gf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];const a=ot(t)&&el(n);if(!this._isShallow){const h=dn(i);if(!De(r)&&!dn(r)&&(i=It(i),r=It(r)),!a&&le(i)&&!le(r))return h||(i.value=r),!0}const l=a?Number(n)<t.length:At(t,n),c=Reflect.set(t,n,r,le(t)?t:s);return t===It(s)&&(l?Vn(r,i)&&on(t,"set",n,r):on(t,"add",n,r)),c}deleteProperty(t,n){const r=At(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&on(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!qn(n)||!mf.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",ot(t)?"length":er),Reflect.ownKeys(t)}}class Xm extends gf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ym=new _f,Jm=new Xm,Zm=new _f(!0);const ga=e=>e,di=e=>Reflect.getPrototypeOf(e);function tg(e,t,n){return function(...r){const s=this.__v_raw,i=It(s),a=Cr(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=s[e](...r),d=n?ga:t?Or:Fe;return!t&&oe(i,"iterate",c?ma:er),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function pi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function eg(e,t){const n={get(s){const i=this.__v_raw,a=It(i),l=It(s);e||(Vn(s,l)&&oe(a,"get",s),oe(a,"get",l));const{has:c}=di(a),h=t?ga:e?Or:Fe;if(c.call(a,s))return h(i.get(s));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&oe(It(s),"iterate",er),s.size},has(s){const i=this.__v_raw,a=It(i),l=It(s);return e||(Vn(s,l)&&oe(a,"has",s),oe(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=It(l),h=t?ga:e?Or:Fe;return!e&&oe(c,"iterate",er),l.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return ce(n,e?{add:pi("add"),set:pi("set"),delete:pi("delete"),clear:pi("clear")}:{add(s){!t&&!De(s)&&!dn(s)&&(s=It(s));const i=It(this);return di(i).has.call(i,s)||(i.add(s),on(i,"add",s,s)),this},set(s,i){!t&&!De(i)&&!dn(i)&&(i=It(i));const a=It(this),{has:l,get:c}=di(a);let h=l.call(a,s);h||(s=It(s),h=l.call(a,s));const d=c.call(a,s);return a.set(s,i),h?Vn(i,d)&&on(a,"set",s,i):on(a,"add",s,i),this},delete(s){const i=It(this),{has:a,get:l}=di(i);let c=a.call(i,s);c||(s=It(s),c=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&on(i,"delete",s,void 0),h},clear(){const s=It(this),i=s.size!==0,a=s.clear();return i&&on(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=tg(s,e,t)}),n}function cl(e,t){const n=eg(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(At(n,s)&&s in r?n:r,s,i)}const ng={get:cl(!1,!1)},rg={get:cl(!1,!0)},sg={get:cl(!0,!1)};const yf=new WeakMap,Ef=new WeakMap,vf=new WeakMap,ig=new WeakMap;function og(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ag(e){return e.__v_skip||!Object.isExtensible(e)?0:og(xm(e))}function lo(e){return dn(e)?e:ul(e,!1,Ym,ng,yf)}function Tf(e){return ul(e,!1,Zm,rg,Ef)}function _a(e){return ul(e,!0,Jm,sg,vf)}function ul(e,t,n,r,s){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=ag(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function nr(e){return dn(e)?nr(e.__v_raw):!!(e&&e.__v_isReactive)}function dn(e){return!!(e&&e.__v_isReadonly)}function De(e){return!!(e&&e.__v_isShallow)}function hl(e){return e?!!e.__v_raw:!1}function It(e){const t=e&&e.__v_raw;return t?It(t):e}function lg(e){return!At(e,"__v_skip")&&Object.isExtensible(e)&&nf(e,"__v_skip",!0),e}const Fe=e=>Nt(e)?lo(e):e,Or=e=>Nt(e)?_a(e):e;function le(e){return e?e.__v_isRef===!0:!1}function ks(e){return If(e,!1)}function cg(e){return If(e,!0)}function If(e,t){return le(e)?e:new ug(e,t)}class ug{constructor(t,n){this.dep=new ll,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:It(t),this._value=n?t:Fe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||De(t)||dn(t);t=r?t:It(t),Vn(t,n)&&(this._rawValue=t,this._value=r?t:Fe(t),this.dep.trigger())}}function ln(e){return le(e)?e.value:e}const hg={get:(e,t,n)=>t==="__v_raw"?e:ln(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return le(s)&&!le(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Af(e){return nr(e)?e:new Proxy(e,hg)}class fg{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ll(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Os-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ct!==this)return cf(this,!0),!0}get value(){const t=this.dep.track();return ff(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function dg(e,t,n=!1){let r,s;return ct(e)?r=e:(r=e.get,s=e.set),new fg(r,s,n)}const mi={},xi=new WeakMap;let Yn;function pg(e,t=!1,n=Yn){if(n){let r=xi.get(n);r||xi.set(n,r=[]),r.push(e)}}function mg(e,t,n=St){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,h=W=>s?W:De(W)||s===!1||s===0?an(W,1):an(W);let d,p,g,v,V=!1,x=!1;if(le(e)?(p=()=>e.value,V=De(e)):nr(e)?(p=()=>h(e),V=!0):ot(e)?(x=!0,V=e.some(W=>nr(W)||De(W)),p=()=>e.map(W=>{if(le(W))return W.value;if(nr(W))return h(W);if(ct(W))return c?c(W,2):W()})):ct(e)?t?p=c?()=>c(e,2):e:p=()=>{if(g){hn();try{g()}finally{fn()}}const W=Yn;Yn=d;try{return c?c(e,3,[v]):e(v)}finally{Yn=W}}:p=We,t&&s){const W=p,lt=s===!0?1/0:s;p=()=>an(W(),lt)}const L=$m(),$=()=>{d.stop(),L&&L.active&&tl(L.effects,d)};if(i&&t){const W=t;t=(...lt)=>{W(...lt),$()}}let q=x?new Array(e.length).fill(mi):mi;const H=W=>{if(!(!(d.flags&1)||!d.dirty&&!W))if(t){const lt=d.run();if(s||V||(x?lt.some((ft,A)=>Vn(ft,q[A])):Vn(lt,q))){g&&g();const ft=Yn;Yn=d;try{const A=[lt,q===mi?void 0:x&&q[0]===mi?[]:q,v];q=lt,c?c(t,3,A):t(...A)}finally{Yn=ft}}}else d.run()};return l&&l(H),d=new af(p),d.scheduler=a?()=>a(H,!1):H,v=W=>pg(W,!1,d),g=d.onStop=()=>{const W=xi.get(d);if(W){if(c)c(W,4);else for(const lt of W)lt();xi.delete(d)}},t?r?H(!0):q=d.run():a?a(H.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function an(e,t=1/0,n){if(t<=0||!Nt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,le(e))an(e.value,t,n);else if(ot(e))for(let r=0;r<e.length;r++)an(e[r],t,n);else if(Yh(e)||Cr(e))e.forEach(r=>{an(r,t,n)});else if(tf(e)){for(const r in e)an(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&an(e[r],t,n)}return e}function Xs(e,t,n,r){try{return r?e(...r):e()}catch(s){co(s,t,n)}}function Ze(e,t,n,r){if(ct(e)){const s=Xs(e,t,n,r);return s&&Jh(s)&&s.catch(i=>{co(i,t,n)}),s}if(ot(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ze(e[i],t,n,r));return s}}function co(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||St;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,h)===!1)return}l=l.parent}if(i){hn(),Xs(i,null,10,[e,c,h]),fn();return}}gg(e,n,s,r,a)}function gg(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const de=[];let Ge=-1;const Pr=[];let bn=null,vr=0;const wf=Promise.resolve();let Oi=null;function Rf(e){const t=Oi||wf;return e?t.then(this?e.bind(this):e):t}function _g(e){let t=Ge+1,n=de.length;for(;t<n;){const r=t+n>>>1,s=de[r],i=Ls(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function fl(e){if(!(e.flags&1)){const t=Ls(e),n=de[de.length-1];!n||!(e.flags&2)&&t>=Ls(n)?de.push(e):de.splice(_g(t),0,e),e.flags|=1,bf()}}function bf(){Oi||(Oi=wf.then(Cf))}function yg(e){ot(e)?Pr.push(...e):bn&&e.id===-1?bn.splice(vr+1,0,e):e.flags&1||(Pr.push(e),e.flags|=1),bf()}function zc(e,t,n=Ge+1){for(;n<de.length;n++){const r=de[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;de.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Sf(e){if(Pr.length){const t=[...new Set(Pr)].sort((n,r)=>Ls(n)-Ls(r));if(Pr.length=0,bn){bn.push(...t);return}for(bn=t,vr=0;vr<bn.length;vr++){const n=bn[vr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bn=null,vr=0}}const Ls=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Cf(e){try{for(Ge=0;Ge<de.length;Ge++){const t=de[Ge];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Xs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ge<de.length;Ge++){const t=de[Ge];t&&(t.flags&=-2)}Ge=-1,de.length=0,Sf(),Oi=null,(de.length||Pr.length)&&Cf()}}let Ve=null,Pf=null;function Mi(e){const t=Ve;return Ve=e,Pf=e&&e.type.__scopeId||null,t}function ya(e,t=Ve,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Fi(-1);const i=Mi(t);let a;try{a=e(...s)}finally{Mi(i),r._d&&Fi(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Eg(e,t){if(Ve===null)return e;const n=po(Ve),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=St]=t[s];i&&(ct(i)&&(i={mounted:i,updated:i}),i.deep&&an(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Qn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(hn(),Ze(c,n,8,[e.el,l,e,t]),fn())}}function Ii(e,t){if(pe){let n=pe.provides;const r=pe.parent&&pe.parent.provides;r===n&&(n=pe.provides=Object.create(r)),n[e]=t}}function cn(e,t,n=!1){const r=y_();if(r||Vr){let s=Vr?Vr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ct(t)?t.call(r&&r.proxy):t}}const vg=Symbol.for("v-scx"),Tg=()=>cn(vg);function Ai(e,t,n){return Vf(e,t,n)}function Vf(e,t,n=St){const{immediate:r,deep:s,flush:i,once:a}=n,l=ce({},n),c=t&&r||!t&&i!=="post";let h;if(Us){if(i==="sync"){const v=Tg();h=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=We,v.resume=We,v.pause=We,v}}const d=pe;l.call=(v,V,x)=>Ze(v,d,V,x);let p=!1;i==="post"?l.scheduler=v=>{Re(v,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(v,V)=>{V?v():fl(v)}),l.augmentJob=v=>{t&&(v.flags|=4),p&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const g=mg(e,t,l);return Us&&(h?h.push(g):c&&g()),g}function Ig(e,t,n){const r=this.proxy,s=qt(e)?e.includes(".")?Df(r,e):()=>r[e]:e.bind(r,r);let i;ct(t)?i=t:(i=t.handler,n=t);const a=Ys(this),l=Vf(s,i.bind(r),n);return a(),l}function Df(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Ag=Symbol("_vte"),wg=e=>e.__isTeleport,Rg=Symbol("_leaveCb");function dl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,dl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Nf(e,t){return ct(e)?ce({name:e.name},t,{setup:e}):e}function xf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ki=new WeakMap;function As(e,t,n,r,s=!1){if(ot(e)){e.forEach((V,x)=>As(V,t&&(ot(t)?t[x]:t),n,r,s));return}if(ws(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&As(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?po(r.component):r.el,a=s?null:i,{i:l,r:c}=e,h=t&&t.r,d=l.refs===St?l.refs={}:l.refs,p=l.setupState,g=It(p),v=p===St?Xh:V=>At(g,V);if(h!=null&&h!==c){if(Kc(t),qt(h))d[h]=null,v(h)&&(p[h]=null);else if(le(h)){h.value=null;const V=t;V.k&&(d[V.k]=null)}}if(ct(c))Xs(c,l,12,[a,d]);else{const V=qt(c),x=le(c);if(V||x){const L=()=>{if(e.f){const $=V?v(c)?p[c]:d[c]:c.value;if(s)ot($)&&tl($,i);else if(ot($))$.includes(i)||$.push(i);else if(V)d[c]=[i],v(c)&&(p[c]=d[c]);else{const q=[i];c.value=q,e.k&&(d[e.k]=q)}}else V?(d[c]=a,v(c)&&(p[c]=a)):x&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const $=()=>{L(),ki.delete(e)};$.id=-1,ki.set(e,$),Re($,n)}else Kc(e),L()}}}function Kc(e){const t=ki.get(e);t&&(t.flags|=8,ki.delete(e))}oo().requestIdleCallback;oo().cancelIdleCallback;const ws=e=>!!e.type.__asyncLoader,Of=e=>e.type.__isKeepAlive;function bg(e,t){Mf(e,"a",t)}function Sg(e,t){Mf(e,"da",t)}function Mf(e,t,n=pe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(uo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Of(s.parent.vnode)&&Cg(r,t,n,s),s=s.parent}}function Cg(e,t,n,r){const s=uo(t,e,r,!0);Lf(()=>{tl(r[t],s)},n)}function uo(e,t,n=pe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{hn();const l=Ys(n),c=Ze(t,n,e,a);return l(),fn(),c});return r?s.unshift(i):s.push(i),i}}const _n=e=>(t,n=pe)=>{(!Us||e==="sp")&&uo(e,(...r)=>t(...r),n)},Pg=_n("bm"),kf=_n("m"),Vg=_n("bu"),Dg=_n("u"),Ng=_n("bum"),Lf=_n("um"),xg=_n("sp"),Og=_n("rtg"),Mg=_n("rtc");function kg(e,t=pe){uo("ec",e,t)}const Lg=Symbol.for("v-ndc");function Ff(e,t,n,r){let s;const i=n,a=ot(e);if(a||qt(e)){const l=a&&nr(e);let c=!1,h=!1;l&&(c=!De(e),h=dn(e),e=ao(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(c?h?Or(Fe(e[d])):Fe(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Nt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const Ea=e=>e?rd(e)?po(e):Ea(e.parent):null,Rs=ce(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ea(e.parent),$root:e=>Ea(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Bf(e),$forceUpdate:e=>e.f||(e.f=()=>{fl(e.update)}),$nextTick:e=>e.n||(e.n=Rf.bind(e.proxy)),$watch:e=>Ig.bind(e)}),Wo=(e,t)=>e!==St&&!e.__isScriptSetup&&At(e,t),Fg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Wo(r,t))return a[t]=1,r[t];if(s!==St&&At(s,t))return a[t]=2,s[t];if(At(i,t))return a[t]=3,i[t];if(n!==St&&At(n,t))return a[t]=4,n[t];va&&(a[t]=0)}}const h=Rs[t];let d,p;if(h)return t==="$attrs"&&oe(e.attrs,"get",""),h(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==St&&At(n,t))return a[t]=4,n[t];if(p=c.config.globalProperties,At(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Wo(s,t)?(s[t]=n,!0):r!==St&&At(r,t)?(r[t]=n,!0):At(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,props:i,type:a}},l){let c;return!!(n[l]||e!==St&&l[0]!=="$"&&At(e,l)||Wo(t,l)||At(i,l)||At(r,l)||At(Rs,l)||At(s.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:At(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wc(e){return ot(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let va=!0;function Ug(e){const t=Bf(e),n=e.proxy,r=e.ctx;va=!1,t.beforeCreate&&Qc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:v,updated:V,activated:x,deactivated:L,beforeDestroy:$,beforeUnmount:q,destroyed:H,unmounted:W,render:lt,renderTracked:ft,renderTriggered:A,errorCaptured:y,serverPrefetch:I,expose:R,inheritAttrs:w,components:S,directives:E,filters:Lt}=t;if(h&&Bg(h,r,null),a)for(const vt in a){const gt=a[vt];ct(gt)&&(r[vt]=gt.bind(n))}if(s){const vt=s.call(n,n);Nt(vt)&&(e.data=lo(vt))}if(va=!0,i)for(const vt in i){const gt=i[vt],_e=ct(gt)?gt.bind(n,n):ct(gt.get)?gt.get.bind(n,n):We,je=!ct(gt)&&ct(gt.set)?gt.set.bind(n):We,Te=Me({get:_e,set:je});Object.defineProperty(r,vt,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Xt=>Te.value=Xt})}if(l)for(const vt in l)Uf(l[vt],r,n,vt);if(c){const vt=ct(c)?c.call(n):c;Reflect.ownKeys(vt).forEach(gt=>{Ii(gt,vt[gt])})}d&&Qc(d,e,"c");function Ft(vt,gt){ot(gt)?gt.forEach(_e=>vt(_e.bind(n))):gt&&vt(gt.bind(n))}if(Ft(Pg,p),Ft(kf,g),Ft(Vg,v),Ft(Dg,V),Ft(bg,x),Ft(Sg,L),Ft(kg,y),Ft(Mg,ft),Ft(Og,A),Ft(Ng,q),Ft(Lf,W),Ft(xg,I),ot(R))if(R.length){const vt=e.exposed||(e.exposed={});R.forEach(gt=>{Object.defineProperty(vt,gt,{get:()=>n[gt],set:_e=>n[gt]=_e,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===We&&(e.render=lt),w!=null&&(e.inheritAttrs=w),S&&(e.components=S),E&&(e.directives=E),I&&xf(e)}function Bg(e,t,n=We){ot(e)&&(e=Ta(e));for(const r in e){const s=e[r];let i;Nt(s)?"default"in s?i=cn(s.from||r,s.default,!0):i=cn(s.from||r):i=cn(s),le(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Qc(e,t,n){Ze(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Uf(e,t,n,r){let s=r.includes(".")?Df(n,r):()=>n[r];if(qt(e)){const i=t[e];ct(i)&&Ai(s,i)}else if(ct(e))Ai(s,e.bind(n));else if(Nt(e))if(ot(e))e.forEach(i=>Uf(i,t,n,r));else{const i=ct(e.handler)?e.handler.bind(n):t[e.handler];ct(i)&&Ai(s,i,e)}}function Bf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(h=>Li(c,h,a,!0)),Li(c,t,a)),Nt(t)&&i.set(t,c),c}function Li(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Li(e,i,n,!0),s&&s.forEach(a=>Li(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=jg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const jg={data:Xc,props:Yc,emits:Yc,methods:ms,computed:ms,beforeCreate:he,created:he,beforeMount:he,mounted:he,beforeUpdate:he,updated:he,beforeDestroy:he,beforeUnmount:he,destroyed:he,unmounted:he,activated:he,deactivated:he,errorCaptured:he,serverPrefetch:he,components:ms,directives:ms,watch:$g,provide:Xc,inject:qg};function Xc(e,t){return t?e?function(){return ce(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function qg(e,t){return ms(Ta(e),Ta(t))}function Ta(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function he(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?ce(Object.create(null),e,t):t}function Yc(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:ce(Object.create(null),Wc(e),Wc(t??{})):t}function $g(e,t){if(!e)return t;if(!t)return e;const n=ce(Object.create(null),e);for(const r in t)n[r]=he(e[r],t[r]);return n}function jf(){return{app:null,config:{isNativeTag:Xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hg=0;function Gg(e,t){return function(r,s=null){ct(r)||(r=ce({},r)),s!=null&&!Nt(s)&&(s=null);const i=jf(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:Hg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:w_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ct(d.install)?(a.add(d),d.install(h,...p)):ct(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const v=h._ceVNode||me(r,s);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),e(v,d,g),c=!0,h._container=d,d.__vue_app__=h,po(v.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Ze(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=Vr;Vr=h;try{return d()}finally{Vr=p}}};return h}}let Vr=null;const zg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Mn(t)}Modifiers`]||e[`${$n(t)}Modifiers`];function Kg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||St;let s=n;const i=t.startsWith("update:"),a=i&&zg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>qt(d)?d.trim():d)),a.number&&(s=n.map(nl)));let l,c=r[l=$o(t)]||r[l=$o(Mn(t))];!c&&i&&(c=r[l=$o($n(t))]),c&&Ze(c,e,6,s);const h=r[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ze(h,e,6,s)}}const Wg=new WeakMap;function qf(e,t,n=!1){const r=n?Wg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ct(e)){const c=h=>{const d=qf(h,t,!0);d&&(l=!0,ce(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Nt(e)&&r.set(e,null),null):(ot(i)?i.forEach(c=>a[c]=null):ce(a,i),Nt(e)&&r.set(e,a),a)}function ho(e,t){return!e||!ro(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(e,t[0].toLowerCase()+t.slice(1))||At(e,$n(t))||At(e,t))}function Jc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:v,ctx:V,inheritAttrs:x}=e,L=Mi(e);let $,q;try{if(n.shapeFlag&4){const W=s||r,lt=W;$=Ke(h.call(lt,W,d,p,v,g,V)),q=l}else{const W=t;$=Ke(W.length>1?W(p,{attrs:l,slots:a,emit:c}):W(p,null)),q=t.props?l:Qg(l)}}catch(W){bs.length=0,co(W,e,1),$=me(Mr)}let H=$;if(q&&x!==!1){const W=Object.keys(q),{shapeFlag:lt}=H;W.length&&lt&7&&(i&&W.some(Za)&&(q=Xg(q,i)),H=kr(H,q,!1,!0))}return n.dirs&&(H=kr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&dl(H,n.transition),$=H,Mi(L),$}const Qg=e=>{let t;for(const n in e)(n==="class"||n==="style"||ro(n))&&((t||(t={}))[n]=e[n]);return t},Xg=(e,t)=>{const n={};for(const r in e)(!Za(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Yg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Zc(r,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(a[g]!==r[g]&&!ho(h,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Zc(r,a,h):!0:!!a;return!1}function Zc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ho(n,i))return!0}return!1}function Jg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const $f={},Hf=()=>Object.create($f),Gf=e=>Object.getPrototypeOf(e)===$f;function Zg(e,t,n,r=!1){const s={},i=Hf();e.propsDefaults=Object.create(null),zf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Tf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function t_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=It(s),[c]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(ho(e.emitsOptions,g))continue;const v=t[g];if(c)if(At(i,g))v!==i[g]&&(i[g]=v,h=!0);else{const V=Mn(g);s[V]=Ia(c,l,V,v,e,!1)}else v!==i[g]&&(i[g]=v,h=!0)}}}else{zf(e,t,s,i)&&(h=!0);let d;for(const p in l)(!t||!At(t,p)&&((d=$n(p))===p||!At(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=Ia(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!At(t,p))&&(delete i[p],h=!0)}h&&on(e.attrs,"set","")}function zf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(vs(c))continue;const h=t[c];let d;s&&At(s,d=Mn(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:ho(e.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(i){const c=It(n),h=l||St;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Ia(s,c,p,h[p],e,!At(h,p))}}return a}function Ia(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=At(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ct(c)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=Ys(s);r=h[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===$n(n))&&(r=!0))}return r}const e_=new WeakMap;function Kf(e,t,n=!1){const r=n?e_:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!ct(e)){const d=p=>{c=!0;const[g,v]=Kf(p,t,!0);ce(a,g),v&&l.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Nt(e)&&r.set(e,Sr),Sr;if(ot(i))for(let d=0;d<i.length;d++){const p=Mn(i[d]);tu(p)&&(a[p]=St)}else if(i)for(const d in i){const p=Mn(d);if(tu(p)){const g=i[d],v=a[p]=ot(g)||ct(g)?{type:g}:ce({},g),V=v.type;let x=!1,L=!0;if(ot(V))for(let $=0;$<V.length;++$){const q=V[$],H=ct(q)&&q.name;if(H==="Boolean"){x=!0;break}else H==="String"&&(L=!1)}else x=ct(V)&&V.name==="Boolean";v[0]=x,v[1]=L,(x||At(v,"default"))&&l.push(p)}}const h=[a,l];return Nt(e)&&r.set(e,h),h}function tu(e){return e[0]!=="$"&&!vs(e)}const pl=e=>e==="_"||e==="_ctx"||e==="$stable",ml=e=>ot(e)?e.map(Ke):[Ke(e)],n_=(e,t,n)=>{if(t._n)return t;const r=ya((...s)=>ml(t(...s)),n);return r._c=!1,r},Wf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(pl(s))continue;const i=e[s];if(ct(i))t[s]=n_(s,i,r);else if(i!=null){const a=ml(i);t[s]=()=>a}}},Qf=(e,t)=>{const n=ml(t);e.slots.default=()=>n},Xf=(e,t,n)=>{for(const r in t)(n||!pl(r))&&(e[r]=t[r])},r_=(e,t,n)=>{const r=e.slots=Hf();if(e.vnode.shapeFlag&32){const s=t._;s?(Xf(r,t,n),n&&nf(r,"_",s,!0)):Wf(t,r)}else t&&Qf(e,t)},s_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=St;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Xf(s,t,n):(i=!t.$stable,Wf(t,s)),a=t}else t&&(Qf(e,t),a={default:1});if(i)for(const l in s)!pl(l)&&a[l]==null&&delete s[l]},Re=c_;function i_(e){return o_(e)}function o_(e,t){const n=oo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:v=We,insertStaticContent:V}=e,x=(_,T,b,D=null,F=null,N=null,z=void 0,j=null,B=!!T.dynamicChildren)=>{if(_===T)return;_&&!ds(_,T)&&(D=O(_),Xt(_,F,N,!0),_=null),T.patchFlag===-2&&(B=!1,T.dynamicChildren=null);const{type:U,ref:nt,shapeFlag:Q}=T;switch(U){case fo:L(_,T,b,D);break;case Mr:$(_,T,b,D);break;case Xo:_==null&&q(T,b,D,z);break;case be:S(_,T,b,D,F,N,z,j,B);break;default:Q&1?lt(_,T,b,D,F,N,z,j,B):Q&6?E(_,T,b,D,F,N,z,j,B):(Q&64||Q&128)&&U.process(_,T,b,D,F,N,z,j,B,Z)}nt!=null&&F?As(nt,_&&_.ref,N,T||_,!T):nt==null&&_&&_.ref!=null&&As(_.ref,null,N,_,!0)},L=(_,T,b,D)=>{if(_==null)r(T.el=l(T.children),b,D);else{const F=T.el=_.el;T.children!==_.children&&h(F,T.children)}},$=(_,T,b,D)=>{_==null?r(T.el=c(T.children||""),b,D):T.el=_.el},q=(_,T,b,D)=>{[_.el,_.anchor]=V(_.children,T,b,D,_.el,_.anchor)},H=({el:_,anchor:T},b,D)=>{let F;for(;_&&_!==T;)F=g(_),r(_,b,D),_=F;r(T,b,D)},W=({el:_,anchor:T})=>{let b;for(;_&&_!==T;)b=g(_),s(_),_=b;s(T)},lt=(_,T,b,D,F,N,z,j,B)=>{if(T.type==="svg"?z="svg":T.type==="math"&&(z="mathml"),_==null)ft(T,b,D,F,N,z,j,B);else{const U=_.el&&_.el._isVueCE?_.el:null;try{U&&U._beginPatch(),I(_,T,F,N,z,j,B)}finally{U&&U._endPatch()}}},ft=(_,T,b,D,F,N,z,j)=>{let B,U;const{props:nt,shapeFlag:Q,transition:tt,dirs:rt}=_;if(B=_.el=a(_.type,N,nt&&nt.is,nt),Q&8?d(B,_.children):Q&16&&y(_.children,B,null,D,F,Qo(_,N),z,j),rt&&Qn(_,null,D,"created"),A(B,_,_.scopeId,z,D),nt){for(const Rt in nt)Rt!=="value"&&!vs(Rt)&&i(B,Rt,null,nt[Rt],N,D);"value"in nt&&i(B,"value",null,nt.value,N),(U=nt.onVnodeBeforeMount)&&He(U,D,_)}rt&&Qn(_,null,D,"beforeMount");const ht=a_(F,tt);ht&&tt.beforeEnter(B),r(B,T,b),((U=nt&&nt.onVnodeMounted)||ht||rt)&&Re(()=>{U&&He(U,D,_),ht&&tt.enter(B),rt&&Qn(_,null,D,"mounted")},F)},A=(_,T,b,D,F)=>{if(b&&v(_,b),D)for(let N=0;N<D.length;N++)v(_,D[N]);if(F){let N=F.subTree;if(T===N||td(N.type)&&(N.ssContent===T||N.ssFallback===T)){const z=F.vnode;A(_,z,z.scopeId,z.slotScopeIds,F.parent)}}},y=(_,T,b,D,F,N,z,j,B=0)=>{for(let U=B;U<_.length;U++){const nt=_[U]=j?Sn(_[U]):Ke(_[U]);x(null,nt,T,b,D,F,N,z,j)}},I=(_,T,b,D,F,N,z)=>{const j=T.el=_.el;let{patchFlag:B,dynamicChildren:U,dirs:nt}=T;B|=_.patchFlag&16;const Q=_.props||St,tt=T.props||St;let rt;if(b&&Xn(b,!1),(rt=tt.onVnodeBeforeUpdate)&&He(rt,b,T,_),nt&&Qn(T,_,b,"beforeUpdate"),b&&Xn(b,!0),(Q.innerHTML&&tt.innerHTML==null||Q.textContent&&tt.textContent==null)&&d(j,""),U?R(_.dynamicChildren,U,j,b,D,Qo(T,F),N):z||gt(_,T,j,null,b,D,Qo(T,F),N,!1),B>0){if(B&16)w(j,Q,tt,b,F);else if(B&2&&Q.class!==tt.class&&i(j,"class",null,tt.class,F),B&4&&i(j,"style",Q.style,tt.style,F),B&8){const ht=T.dynamicProps;for(let Rt=0;Rt<ht.length;Rt++){const Et=ht[Rt],ne=Q[Et],re=tt[Et];(re!==ne||Et==="value")&&i(j,Et,ne,re,F,b)}}B&1&&_.children!==T.children&&d(j,T.children)}else!z&&U==null&&w(j,Q,tt,b,F);((rt=tt.onVnodeUpdated)||nt)&&Re(()=>{rt&&He(rt,b,T,_),nt&&Qn(T,_,b,"updated")},D)},R=(_,T,b,D,F,N,z)=>{for(let j=0;j<T.length;j++){const B=_[j],U=T[j],nt=B.el&&(B.type===be||!ds(B,U)||B.shapeFlag&198)?p(B.el):b;x(B,U,nt,null,D,F,N,z,!0)}},w=(_,T,b,D,F)=>{if(T!==b){if(T!==St)for(const N in T)!vs(N)&&!(N in b)&&i(_,N,T[N],null,F,D);for(const N in b){if(vs(N))continue;const z=b[N],j=T[N];z!==j&&N!=="value"&&i(_,N,j,z,F,D)}"value"in b&&i(_,"value",T.value,b.value,F)}},S=(_,T,b,D,F,N,z,j,B)=>{const U=T.el=_?_.el:l(""),nt=T.anchor=_?_.anchor:l("");let{patchFlag:Q,dynamicChildren:tt,slotScopeIds:rt}=T;rt&&(j=j?j.concat(rt):rt),_==null?(r(U,b,D),r(nt,b,D),y(T.children||[],b,nt,F,N,z,j,B)):Q>0&&Q&64&&tt&&_.dynamicChildren&&_.dynamicChildren.length===tt.length?(R(_.dynamicChildren,tt,b,F,N,z,j),(T.key!=null||F&&T===F.subTree)&&Yf(_,T,!0)):gt(_,T,b,nt,F,N,z,j,B)},E=(_,T,b,D,F,N,z,j,B)=>{T.slotScopeIds=j,_==null?T.shapeFlag&512?F.ctx.activate(T,b,D,z,B):Lt(T,b,D,F,N,z,B):ge(_,T,B)},Lt=(_,T,b,D,F,N,z)=>{const j=_.component=__(_,D,F);if(Of(_)&&(j.ctx.renderer=Z),E_(j,!1,z),j.asyncDep){if(F&&F.registerDep(j,Ft,z),!_.el){const B=j.subTree=me(Mr);$(null,B,T,b),_.placeholder=B.el}}else Ft(j,_,T,b,F,N,z)},ge=(_,T,b)=>{const D=T.component=_.component;if(Yg(_,T,b))if(D.asyncDep&&!D.asyncResolved){vt(D,T,b);return}else D.next=T,D.update();else T.el=_.el,D.vnode=T},Ft=(_,T,b,D,F,N,z)=>{const j=()=>{if(_.isMounted){let{next:Q,bu:tt,u:rt,parent:ht,vnode:Rt}=_;{const Ae=Jf(_);if(Ae){Q&&(Q.el=Rt.el,vt(_,Q,z)),Ae.asyncDep.then(()=>{_.isUnmounted||j()});return}}let Et=Q,ne;Xn(_,!1),Q?(Q.el=Rt.el,vt(_,Q,z)):Q=Rt,tt&&Ti(tt),(ne=Q.props&&Q.props.onVnodeBeforeUpdate)&&He(ne,ht,Q,Rt),Xn(_,!0);const re=Jc(_),Ie=_.subTree;_.subTree=re,x(Ie,re,p(Ie.el),O(Ie),_,F,N),Q.el=re.el,Et===null&&Jg(_,re.el),rt&&Re(rt,F),(ne=Q.props&&Q.props.onVnodeUpdated)&&Re(()=>He(ne,ht,Q,Rt),F)}else{let Q;const{el:tt,props:rt}=T,{bm:ht,m:Rt,parent:Et,root:ne,type:re}=_,Ie=ws(T);Xn(_,!1),ht&&Ti(ht),!Ie&&(Q=rt&&rt.onVnodeBeforeMount)&&He(Q,Et,T),Xn(_,!0);{ne.ce&&ne.ce._def.shadowRoot!==!1&&ne.ce._injectChildStyle(re);const Ae=_.subTree=Jc(_);x(null,Ae,b,D,_,F,N),T.el=Ae.el}if(Rt&&Re(Rt,F),!Ie&&(Q=rt&&rt.onVnodeMounted)){const Ae=T;Re(()=>He(Q,Et,Ae),F)}(T.shapeFlag&256||Et&&ws(Et.vnode)&&Et.vnode.shapeFlag&256)&&_.a&&Re(_.a,F),_.isMounted=!0,T=b=D=null}};_.scope.on();const B=_.effect=new af(j);_.scope.off();const U=_.update=B.run.bind(B),nt=_.job=B.runIfDirty.bind(B);nt.i=_,nt.id=_.uid,B.scheduler=()=>fl(nt),Xn(_,!0),U()},vt=(_,T,b)=>{T.component=_;const D=_.vnode.props;_.vnode=T,_.next=null,t_(_,T.props,D,b),s_(_,T.children,b),hn(),zc(_),fn()},gt=(_,T,b,D,F,N,z,j,B=!1)=>{const U=_&&_.children,nt=_?_.shapeFlag:0,Q=T.children,{patchFlag:tt,shapeFlag:rt}=T;if(tt>0){if(tt&128){je(U,Q,b,D,F,N,z,j,B);return}else if(tt&256){_e(U,Q,b,D,F,N,z,j,B);return}}rt&8?(nt&16&&ee(U,F,N),Q!==U&&d(b,Q)):nt&16?rt&16?je(U,Q,b,D,F,N,z,j,B):ee(U,F,N,!0):(nt&8&&d(b,""),rt&16&&y(Q,b,D,F,N,z,j,B))},_e=(_,T,b,D,F,N,z,j,B)=>{_=_||Sr,T=T||Sr;const U=_.length,nt=T.length,Q=Math.min(U,nt);let tt;for(tt=0;tt<Q;tt++){const rt=T[tt]=B?Sn(T[tt]):Ke(T[tt]);x(_[tt],rt,b,null,F,N,z,j,B)}U>nt?ee(_,F,N,!0,!1,Q):y(T,b,D,F,N,z,j,B,Q)},je=(_,T,b,D,F,N,z,j,B)=>{let U=0;const nt=T.length;let Q=_.length-1,tt=nt-1;for(;U<=Q&&U<=tt;){const rt=_[U],ht=T[U]=B?Sn(T[U]):Ke(T[U]);if(ds(rt,ht))x(rt,ht,b,null,F,N,z,j,B);else break;U++}for(;U<=Q&&U<=tt;){const rt=_[Q],ht=T[tt]=B?Sn(T[tt]):Ke(T[tt]);if(ds(rt,ht))x(rt,ht,b,null,F,N,z,j,B);else break;Q--,tt--}if(U>Q){if(U<=tt){const rt=tt+1,ht=rt<nt?T[rt].el:D;for(;U<=tt;)x(null,T[U]=B?Sn(T[U]):Ke(T[U]),b,ht,F,N,z,j,B),U++}}else if(U>tt)for(;U<=Q;)Xt(_[U],F,N,!0),U++;else{const rt=U,ht=U,Rt=new Map;for(U=ht;U<=tt;U++){const Yt=T[U]=B?Sn(T[U]):Ke(T[U]);Yt.key!=null&&Rt.set(Yt.key,U)}let Et,ne=0;const re=tt-ht+1;let Ie=!1,Ae=0;const Oe=new Array(re);for(U=0;U<re;U++)Oe[U]=0;for(U=rt;U<=Q;U++){const Yt=_[U];if(ne>=re){Xt(Yt,F,N,!0);continue}let Kt;if(Yt.key!=null)Kt=Rt.get(Yt.key);else for(Et=ht;Et<=tt;Et++)if(Oe[Et-ht]===0&&ds(Yt,T[Et])){Kt=Et;break}Kt===void 0?Xt(Yt,F,N,!0):(Oe[Kt-ht]=U+1,Kt>=Ae?Ae=Kt:Ie=!0,x(Yt,T[Kt],b,null,F,N,z,j,B),ne++)}const mr=Ie?l_(Oe):Sr;for(Et=mr.length-1,U=re-1;U>=0;U--){const Yt=ht+U,Kt=T[Yt],Yr=T[Yt+1],Hn=Yt+1<nt?Yr.el||Zf(Yr):D;Oe[U]===0?x(null,Kt,b,Hn,F,N,z,j,B):Ie&&(Et<0||U!==mr[Et]?Te(Kt,b,Hn,2):Et--)}}},Te=(_,T,b,D,F=null)=>{const{el:N,type:z,transition:j,children:B,shapeFlag:U}=_;if(U&6){Te(_.component.subTree,T,b,D);return}if(U&128){_.suspense.move(T,b,D);return}if(U&64){z.move(_,T,b,Z);return}if(z===be){r(N,T,b);for(let Q=0;Q<B.length;Q++)Te(B[Q],T,b,D);r(_.anchor,T,b);return}if(z===Xo){H(_,T,b);return}if(D!==2&&U&1&&j)if(D===0)j.beforeEnter(N),r(N,T,b),Re(()=>j.enter(N),F);else{const{leave:Q,delayLeave:tt,afterLeave:rt}=j,ht=()=>{_.ctx.isUnmounted?s(N):r(N,T,b)},Rt=()=>{N._isLeaving&&N[Rg](!0),Q(N,()=>{ht(),rt&&rt()})};tt?tt(N,ht,Rt):Rt()}else r(N,T,b)},Xt=(_,T,b,D=!1,F=!1)=>{const{type:N,props:z,ref:j,children:B,dynamicChildren:U,shapeFlag:nt,patchFlag:Q,dirs:tt,cacheIndex:rt}=_;if(Q===-2&&(F=!1),j!=null&&(hn(),As(j,null,b,_,!0),fn()),rt!=null&&(T.renderCache[rt]=void 0),nt&256){T.ctx.deactivate(_);return}const ht=nt&1&&tt,Rt=!ws(_);let Et;if(Rt&&(Et=z&&z.onVnodeBeforeUnmount)&&He(Et,T,_),nt&6)xe(_.component,b,D);else{if(nt&128){_.suspense.unmount(b,D);return}ht&&Qn(_,null,T,"beforeUnmount"),nt&64?_.type.remove(_,T,b,Z,D):U&&!U.hasOnce&&(N!==be||Q>0&&Q&64)?ee(U,T,b,!1,!0):(N===be&&Q&384||!F&&nt&16)&&ee(B,T,b),D&&en(_)}(Rt&&(Et=z&&z.onVnodeUnmounted)||ht)&&Re(()=>{Et&&He(Et,T,_),ht&&Qn(_,null,T,"unmounted")},b)},en=_=>{const{type:T,el:b,anchor:D,transition:F}=_;if(T===be){Ne(b,D);return}if(T===Xo){W(_);return}const N=()=>{s(b),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(_.shapeFlag&1&&F&&!F.persisted){const{leave:z,delayLeave:j}=F,B=()=>z(b,N);j?j(_.el,N,B):B()}else N()},Ne=(_,T)=>{let b;for(;_!==T;)b=g(_),s(_),_=b;s(T)},xe=(_,T,b)=>{const{bum:D,scope:F,job:N,subTree:z,um:j,m:B,a:U}=_;eu(B),eu(U),D&&Ti(D),F.stop(),N&&(N.flags|=8,Xt(z,_,T,b)),j&&Re(j,T),Re(()=>{_.isUnmounted=!0},T)},ee=(_,T,b,D=!1,F=!1,N=0)=>{for(let z=N;z<_.length;z++)Xt(_[z],T,b,D,F)},O=_=>{if(_.shapeFlag&6)return O(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const T=g(_.anchor||_.el),b=T&&T[Ag];return b?g(b):T};let Y=!1;const K=(_,T,b)=>{let D;_==null?T._vnode&&(Xt(T._vnode,null,null,!0),D=T._vnode.component):x(T._vnode||null,_,T,null,null,null,b),T._vnode=_,Y||(Y=!0,zc(D),Sf(),Y=!1)},Z={p:x,um:Xt,m:Te,r:en,mt:Lt,mc:y,pc:gt,pbc:R,n:O,o:e};return{render:K,hydrate:void 0,createApp:Gg(K)}}function Qo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Xn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function a_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Yf(e,t,n=!1){const r=e.children,s=t.children;if(ot(r)&&ot(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Sn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Yf(a,l)),l.type===fo&&(l.patchFlag!==-1?l.el=a.el:l.__elIndex=i+(e.type===be?1:0)),l.type===Mr&&!l.el&&(l.el=a.el)}}function l_(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const h=e[r];if(h!==0){if(s=n[n.length-1],e[s]<h){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Jf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Jf(t)}function eu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Zf(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Zf(t.subTree):null}const td=e=>e.__isSuspense;function c_(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):yg(e)}const be=Symbol.for("v-fgt"),fo=Symbol.for("v-txt"),Mr=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),bs=[];let Se=null;function rr(e=!1){bs.push(Se=e?null:[])}function u_(){bs.pop(),Se=bs[bs.length-1]||null}let Fs=1;function Fi(e,t=!1){Fs+=e,e<0&&Se&&t&&(Se.hasOnce=!0)}function h_(e){return e.dynamicChildren=Fs>0?Se||Sr:null,u_(),Fs>0&&Se&&Se.push(e),e}function sr(e,t,n,r,s,i){return h_(ve(e,t,n,r,s,i,!0))}function Ui(e){return e?e.__v_isVNode===!0:!1}function ds(e,t){return e.type===t.type&&e.key===t.key}const ed=({key:e})=>e??null,wi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?qt(e)||le(e)||ct(e)?{i:Ve,r:e,k:t,f:!!n}:e:null);function ve(e,t=null,n=null,r=0,s=null,i=e===be?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ed(t),ref:t&&wi(t),scopeId:Pf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ve};return l?(gl(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=qt(n)?8:16),Fs>0&&!a&&Se&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Se.push(c),c}const me=f_;function f_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Lg)&&(e=Mr),Ui(e)){const l=kr(e,t,!0);return n&&gl(l,n),Fs>0&&!i&&Se&&(l.shapeFlag&6?Se[Se.indexOf(e)]=l:Se.push(l)),l.patchFlag=-2,l}if(A_(e)&&(e=e.__vccOpts),t){t=d_(t);let{class:l,style:c}=t;l&&!qt(l)&&(t.class=sl(l)),Nt(c)&&(hl(c)&&!ot(c)&&(c=ce({},c)),t.style=rl(c))}const a=qt(e)?1:td(e)?128:wg(e)?64:Nt(e)?4:ct(e)?2:0;return ve(e,t,n,r,s,a,i,!0)}function d_(e){return e?hl(e)||Gf(e)?ce({},e):e:null}function kr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,h=t?p_(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&ed(h),ref:t&&t.ref?n&&i?ot(i)?i.concat(wi(t)):[i,wi(t)]:wi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==be?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&kr(e.ssContent),ssFallback:e.ssFallback&&kr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&dl(d,c.clone(d)),d}function nd(e=" ",t=0){return me(fo,null,e,t)}function Ke(e){return e==null||typeof e=="boolean"?me(Mr):ot(e)?me(be,null,e.slice()):Ui(e)?Sn(e):me(fo,null,String(e))}function Sn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:kr(e)}function gl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),gl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Gf(t)?t._ctx=Ve:s===3&&Ve&&(Ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:Ve},n=32):(t=String(t),r&64?(n=16,t=[nd(t)]):n=8);e.children=t,e.shapeFlag|=n}function p_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=sl([t.class,r.class]));else if(s==="style")t.style=rl([t.style,r.style]);else if(ro(s)){const i=t[s],a=r[s];a&&i!==a&&!(ot(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function He(e,t,n,r=null){Ze(e,t,7,[n,r])}const m_=jf();let g_=0;function __(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||m_,i={uid:g_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kf(r,s),emitsOptions:qf(r,s),emit:null,emitted:null,propsDefaults:St,inheritAttrs:r.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Kg.bind(null,i),e.ce&&e.ce(i),i}let pe=null;const y_=()=>pe||Ve;let Bi,Aa;{const e=oo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Bi=t("__VUE_INSTANCE_SETTERS__",n=>pe=n),Aa=t("__VUE_SSR_SETTERS__",n=>Us=n)}const Ys=e=>{const t=pe;return Bi(e),e.scope.on(),()=>{e.scope.off(),Bi(t)}},nu=()=>{pe&&pe.scope.off(),Bi(null)};function rd(e){return e.vnode.shapeFlag&4}let Us=!1;function E_(e,t=!1,n=!1){t&&Aa(t);const{props:r,children:s}=e.vnode,i=rd(e);Zg(e,r,i,t),r_(e,s,n||t);const a=i?v_(e,t):void 0;return t&&Aa(!1),a}function v_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Fg);const{setup:r}=n;if(r){hn();const s=e.setupContext=r.length>1?I_(e):null,i=Ys(e),a=Xs(r,e,0,[e.props,s]),l=Jh(a);if(fn(),i(),(l||e.sp)&&!ws(e)&&xf(e),l){if(a.then(nu,nu),t)return a.then(c=>{ru(e,c)}).catch(c=>{co(c,e,0)});e.asyncDep=a}else ru(e,a)}else sd(e)}function ru(e,t,n){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=Af(t)),sd(e)}function sd(e,t,n){const r=e.type;e.render||(e.render=r.render||We);{const s=Ys(e);hn();try{Ug(e)}finally{fn(),s()}}}const T_={get(e,t){return oe(e,"get",""),e[t]}};function I_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,T_),slots:e.slots,emit:e.emit,expose:t}}function po(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Af(lg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rs)return Rs[n](e)},has(t,n){return n in t||n in Rs}})):e.proxy}function A_(e){return ct(e)&&"__vccOpts"in e}const Me=(e,t)=>dg(e,t,Us);function id(e,t,n){try{Fi(-1);const r=arguments.length;return r===2?Nt(t)&&!ot(t)?Ui(t)?me(e,null,[t]):me(e,t):me(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ui(n)&&(n=[n]),me(e,t,n))}finally{Fi(1)}}const w_="3.5.26";let wa;const su=typeof window<"u"&&window.trustedTypes;if(su)try{wa=su.createPolicy("vue",{createHTML:e=>e})}catch{}const od=wa?e=>wa.createHTML(e):e=>e,R_="http://www.w3.org/2000/svg",b_="http://www.w3.org/1998/Math/MathML",sn=typeof document<"u"?document:null,iu=sn&&sn.createElement("template"),S_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?sn.createElementNS(R_,e):t==="mathml"?sn.createElementNS(b_,e):n?sn.createElement(e,{is:n}):sn.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>sn.createTextNode(e),createComment:e=>sn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{iu.innerHTML=od(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=iu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},C_=Symbol("_vtc");function P_(e,t,n){const r=e[C_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ou=Symbol("_vod"),V_=Symbol("_vsh"),D_=Symbol(""),N_=/(?:^|;)\s*display\s*:/;function x_(e,t,n){const r=e.style,s=qt(n);let i=!1;if(n&&!s){if(t)if(qt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ri(r,l,"")}else for(const a in t)n[a]==null&&Ri(r,a,"");for(const a in n)a==="display"&&(i=!0),Ri(r,a,n[a])}else if(s){if(t!==n){const a=r[D_];a&&(n+=";"+a),r.cssText=n,i=N_.test(n)}}else t&&e.removeAttribute("style");ou in e&&(e[ou]=i?r.display:"",e[V_]&&(r.display="none"))}const au=/\s*!important$/;function Ri(e,t,n){if(ot(n))n.forEach(r=>Ri(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=O_(e,t);au.test(n)?e.setProperty($n(r),n.replace(au,""),"important"):e[r]=n}}const lu=["Webkit","Moz","ms"],Yo={};function O_(e,t){const n=Yo[t];if(n)return n;let r=Mn(t);if(r!=="filter"&&r in e)return Yo[t]=r;r=ef(r);for(let s=0;s<lu.length;s++){const i=lu[s]+r;if(i in e)return Yo[t]=i}return t}const cu="http://www.w3.org/1999/xlink";function uu(e,t,n,r,s,i=jm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(cu,t.slice(6,t.length)):e.setAttributeNS(cu,t,n):n==null||i&&!rf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":qn(n)?String(n):n)}function hu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?od(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=rf(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Tr(e,t,n,r){e.addEventListener(t,n,r)}function M_(e,t,n,r){e.removeEventListener(t,n,r)}const fu=Symbol("_vei");function k_(e,t,n,r,s=null){const i=e[fu]||(e[fu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=L_(t);if(r){const h=i[t]=B_(r,s);Tr(e,l,h,c)}else a&&(M_(e,l,a,c),i[t]=void 0)}}const du=/(?:Once|Passive|Capture)$/;function L_(e){let t;if(du.test(e)){t={};let r;for(;r=e.match(du);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$n(e.slice(2)),t]}let Jo=0;const F_=Promise.resolve(),U_=()=>Jo||(F_.then(()=>Jo=0),Jo=Date.now());function B_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ze(j_(r,n.value),t,5,[r])};return n.value=e,n.attached=U_(),n}function j_(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const pu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,q_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?P_(e,r,a):t==="style"?x_(e,n,r):ro(t)?Za(t)||k_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$_(e,t,r,a))?(hu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&uu(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!qt(r))?hu(e,Mn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),uu(e,t,r,a))};function $_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&pu(t)&&ct(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return pu(t)&&qt(n)?!1:t in e}const mu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>Ti(t,n):t};function H_(e){e.target.composing=!0}function gu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zo=Symbol("_assign");function _u(e,t,n){return t&&(e=e.trim()),n&&(e=nl(e)),e}const G_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Zo]=mu(s);const i=r||s.props&&s.props.type==="number";Tr(e,t?"change":"input",a=>{a.target.composing||e[Zo](_u(e.value,n,i))}),(n||i)&&Tr(e,"change",()=>{e.value=_u(e.value,n,i)}),t||(Tr(e,"compositionstart",H_),Tr(e,"compositionend",gu),Tr(e,"change",gu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Zo]=mu(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?nl(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},z_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},K_=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=$n(s.key);if(t.some(a=>a===i||z_[a]===i))return e(s)}))},W_=ce({patchProp:q_},S_);let yu;function Q_(){return yu||(yu=i_(W_))}const X_=((...e)=>{const t=Q_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=J_(r);if(!s)return;const i=t._component;!ct(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,Y_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function Y_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function J_(e){return qt(e)?document.querySelector(e):e}const Ir=typeof document<"u";function ad(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Z_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ad(e.default)}const Tt=Object.assign;function ta(e,t){const n={};for(const r in t){const s=t[r];n[r]=Ue(s)?s.map(e):e(s)}return n}const Ss=()=>{},Ue=Array.isArray;function Eu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const ld=/#/g,ty=/&/g,ey=/\//g,ny=/=/g,ry=/\?/g,cd=/\+/g,sy=/%5B/g,iy=/%5D/g,ud=/%5E/g,oy=/%60/g,hd=/%7B/g,ay=/%7C/g,fd=/%7D/g,ly=/%20/g;function _l(e){return e==null?"":encodeURI(""+e).replace(ay,"|").replace(sy,"[").replace(iy,"]")}function cy(e){return _l(e).replace(hd,"{").replace(fd,"}").replace(ud,"^")}function Ra(e){return _l(e).replace(cd,"%2B").replace(ly,"+").replace(ld,"%23").replace(ty,"%26").replace(oy,"`").replace(hd,"{").replace(fd,"}").replace(ud,"^")}function uy(e){return Ra(e).replace(ny,"%3D")}function hy(e){return _l(e).replace(ld,"%23").replace(ry,"%3F")}function fy(e){return hy(e).replace(ey,"%2F")}function Bs(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const dy=/\/$/,py=e=>e.replace(dy,"");function ea(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(r=t.slice(0,c),i=t.slice(c,l>0?l:t.length),s=e(i.slice(1))),l>=0&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=yy(r??t,n),{fullPath:r+i+a,path:r,query:s,hash:Bs(a)}}function my(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function vu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function gy(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Lr(t.matched[r],n.matched[s])&&dd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Lr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function dd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!_y(e[n],t[n]))return!1;return!0}function _y(e,t){return Ue(e)?Tu(e,t):Ue(t)?Tu(t,e):e?.valueOf()===t?.valueOf()}function Tu(e,t){return Ue(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function yy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ba=(function(e){return e.pop="pop",e.push="push",e})({}),na=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Ey(e){if(!e)if(Ir){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),py(e)}const vy=/^[^#]+#/;function Ty(e,t){return e.replace(vy,"#")+t}function Iy(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const mo=()=>({left:window.scrollX,top:window.scrollY});function Ay(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Iy(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Iu(e,t){return(history.state?history.state.position-t:-1)+e}const Sa=new Map;function wy(e,t){Sa.set(e,t)}function Ry(e){const t=Sa.get(e);return Sa.delete(e),t}function by(e){return typeof e=="string"||e&&typeof e=="object"}function pd(e){return typeof e=="string"||typeof e=="symbol"}let Mt=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const md=Symbol("");Mt.MATCHER_NOT_FOUND+"",Mt.NAVIGATION_GUARD_REDIRECT+"",Mt.NAVIGATION_ABORTED+"",Mt.NAVIGATION_CANCELLED+"",Mt.NAVIGATION_DUPLICATED+"";function Fr(e,t){return Tt(new Error,{type:e,[md]:!0},t)}function rn(e,t){return e instanceof Error&&md in e&&(t==null||!!(e.type&t))}const Sy=["params","query","hash"];function Cy(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of Sy)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function Py(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(cd," "),i=s.indexOf("="),a=Bs(i<0?s:s.slice(0,i)),l=i<0?null:Bs(s.slice(i+1));if(a in t){let c=t[a];Ue(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Au(e){let t="";for(let n in e){const r=e[n];if(n=uy(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ue(r)?r.map(s=>s&&Ra(s)):[r&&Ra(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Vy(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ue(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const Dy=Symbol(""),wu=Symbol(""),yl=Symbol(""),gd=Symbol(""),Ca=Symbol("");function ps(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Cn(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(Fr(Mt.NAVIGATION_ABORTED,{from:n,to:t})):g instanceof Error?c(g):by(g)?c(Fr(Mt.NAVIGATION_GUARD_REDIRECT,{from:t,to:g})):(a&&r.enterCallbacks[s]===a&&typeof g=="function"&&a.push(g),l())},d=i(()=>e.call(r&&r.instances[s],t,n,h));let p=Promise.resolve(d);e.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function ra(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(ad(c)){const h=(c.__vccOpts||c)[t];h&&i.push(Cn(h,n,r,a,l,s))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=Z_(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const g=(p.__vccOpts||p)[t];return g&&Cn(g,n,r,a,l,s)()}))}}return i}function Ny(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(h=>Lr(h,l))?r.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(h=>Lr(h,c))||s.push(c))}return[n,r,s]}let xy=()=>location.protocol+"//"+location.host;function _d(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),vu(l,"")}return vu(n,e)+r+s}function Oy(e,t,n,r){let s=[],i=[],a=null;const l=({state:g})=>{const v=_d(e,location),V=n.value,x=t.value;let L=0;if(g){if(n.value=v,t.value=g,a&&a===V){a=null;return}L=x?g.position-x.position:0}else r(v);s.forEach($=>{$(n.value,V,{delta:L,type:ba.pop,direction:L?L>0?na.forward:na.back:na.unknown})})};function c(){a=n.value}function h(g){s.push(g);const v=()=>{const V=s.indexOf(g);V>-1&&s.splice(V,1)};return i.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Tt({},g.state,{scroll:mo()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:h,destroy:p}}function Ru(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?mo():null}}function My(e){const{history:t,location:n}=window,r={value:_d(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=e.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:xy()+e+c;try{t[d?"replaceState":"pushState"](h,"",g),s.value=h}catch(v){console.error(v),n[d?"replace":"assign"](g)}}function a(c,h){i(c,Tt({},t.state,Ru(s.value.back,c,s.value.forward,!0),h,{position:s.value.position}),!0),r.value=c}function l(c,h){const d=Tt({},s.value,t.state,{forward:c,scroll:mo()});i(d.current,d,!0),i(c,Tt({},Ru(r.value,c,null),{position:d.position+1},h),!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function ky(e){e=Ey(e);const t=My(e),n=Oy(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Tt({location:"",base:e,go:r,createHref:Ty.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Ly(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),ky(e)}let Zn=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Ht=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Ht||{});const Fy={type:Zn.Static,value:""},Uy=/[a-zA-Z0-9_]/;function By(e){if(!e)return[[]];if(e==="/")return[[Fy]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=Ht.Static,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===Ht.Static?i.push({type:Zn.Static,value:h}):n===Ht.Param||n===Ht.ParamRegExp||n===Ht.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Zn.Param,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==Ht.ParamRegExp){r=n,n=Ht.EscapeNext;continue}switch(n){case Ht.Static:c==="/"?(h&&p(),a()):c===":"?(p(),n=Ht.Param):g();break;case Ht.EscapeNext:g(),n=r;break;case Ht.Param:c==="("?n=Ht.ParamRegExp:Uy.test(c)?g():(p(),n=Ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Ht.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=Ht.ParamRegExpEnd:d+=c;break;case Ht.ParamRegExpEnd:p(),n=Ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===Ht.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}const bu="[^/]+?",jy={sensitive:!1,strict:!1,start:!0,end:!0};var fe=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(fe||{});const qy=/[.+*?^${}()[\]/\\]/g;function $y(e,t){const n=Tt({},jy,t),r=[];let s=n.start?"^":"";const i=[];for(const h of e){const d=h.length?[]:[fe.Root];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const g=h[p];let v=fe.Segment+(n.sensitive?fe.BonusCaseSensitive:0);if(g.type===Zn.Static)p||(s+="/"),s+=g.value.replace(qy,"\\$&"),v+=fe.Static;else if(g.type===Zn.Param){const{value:V,repeatable:x,optional:L,regexp:$}=g;i.push({name:V,repeatable:x,optional:L});const q=$||bu;if(q!==bu){v+=fe.BonusCustomRegExp;try{`${q}`}catch(W){throw new Error(`Invalid custom RegExp for param "${V}" (${q}): `+W.message)}}let H=x?`((?:${q})(?:/(?:${q}))*)`:`(${q})`;p||(H=L&&h.length<2?`(?:/${H})`:"/"+H),L&&(H+="?"),s+=H,v+=fe.Dynamic,L&&(v+=fe.BonusOptional),x&&(v+=fe.BonusRepeatable),q===".*"&&(v+=fe.BonusWildcard)}d.push(v)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=fe.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const d=h.match(a),p={};if(!d)return null;for(let g=1;g<d.length;g++){const v=d[g]||"",V=i[g-1];p[V.name]=v&&V.repeatable?v.split("/"):v}return p}function c(h){let d="",p=!1;for(const g of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of g)if(v.type===Zn.Static)d+=v.value;else if(v.type===Zn.Param){const{value:V,repeatable:x,optional:L}=v,$=V in h?h[V]:"";if(Ue($)&&!x)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const q=Ue($)?$.join("/"):$;if(!q)if(L)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${V}"`);d+=q}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function Hy(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===fe.Static+fe.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===fe.Static+fe.Segment?1:-1:0}function yd(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Hy(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Su(r))return 1;if(Su(s))return-1}return s.length-r.length}function Su(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Gy={strict:!1,end:!0,sensitive:!1};function zy(e,t,n){const r=$y(By(e.path),n),s=Tt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Ky(e,t){const n=[],r=new Map;t=Eu(Gy,t);function s(p){return r.get(p)}function i(p,g,v){const V=!v,x=Pu(p);x.aliasOf=v&&v.record;const L=Eu(t,p),$=[x];if("alias"in p){const W=typeof p.alias=="string"?[p.alias]:p.alias;for(const lt of W)$.push(Pu(Tt({},x,{components:v?v.record.components:x.components,path:lt,aliasOf:v?v.record:x})))}let q,H;for(const W of $){const{path:lt}=W;if(g&&lt[0]!=="/"){const ft=g.record.path,A=ft[ft.length-1]==="/"?"":"/";W.path=g.record.path+(lt&&A+lt)}if(q=zy(W,g,L),v?v.alias.push(q):(H=H||q,H!==q&&H.alias.push(q),V&&p.name&&!Vu(q)&&a(p.name)),Ed(q)&&c(q),x.children){const ft=x.children;for(let A=0;A<ft.length;A++)i(ft[A],q,v&&v.children[A])}v=v||q}return H?()=>{a(H)}:Ss}function a(p){if(pd(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const g=Xy(p,n);n.splice(g,0,p),p.record.name&&!Vu(p)&&r.set(p.record.name,p)}function h(p,g){let v,V={},x,L;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw Fr(Mt.MATCHER_NOT_FOUND,{location:p});L=v.record.name,V=Tt(Cu(g.params,v.keys.filter(H=>!H.optional).concat(v.parent?v.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&Cu(p.params,v.keys.map(H=>H.name))),x=v.stringify(V)}else if(p.path!=null)x=p.path,v=n.find(H=>H.re.test(x)),v&&(V=v.parse(x),L=v.record.name);else{if(v=g.name?r.get(g.name):n.find(H=>H.re.test(g.path)),!v)throw Fr(Mt.MATCHER_NOT_FOUND,{location:p,currentLocation:g});L=v.record.name,V=Tt({},g.params,p.params),x=v.stringify(V)}const $=[];let q=v;for(;q;)$.unshift(q.record),q=q.parent;return{name:L,path:x,params:V,matched:$,meta:Qy($)}}e.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function Cu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Pu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Wy(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Wy(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Vu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Qy(e){return e.reduce((t,n)=>Tt(t,n.meta),{})}function Xy(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;yd(e,t[i])<0?r=i:n=i+1}const s=Yy(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Yy(e){let t=e;for(;t=t.parent;)if(Ed(t)&&yd(e,t)===0)return t}function Ed({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Du(e){const t=cn(yl),n=cn(gd),r=Me(()=>{const c=ln(e.to);return t.resolve(c)}),s=Me(()=>{const{matched:c}=r.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(Lr.bind(null,d));if(g>-1)return g;const v=Nu(c[h-2]);return h>1&&Nu(d)===v&&p[p.length-1].path!==v?p.findIndex(Lr.bind(null,c[h-2])):g}),i=Me(()=>s.value>-1&&eE(n.params,r.value.params)),a=Me(()=>s.value>-1&&s.value===n.matched.length-1&&dd(n.params,r.value.params));function l(c={}){if(tE(c)){const h=t[ln(e.replace)?"replace":"push"](ln(e.to)).catch(Ss);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Me(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function Jy(e){return e.length===1?e[0]:e}const Zy=Nf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Du,setup(e,{slots:t}){const n=lo(Du(e)),{options:r}=cn(yl),s=Me(()=>({[xu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[xu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Jy(t.default(n));return e.custom?i:id("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Pa=Zy;function tE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function eE(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ue(s)||s.length!==r.length||r.some((i,a)=>i.valueOf()!==s[a].valueOf()))return!1}return!0}function Nu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const xu=(e,t,n)=>e??t??n,nE=Nf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=cn(Ca),s=Me(()=>e.route||r.value),i=cn(wu,0),a=Me(()=>{let h=ln(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=Me(()=>s.value.matched[a.value]);Ii(wu,Me(()=>a.value+1)),Ii(Dy,l),Ii(Ca,s);const c=ks();return Ai(()=>[c.value,l.value,e.name],([h,d,p],[g,v,V])=>{d&&(d.instances[p]=h,v&&v!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),h&&d&&(!v||!Lr(d,v)||!g)&&(d.enterCallbacks[p]||[]).forEach(x=>x(h))},{flush:"post"}),()=>{const h=s.value,d=e.name,p=l.value,g=p&&p.components[d];if(!g)return Ou(n.default,{Component:g,route:h});const v=p.props[d],V=v?v===!0?h.params:typeof v=="function"?v(h):v:null,L=id(g,Tt({},V,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return Ou(n.default,{Component:L,route:h})||L}}});function Ou(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const vd=nE;function rE(e){const t=Ky(e.routes,e),n=e.parseQuery||Py,r=e.stringifyQuery||Au,s=e.history,i=ps(),a=ps(),l=ps(),c=cg(wn);let h=wn;Ir&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=ta.bind(null,O=>""+O),p=ta.bind(null,fy),g=ta.bind(null,Bs);function v(O,Y){let K,Z;return pd(O)?(K=t.getRecordMatcher(O),Z=Y):Z=O,t.addRoute(Z,K)}function V(O){const Y=t.getRecordMatcher(O);Y&&t.removeRoute(Y)}function x(){return t.getRoutes().map(O=>O.record)}function L(O){return!!t.getRecordMatcher(O)}function $(O,Y){if(Y=Tt({},Y||c.value),typeof O=="string"){const b=ea(n,O,Y.path),D=t.resolve({path:b.path},Y),F=s.createHref(b.fullPath);return Tt(b,D,{params:g(D.params),hash:Bs(b.hash),redirectedFrom:void 0,href:F})}let K;if(O.path!=null)K=Tt({},O,{path:ea(n,O.path,Y.path).path});else{const b=Tt({},O.params);for(const D in b)b[D]==null&&delete b[D];K=Tt({},O,{params:p(b)}),Y.params=p(Y.params)}const Z=t.resolve(K,Y),dt=O.hash||"";Z.params=d(g(Z.params));const _=my(r,Tt({},O,{hash:cy(dt),path:Z.path})),T=s.createHref(_);return Tt({fullPath:_,hash:dt,query:r===Au?Vy(O.query):O.query||{}},Z,{redirectedFrom:void 0,href:T})}function q(O){return typeof O=="string"?ea(n,O,c.value.path):Tt({},O)}function H(O,Y){if(h!==O)return Fr(Mt.NAVIGATION_CANCELLED,{from:Y,to:O})}function W(O){return A(O)}function lt(O){return W(Tt(q(O),{replace:!0}))}function ft(O,Y){const K=O.matched[O.matched.length-1];if(K&&K.redirect){const{redirect:Z}=K;let dt=typeof Z=="function"?Z(O,Y):Z;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=q(dt):{path:dt},dt.params={}),Tt({query:O.query,hash:O.hash,params:dt.path!=null?{}:O.params},dt)}}function A(O,Y){const K=h=$(O),Z=c.value,dt=O.state,_=O.force,T=O.replace===!0,b=ft(K,Z);if(b)return A(Tt(q(b),{state:typeof b=="object"?Tt({},dt,b.state):dt,force:_,replace:T}),Y||K);const D=K;D.redirectedFrom=Y;let F;return!_&&gy(r,Z,K)&&(F=Fr(Mt.NAVIGATION_DUPLICATED,{to:D,from:Z}),Te(Z,Z,!0,!1)),(F?Promise.resolve(F):R(D,Z)).catch(N=>rn(N)?rn(N,Mt.NAVIGATION_GUARD_REDIRECT)?N:je(N):gt(N,D,Z)).then(N=>{if(N){if(rn(N,Mt.NAVIGATION_GUARD_REDIRECT))return A(Tt({replace:T},q(N.to),{state:typeof N.to=="object"?Tt({},dt,N.to.state):dt,force:_}),Y||D)}else N=S(D,Z,!0,T,dt);return w(D,Z,N),N})}function y(O,Y){const K=H(O,Y);return K?Promise.reject(K):Promise.resolve()}function I(O){const Y=Ne.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(O):O()}function R(O,Y){let K;const[Z,dt,_]=Ny(O,Y);K=ra(Z.reverse(),"beforeRouteLeave",O,Y);for(const b of Z)b.leaveGuards.forEach(D=>{K.push(Cn(D,O,Y))});const T=y.bind(null,O,Y);return K.push(T),ee(K).then(()=>{K=[];for(const b of i.list())K.push(Cn(b,O,Y));return K.push(T),ee(K)}).then(()=>{K=ra(dt,"beforeRouteUpdate",O,Y);for(const b of dt)b.updateGuards.forEach(D=>{K.push(Cn(D,O,Y))});return K.push(T),ee(K)}).then(()=>{K=[];for(const b of _)if(b.beforeEnter)if(Ue(b.beforeEnter))for(const D of b.beforeEnter)K.push(Cn(D,O,Y));else K.push(Cn(b.beforeEnter,O,Y));return K.push(T),ee(K)}).then(()=>(O.matched.forEach(b=>b.enterCallbacks={}),K=ra(_,"beforeRouteEnter",O,Y,I),K.push(T),ee(K))).then(()=>{K=[];for(const b of a.list())K.push(Cn(b,O,Y));return K.push(T),ee(K)}).catch(b=>rn(b,Mt.NAVIGATION_CANCELLED)?b:Promise.reject(b))}function w(O,Y,K){l.list().forEach(Z=>I(()=>Z(O,Y,K)))}function S(O,Y,K,Z,dt){const _=H(O,Y);if(_)return _;const T=Y===wn,b=Ir?history.state:{};K&&(Z||T?s.replace(O.fullPath,Tt({scroll:T&&b&&b.scroll},dt)):s.push(O.fullPath,dt)),c.value=O,Te(O,Y,K,T),je()}let E;function Lt(){E||(E=s.listen((O,Y,K)=>{if(!xe.listening)return;const Z=$(O),dt=ft(Z,xe.currentRoute.value);if(dt){A(Tt(dt,{replace:!0,force:!0}),Z).catch(Ss);return}h=Z;const _=c.value;Ir&&wy(Iu(_.fullPath,K.delta),mo()),R(Z,_).catch(T=>rn(T,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_CANCELLED)?T:rn(T,Mt.NAVIGATION_GUARD_REDIRECT)?(A(Tt(q(T.to),{force:!0}),Z).then(b=>{rn(b,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===ba.pop&&s.go(-1,!1)}).catch(Ss),Promise.reject()):(K.delta&&s.go(-K.delta,!1),gt(T,Z,_))).then(T=>{T=T||S(Z,_,!1),T&&(K.delta&&!rn(T,Mt.NAVIGATION_CANCELLED)?s.go(-K.delta,!1):K.type===ba.pop&&rn(T,Mt.NAVIGATION_ABORTED|Mt.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),w(Z,_,T)}).catch(Ss)}))}let ge=ps(),Ft=ps(),vt;function gt(O,Y,K){je(O);const Z=Ft.list();return Z.length?Z.forEach(dt=>dt(O,Y,K)):console.error(O),Promise.reject(O)}function _e(){return vt&&c.value!==wn?Promise.resolve():new Promise((O,Y)=>{ge.add([O,Y])})}function je(O){return vt||(vt=!O,Lt(),ge.list().forEach(([Y,K])=>O?K(O):Y()),ge.reset()),O}function Te(O,Y,K,Z){const{scrollBehavior:dt}=e;if(!Ir||!dt)return Promise.resolve();const _=!K&&Ry(Iu(O.fullPath,0))||(Z||!K)&&history.state&&history.state.scroll||null;return Rf().then(()=>dt(O,Y,_)).then(T=>T&&Ay(T)).catch(T=>gt(T,O,Y))}const Xt=O=>s.go(O);let en;const Ne=new Set,xe={currentRoute:c,listening:!0,addRoute:v,removeRoute:V,clearRoutes:t.clearRoutes,hasRoute:L,getRoutes:x,resolve:$,options:e,push:W,replace:lt,go:Xt,back:()=>Xt(-1),forward:()=>Xt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:Ft.add,isReady:_e,install(O){O.component("RouterLink",Pa),O.component("RouterView",vd),O.config.globalProperties.$router=xe,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ln(c)}),Ir&&!en&&c.value===wn&&(en=!0,W(s.location).catch(Z=>{}));const Y={};for(const Z in wn)Object.defineProperty(Y,Z,{get:()=>c.value[Z],enumerable:!0});O.provide(yl,xe),O.provide(gd,Tf(Y)),O.provide(Ca,c);const K=O.unmount;Ne.add(O),O.unmount=function(){Ne.delete(O),Ne.size<1&&(h=wn,E&&E(),E=null,c.value=wn,en=!1,vt=!1),K()}}};function ee(O){return O.reduce((Y,K)=>Y.then(()=>I(K)),Promise.resolve())}return xe}const sE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e",Td=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},iE={class:"navbar"},oE={class:"container"},aE={class:"brand-name"},lE={class:"nav-menu"},cE={__name:"Navbar",setup(e){const t=ks(" firebase"),n=ks([{name:"",path:"/"},{name:"",path:"/about"}]);return(r,s)=>(rr(),sr("nav",iE,[ve("div",oE,[me(ln(Pa),{to:"/",class:"brand-group"},{default:ya(()=>[s[0]||(s[0]=ve("img",{src:sE,alt:"Logo",class:"logo-img"},null,-1)),ve("span",aE,Ni(t.value),1)]),_:1}),ve("ul",lE,[(rr(!0),sr(be,null,Ff(n.value,i=>(rr(),sr("li",{key:i.name},[me(ln(Pa),{to:i.path,class:"nav-item"},{default:ya(()=>[nd(Ni(i.name),1)]),_:2},1032,["to"])]))),128))])])]))}},uE=Td(cE,[["__scopeId","data-v-6ab1911e"]]),hE=()=>{};var Mu={};const Id=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},fE=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Ad={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,h=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,v=h&63;c||(v=64,a||(g=64)),r.push(n[d],n[p],n[g],n[v])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Id(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new dE;const g=i<<2|l>>4;if(r.push(g),h!==64){const v=l<<4&240|h>>2;if(r.push(v),p!==64){const V=h<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pE=function(e){const t=Id(e);return Ad.encodeByteArray(t,!0)},ji=function(e){return pE(e).replace(/\./g,"")},mE=function(e){try{return Ad.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function gE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _E=()=>gE().__FIREBASE_DEFAULTS__,yE=()=>{if(typeof process>"u"||typeof Mu>"u")return;const e=Mu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},EE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mE(e[1]);return t&&JSON.parse(t)},El=()=>{try{return hE()||_E()||yE()||EE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vE=e=>El()?.emulatorHosts?.[e],TE=e=>{const t=vE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},wd=()=>El()?.config;class IE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function vl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AE(e){return(await fetch(e,{credentials:"include"})).ok}function wE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ji(JSON.stringify(n)),ji(JSON.stringify(a)),""].join(".")}const Cs={};function RE(){const e={prod:[],emulator:[]};for(const t of Object.keys(Cs))Cs[t]?e.emulator.push(t):e.prod.push(t);return e}function bE(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let ku=!1;function SE(e,t){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||Cs[e]===t||Cs[e]||ku)return;Cs[e]=t;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=RE().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{ku=!0,a()},g}function d(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=bE(r),v=n("text"),V=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),L=document.getElementById(x)||document.createElement("a"),$=n("preprendIcon"),q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const H=g.element;l(H),d(L,x);const W=h();c(q,$),H.append(q,V,L,W),document.body.appendChild(H)}i?(V.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function CE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PE(){const e=El()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VE(){return!PE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DE(){try{return typeof indexedDB=="object"}catch{return!1}}function NE(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}const xE="FirebaseError";class Gr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=xE,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rd.prototype.create)}}class Rd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?OE(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Gr(s,l,r)}}function OE(e,t){return e.replace(ME,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const ME=/\{\$([^}]+)}/g;function qi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Lu(i)&&Lu(a)){if(!qi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Lu(e){return e!==null&&typeof e=="object"}function ar(e){return e&&e._delegate?e._delegate:e}class js{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Jn="[DEFAULT]";class kE{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new IE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FE(t))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Jn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jn){return this.instances.has(t)}getOptions(t=Jn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Jn){return this.component?this.component.multipleInstances?t:Jn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LE(e){return e===Jn?void 0:e}function FE(e){return e.instantiationMode==="EAGER"}class UE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kE(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var yt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(yt||(yt={}));const BE={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},jE=yt.INFO,qE={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},$E=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=qE[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bd{constructor(t){this.name=t,this._logLevel=jE,this._logHandler=$E,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...t),this._logHandler(this,yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...t),this._logHandler(this,yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...t),this._logHandler(this,yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...t),this._logHandler(this,yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...t),this._logHandler(this,yt.ERROR,...t)}}const HE=(e,t)=>t.some(n=>e instanceof n);let Fu,Uu;function GE(){return Fu||(Fu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zE(){return Uu||(Uu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sd=new WeakMap,Va=new WeakMap,Cd=new WeakMap,sa=new WeakMap,Tl=new WeakMap;function KE(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Dn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Sd.set(n,e)}).catch(()=>{}),Tl.set(t,e),t}function WE(e){if(Va.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Va.set(e,t)}let Da={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Va.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Cd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function QE(e){Da=e(Da)}function XE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ia(this),t,...n);return Cd.set(r,t.sort?t.sort():[t]),Dn(r)}:zE().includes(e)?function(...t){return e.apply(ia(this),t),Dn(Sd.get(this))}:function(...t){return Dn(e.apply(ia(this),t))}}function YE(e){return typeof e=="function"?XE(e):(e instanceof IDBTransaction&&WE(e),HE(e,GE())?new Proxy(e,Da):e)}function Dn(e){if(e instanceof IDBRequest)return KE(e);if(sa.has(e))return sa.get(e);const t=YE(e);return t!==e&&(sa.set(e,t),Tl.set(t,e)),t}const ia=e=>Tl.get(e);function JE(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Dn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Dn(a.result),c.oldVersion,c.newVersion,Dn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const ZE=["get","getKey","getAll","getAllKeys","count"],tv=["put","add","delete","clear"],oa=new Map;function Bu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(oa.get(t))return oa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=tv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZE.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return oa.set(t,i),i}QE(e=>({...e,get:(t,n,r)=>Bu(t,n)||e.get(t,n,r),has:(t,n)=>!!Bu(t,n)||e.has(t,n)}));class ev{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nv(e){return e.getComponent()?.type==="VERSION"}const Na="@firebase/app",ju="0.14.6";const pn=new bd("@firebase/app"),rv="@firebase/app-compat",sv="@firebase/analytics-compat",iv="@firebase/analytics",ov="@firebase/app-check-compat",av="@firebase/app-check",lv="@firebase/auth",cv="@firebase/auth-compat",uv="@firebase/database",hv="@firebase/data-connect",fv="@firebase/database-compat",dv="@firebase/functions",pv="@firebase/functions-compat",mv="@firebase/installations",gv="@firebase/installations-compat",_v="@firebase/messaging",yv="@firebase/messaging-compat",Ev="@firebase/performance",vv="@firebase/performance-compat",Tv="@firebase/remote-config",Iv="@firebase/remote-config-compat",Av="@firebase/storage",wv="@firebase/storage-compat",Rv="@firebase/firestore",bv="@firebase/ai",Sv="@firebase/firestore-compat",Cv="firebase",Pv="12.6.0";const xa="[DEFAULT]",Vv={[Na]:"fire-core",[rv]:"fire-core-compat",[iv]:"fire-analytics",[sv]:"fire-analytics-compat",[av]:"fire-app-check",[ov]:"fire-app-check-compat",[lv]:"fire-auth",[cv]:"fire-auth-compat",[uv]:"fire-rtdb",[hv]:"fire-data-connect",[fv]:"fire-rtdb-compat",[dv]:"fire-fn",[pv]:"fire-fn-compat",[mv]:"fire-iid",[gv]:"fire-iid-compat",[_v]:"fire-fcm",[yv]:"fire-fcm-compat",[Ev]:"fire-perf",[vv]:"fire-perf-compat",[Tv]:"fire-rc",[Iv]:"fire-rc-compat",[Av]:"fire-gcs",[wv]:"fire-gcs-compat",[Rv]:"fire-fst",[Sv]:"fire-fst-compat",[bv]:"fire-vertex","fire-js":"fire-js",[Cv]:"fire-js-all"};const $i=new Map,Dv=new Map,Oa=new Map;function qu(e,t){try{e.container.addComponent(t)}catch(n){pn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Hi(e){const t=e.name;if(Oa.has(t))return pn.debug(`There were multiple attempts to register component ${t}.`),!1;Oa.set(t,e);for(const n of $i.values())qu(n,e);for(const n of Dv.values())qu(n,e);return!0}function Nv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xv(e){return e==null?!1:e.settings!==void 0}const Ov={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nn=new Rd("app","Firebase",Ov);class Mv{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const kv=Pv;function Pd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:xa,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Nn.create("bad-app-name",{appName:String(s)});if(n||(n=wd()),!n)throw Nn.create("no-options");const i=$i.get(s);if(i){if(qi(n,i.options)&&qi(r,i.config))return i;throw Nn.create("duplicate-app",{appName:s})}const a=new UE(s);for(const c of Oa.values())a.addComponent(c);const l=new Mv(n,r,a);return $i.set(s,l),l}function Lv(e=xa){const t=$i.get(e);if(!t&&e===xa&&wd())return Pd();if(!t)throw Nn.create("no-app",{appName:e});return t}function Dr(e,t,n){let r=Vv[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pn.warn(a.join(" "));return}Hi(new js(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Fv="firebase-heartbeat-database",Uv=1,qs="firebase-heartbeat-store";let aa=null;function Vd(){return aa||(aa=JE(Fv,Uv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(qs)}catch(n){console.warn(n)}}}}).catch(e=>{throw Nn.create("idb-open",{originalErrorMessage:e.message})})),aa}async function Bv(e){try{const n=(await Vd()).transaction(qs),r=await n.objectStore(qs).get(Dd(e));return await n.done,r}catch(t){if(t instanceof Gr)pn.warn(t.message);else{const n=Nn.create("idb-get",{originalErrorMessage:t?.message});pn.warn(n.message)}}}async function $u(e,t){try{const r=(await Vd()).transaction(qs,"readwrite");await r.objectStore(qs).put(t,Dd(e)),await r.done}catch(n){if(n instanceof Gr)pn.warn(n.message);else{const r=Nn.create("idb-set",{originalErrorMessage:n?.message});pn.warn(r.message)}}}function Dd(e){return`${e.name}!${e.options.appId}`}const jv=1024,qv=30;class $v{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Gv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>qv){const s=zv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){pn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hu(),{heartbeatsToSend:n,unsentEntries:r}=Hv(this._heartbeatsCache.heartbeats),s=ji(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return pn.warn(t),""}}}function Hu(){return new Date().toISOString().substring(0,10)}function Hv(e,t=jv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Gu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Gv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DE()?NE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bv(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return $u(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return $u(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Gu(e){return ji(JSON.stringify({version:2,heartbeats:e})).length}function zv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Kv(e){Hi(new js("platform-logger",t=>new ev(t),"PRIVATE")),Hi(new js("heartbeat",t=>new $v(t),"PRIVATE")),Dr(Na,ju,e),Dr(Na,ju,"esm2020"),Dr("fire-js","")}Kv("");var Wv="firebase",Qv="12.7.0";Dr(Wv,Qv,"app");var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xn,Nd;(function(){var e;function t(A,y){function I(){}I.prototype=y.prototype,A.F=y.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(R,w,S){for(var E=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)E[Lt-2]=arguments[Lt];return y.prototype[w].apply(R,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,I){I||(I=0);const R=Array(16);if(typeof y=="string")for(var w=0;w<16;++w)R[w]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(w=0;w<16;++w)R[w]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=A.g[0],I=A.g[1],w=A.g[2];let S=A.g[3],E;E=y+(S^I&(w^S))+R[0]+3614090360&4294967295,y=I+(E<<7&4294967295|E>>>25),E=S+(w^y&(I^w))+R[1]+3905402710&4294967295,S=y+(E<<12&4294967295|E>>>20),E=w+(I^S&(y^I))+R[2]+606105819&4294967295,w=S+(E<<17&4294967295|E>>>15),E=I+(y^w&(S^y))+R[3]+3250441966&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(S^I&(w^S))+R[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=S+(w^y&(I^w))+R[5]+1200080426&4294967295,S=y+(E<<12&4294967295|E>>>20),E=w+(I^S&(y^I))+R[6]+2821735955&4294967295,w=S+(E<<17&4294967295|E>>>15),E=I+(y^w&(S^y))+R[7]+4249261313&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(S^I&(w^S))+R[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=S+(w^y&(I^w))+R[9]+2336552879&4294967295,S=y+(E<<12&4294967295|E>>>20),E=w+(I^S&(y^I))+R[10]+4294925233&4294967295,w=S+(E<<17&4294967295|E>>>15),E=I+(y^w&(S^y))+R[11]+2304563134&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(S^I&(w^S))+R[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=S+(w^y&(I^w))+R[13]+4254626195&4294967295,S=y+(E<<12&4294967295|E>>>20),E=w+(I^S&(y^I))+R[14]+2792965006&4294967295,w=S+(E<<17&4294967295|E>>>15),E=I+(y^w&(S^y))+R[15]+1236535329&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(w^S&(I^w))+R[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=S+(I^w&(y^I))+R[6]+3225465664&4294967295,S=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(S^y))+R[11]+643717713&4294967295,w=S+(E<<14&4294967295|E>>>18),E=I+(S^y&(w^S))+R[0]+3921069994&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^S&(I^w))+R[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=S+(I^w&(y^I))+R[10]+38016083&4294967295,S=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(S^y))+R[15]+3634488961&4294967295,w=S+(E<<14&4294967295|E>>>18),E=I+(S^y&(w^S))+R[4]+3889429448&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^S&(I^w))+R[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=S+(I^w&(y^I))+R[14]+3275163606&4294967295,S=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(S^y))+R[3]+4107603335&4294967295,w=S+(E<<14&4294967295|E>>>18),E=I+(S^y&(w^S))+R[8]+1163531501&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^S&(I^w))+R[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=S+(I^w&(y^I))+R[2]+4243563512&4294967295,S=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(S^y))+R[7]+1735328473&4294967295,w=S+(E<<14&4294967295|E>>>18),E=I+(S^y&(w^S))+R[12]+2368359562&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(I^w^S)+R[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=S+(y^I^w)+R[8]+2272392833&4294967295,S=y+(E<<11&4294967295|E>>>21),E=w+(S^y^I)+R[11]+1839030562&4294967295,w=S+(E<<16&4294967295|E>>>16),E=I+(w^S^y)+R[14]+4259657740&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^S)+R[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=S+(y^I^w)+R[4]+1272893353&4294967295,S=y+(E<<11&4294967295|E>>>21),E=w+(S^y^I)+R[7]+4139469664&4294967295,w=S+(E<<16&4294967295|E>>>16),E=I+(w^S^y)+R[10]+3200236656&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^S)+R[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=S+(y^I^w)+R[0]+3936430074&4294967295,S=y+(E<<11&4294967295|E>>>21),E=w+(S^y^I)+R[3]+3572445317&4294967295,w=S+(E<<16&4294967295|E>>>16),E=I+(w^S^y)+R[6]+76029189&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^S)+R[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=S+(y^I^w)+R[12]+3873151461&4294967295,S=y+(E<<11&4294967295|E>>>21),E=w+(S^y^I)+R[15]+530742520&4294967295,w=S+(E<<16&4294967295|E>>>16),E=I+(w^S^y)+R[2]+3299628645&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(w^(I|~S))+R[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=S+(I^(y|~w))+R[7]+1126891415&4294967295,S=y+(E<<10&4294967295|E>>>22),E=w+(y^(S|~I))+R[14]+2878612391&4294967295,w=S+(E<<15&4294967295|E>>>17),E=I+(S^(w|~y))+R[5]+4237533241&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~S))+R[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=S+(I^(y|~w))+R[3]+2399980690&4294967295,S=y+(E<<10&4294967295|E>>>22),E=w+(y^(S|~I))+R[10]+4293915773&4294967295,w=S+(E<<15&4294967295|E>>>17),E=I+(S^(w|~y))+R[1]+2240044497&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~S))+R[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=S+(I^(y|~w))+R[15]+4264355552&4294967295,S=y+(E<<10&4294967295|E>>>22),E=w+(y^(S|~I))+R[6]+2734768916&4294967295,w=S+(E<<15&4294967295|E>>>17),E=I+(S^(w|~y))+R[13]+1309151649&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~S))+R[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=S+(I^(y|~w))+R[11]+3174756917&4294967295,S=y+(E<<10&4294967295|E>>>22),E=w+(y^(S|~I))+R[2]+718787259&4294967295,w=S+(E<<15&4294967295|E>>>17),E=I+(S^(w|~y))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+w&4294967295,A.g[3]=A.g[3]+S&4294967295}r.prototype.v=function(A,y){y===void 0&&(y=A.length);const I=y-this.blockSize,R=this.C;let w=this.h,S=0;for(;S<y;){if(w==0)for(;S<=I;)s(this,A,S),S+=this.blockSize;if(typeof A=="string"){for(;S<y;)if(R[w++]=A.charCodeAt(S++),w==this.blockSize){s(this,R),w=0;break}}else for(;S<y;)if(R[w++]=A[S++],w==this.blockSize){s(this,R),w=0;break}}this.h=w,this.o+=y},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;y=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=y&255,y/=256;for(this.v(A),A=Array(16),y=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)A[y++]=this.g[I]>>>R&255;return A};function i(A,y){var I=l;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=y(A)}function a(A,y){this.h=y;const I=[];let R=!0;for(let w=A.length-1;w>=0;w--){const S=A[w]|0;R&&S==y||(I[w]=S,R=!1)}this.g=I}var l={};function c(A){return-128<=A&&A<128?i(A,function(y){return new a([y|0],y<0?-1:0)}):new a([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return L(h(-A));const y=[];let I=1;for(let R=0;A>=I;R++)y[R]=A/I|0,I*=4294967296;return new a(y,0)}function d(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return L(d(A.substring(1),y));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(y,8));let R=p;for(let S=0;S<A.length;S+=8){var w=Math.min(8,A.length-S);const E=parseInt(A.substring(S,S+w),y);w<8?(w=h(Math.pow(y,w)),R=R.j(w).add(h(E))):(R=R.j(I),R=R.add(h(E)))}return R}var p=c(0),g=c(1),v=c(16777216);e=a.prototype,e.m=function(){if(x(this))return-L(this).m();let A=0,y=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);A+=(R>=0?R:4294967296+R)*y,y*=4294967296}return A},e.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(x(this))return"-"+L(this).toString(A);const y=h(Math.pow(A,6));var I=this;let R="";for(;;){const w=W(I,y).g;I=$(I,w.j(y));let S=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=w,V(I))return S+R;for(;S.length<6;)S="0"+S;R=S+R}},e.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function x(A){return A.h==-1}e.l=function(A){return A=$(this,A),x(A)?-1:V(A)?0:1};function L(A){const y=A.g.length,I=[];for(let R=0;R<y;R++)I[R]=~A.g[R];return new a(I,~A.h).add(g)}e.abs=function(){return x(this)?L(this):this},e.add=function(A){const y=Math.max(this.g.length,A.g.length),I=[];let R=0;for(let w=0;w<=y;w++){let S=R+(this.i(w)&65535)+(A.i(w)&65535),E=(S>>>16)+(this.i(w)>>>16)+(A.i(w)>>>16);R=E>>>16,S&=65535,E&=65535,I[w]=E<<16|S}return new a(I,I[I.length-1]&-2147483648?-1:0)};function $(A,y){return A.add(L(y))}e.j=function(A){if(V(this)||V(A))return p;if(x(this))return x(A)?L(this).j(L(A)):L(L(this).j(A));if(x(A))return L(this.j(L(A)));if(this.l(v)<0&&A.l(v)<0)return h(this.m()*A.m());const y=this.g.length+A.g.length,I=[];for(var R=0;R<2*y;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let w=0;w<A.g.length;w++){const S=this.i(R)>>>16,E=this.i(R)&65535,Lt=A.i(w)>>>16,ge=A.i(w)&65535;I[2*R+2*w]+=E*ge,q(I,2*R+2*w),I[2*R+2*w+1]+=S*ge,q(I,2*R+2*w+1),I[2*R+2*w+1]+=E*Lt,q(I,2*R+2*w+1),I[2*R+2*w+2]+=S*Lt,q(I,2*R+2*w+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new a(I,0)};function q(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function H(A,y){this.g=A,this.h=y}function W(A,y){if(V(y))throw Error("division by zero");if(V(A))return new H(p,p);if(x(A))return y=W(L(A),y),new H(L(y.g),L(y.h));if(x(y))return y=W(A,L(y)),new H(L(y.g),y.h);if(A.g.length>30){if(x(A)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=y;R.l(A)<=0;)I=lt(I),R=lt(R);var w=ft(I,1),S=ft(R,1);for(R=ft(R,2),I=ft(I,2);!V(R);){var E=S.add(R);E.l(A)<=0&&(w=w.add(I),S=E),R=ft(R,1),I=ft(I,1)}return y=$(A,w.j(y)),new H(w,y)}for(w=p;A.l(y)>=0;){for(I=Math.max(1,Math.floor(A.m()/y.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),S=h(I),E=S.j(y);x(E)||E.l(A)>0;)I-=R,S=h(I),E=S.j(y);V(S)&&(S=g),w=w.add(S),A=$(A,E)}return new H(w,A)}e.B=function(A){return W(this,A).h},e.and=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<y;R++)I[R]=this.i(R)&A.i(R);return new a(I,this.h&A.h)},e.or=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<y;R++)I[R]=this.i(R)|A.i(R);return new a(I,this.h|A.h)},e.xor=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let R=0;R<y;R++)I[R]=this.i(R)^A.i(R);return new a(I,this.h^A.h)};function lt(A){const y=A.g.length+1,I=[];for(let R=0;R<y;R++)I[R]=A.i(R)<<1|A.i(R-1)>>>31;return new a(I,A.h)}function ft(A,y){const I=y>>5;y%=32;const R=A.g.length-I,w=[];for(let S=0;S<R;S++)w[S]=y>0?A.i(S+I)>>>y|A.i(S+I+1)<<32-y:A.i(S+I);return new a(w,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Nd=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,xn=a}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xd,gs,Od,bi,Ma,Md,kd,Ld;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var C=o[m];if(!(C in f))break t;f=f[C]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var f=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&f.push([m,u[m]]);return f}});var i=i||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,f){return o.call.apply(o.bind,arguments)}function h(o,u,f){return h=c,h.apply(null,arguments)}function d(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function p(o,u){function f(){}f.prototype=u.prototype,o.Z=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,C,P){for(var G=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)G[ut-2]=arguments[ut];return u.prototype[C].apply(m,G)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function v(o){const u=o.length;if(u>0){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function V(o,u){for(let m=1;m<arguments.length;m++){const C=arguments[m];var f=typeof C;if(f=f!="object"?f:C?Array.isArray(C)?"array":f:"null",f=="array"||f=="object"&&typeof C.length=="number"){f=o.length||0;const P=C.length||0;o.length=f+P;for(let G=0;G<P;G++)o[f+G]=C[G]}else o.push(C)}}class x{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function L(o){a.setTimeout(()=>{throw o},0)}function $(){var o=A;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class q{constructor(){this.h=this.g=null}add(u,f){const m=H.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var H=new x(()=>new W,o=>o.reset());class W{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,ft=!1,A=new q,y=()=>{const o=Promise.resolve(void 0);lt=()=>{o.then(I)}};function I(){for(var o;o=$();){try{o.h.call(o.g)}catch(f){L(f)}var u=H;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}ft=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,u),a.removeEventListener("test",f,u)}catch{}return o})();function E(o){return/^[\s\xa0]*$/.test(o)}function Lt(o,u){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}p(Lt,w),Lt.prototype.init=function(o,u){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),Ft=0;function vt(o,u,f,m,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=C,this.key=++Ft,this.da=this.fa=!1}function gt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function _e(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function je(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function Te(o){const u={};for(const f in o)u[f]=o[f];return u}const Xt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function en(o,u){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)o[f]=m[f];for(let P=0;P<Xt.length;P++)f=Xt[P],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function Ne(o){this.src=o,this.g={},this.h=0}Ne.prototype.add=function(o,u,f,m,C){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const G=ee(o,u,m,C);return G>-1?(u=o[G],f||(u.fa=!1)):(u=new vt(u,this.src,P,!!m,C),u.fa=f,o.push(u)),u};function xe(o,u){const f=u.type;if(f in o.g){var m=o.g[f],C=Array.prototype.indexOf.call(m,u,void 0),P;(P=C>=0)&&Array.prototype.splice.call(m,C,1),P&&(gt(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ee(o,u,f,m){for(let C=0;C<o.length;++C){const P=o[C];if(!P.da&&P.listener==u&&P.capture==!!f&&P.ha==m)return C}return-1}var O="closure_lm_"+(Math.random()*1e6|0),Y={};function K(o,u,f,m,C){if(Array.isArray(u)){for(let P=0;P<u.length;P++)K(o,u[P],f,m,C);return null}return f=z(f),o&&o[ge]?o.J(u,f,l(m)?!!m.capture:!1,C):Z(o,u,f,!1,m,C)}function Z(o,u,f,m,C,P){if(!u)throw Error("Invalid event type");const G=l(C)?!!C.capture:!!C;let ut=F(o);if(ut||(o[O]=ut=new Ne(o)),f=ut.add(u,f,m,G,P),f.proxy)return f;if(m=dt(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)S||(C=G),C===void 0&&(C=!1),o.addEventListener(u.toString(),m,C);else if(o.attachEvent)o.attachEvent(b(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dt(){function o(f){return u.call(o.src,o.listener,f)}const u=D;return o}function _(o,u,f,m,C){if(Array.isArray(u))for(var P=0;P<u.length;P++)_(o,u[P],f,m,C);else m=l(m)?!!m.capture:!!m,f=z(f),o&&o[ge]?(o=o.i,P=String(u).toString(),P in o.g&&(u=o.g[P],f=ee(u,f,m,C),f>-1&&(gt(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete o.g[P],o.h--)))):o&&(o=F(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ee(u,f,m,C)),(f=o>-1?u[o]:null)&&T(f))}function T(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[ge])xe(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(b(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=F(u))?(xe(f,o),f.h==0&&(f.src=null,u[O]=null)):gt(o)}}}function b(o){return o in Y?Y[o]:Y[o]="on"+o}function D(o,u){if(o.da)o=!0;else{u=new Lt(u,this);const f=o.listener,m=o.ha||o.src;o.fa&&T(o),o=f.call(m,u)}return o}function F(o){return o=o[O],o instanceof Ne?o:null}var N="__closure_events_fn_"+(Math.random()*1e9>>>0);function z(o){return typeof o=="function"?o:(o[N]||(o[N]=function(u){return o.handleEvent(u)}),o[N])}function j(){R.call(this),this.i=new Ne(this),this.M=this,this.G=null}p(j,R),j.prototype[ge]=!0,j.prototype.removeEventListener=function(o,u,f,m){_(this,o,u,f,m)};function B(o,u){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new w(u,o);else if(u instanceof w)u.target=u.target||o;else{var C=u;u=new w(m,o),en(u,C)}C=!0;let P,G;if(f)for(G=f.length-1;G>=0;G--)P=u.g=f[G],C=U(P,m,!0,u)&&C;if(P=u.g=o,C=U(P,m,!0,u)&&C,C=U(P,m,!1,u)&&C,f)for(G=0;G<f.length;G++)P=u.g=f[G],C=U(P,m,!1,u)&&C}j.prototype.N=function(){if(j.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const f=o.g[u];for(let m=0;m<f.length;m++)gt(f[m]);delete o.g[u],o.h--}}this.G=null},j.prototype.J=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},j.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function U(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let C=!0;for(let P=0;P<u.length;++P){const G=u[P];if(G&&!G.da&&G.capture==f){const ut=G.listener,$t=G.ha||G.src;G.fa&&xe(o.i,G),C=ut.call($t,m)!==!1&&C}}return C&&!m.defaultPrevented}function nt(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Q(o){o.g=nt(()=>{o.g=null,o.i&&(o.i=!1,Q(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class tt extends R{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(o){R.call(this),this.h=o,this.g={}}p(rt,R);var ht=[];function Rt(o){_e(o.g,function(u,f){this.g.hasOwnProperty(f)&&T(u)},o),o.g={}}rt.prototype.N=function(){rt.Z.N.call(this),Rt(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=a.JSON.stringify,ne=a.JSON.parse,re=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Ie(){}function Ae(){}var Oe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mr(){w.call(this,"d")}p(mr,w);function Yt(){w.call(this,"c")}p(Yt,w);var Kt={},Yr=null;function Hn(){return Yr=Yr||new j}Kt.Ia="serverreachability";function ec(o){w.call(this,Kt.Ia,o)}p(ec,w);function Jr(o){const u=Hn();B(u,new ec(u))}Kt.STAT_EVENT="statevent";function nc(o,u){w.call(this,Kt.STAT_EVENT,o),this.stat=u}p(nc,w);function ue(o){const u=Hn();B(u,new nc(u,o))}Kt.Ja="timingevent";function rc(o,u){w.call(this,Kt.Ja,o),this.size=u}p(rc,w);function Zr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function ts(){this.g=!0}ts.prototype.ua=function(){this.g=!1};function um(o,u,f,m,C,P){o.info(function(){if(o.g)if(P){var G="",ut=P.split("&");for(let bt=0;bt<ut.length;bt++){var $t=ut[bt].split("=");if($t.length>1){const Wt=$t[0];$t=$t[1];const $e=Wt.split("_");G=$e.length>=2&&$e[1]=="type"?G+(Wt+"="+$t+"&"):G+(Wt+"=redacted&")}}}else G=null;else G=P;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+u+`
`+f+`
`+G})}function hm(o,u,f,m,C,P,G){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+u+`
`+f+`
`+P+" "+G})}function gr(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+dm(o,f)+(m?" "+m:"")})}function fm(o,u){o.info(function(){return"TIMEOUT: "+u})}ts.prototype.info=function(){};function dm(o,u){if(!o.g)return u;if(!u)return null;try{const P=JSON.parse(u);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var f=P[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var C=m[0];if(C!="noop"&&C!="stop"&&C!="close")for(let G=1;G<m.length;G++)m[G]=""}}}}return Et(P)}catch{return u}}var ri={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ic;function Po(){}p(Po,Ie),Po.prototype.g=function(){return new XMLHttpRequest},ic=new Po;function es(o){return encodeURIComponent(String(o))}function pm(o){var u=1;o=o.split(":");const f=[];for(;u>0&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function yn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.S=m||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oc}function oc(){this.i=null,this.g="",this.h=!1}var ac={},Vo={};function Do(o,u,f){o.M=1,o.A=ii(qe(u)),o.u=f,o.R=!0,lc(o,null)}function lc(o,u){o.F=Date.now(),si(o),o.B=qe(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),Tc(f.i,"t",m),o.C=0,f=o.j.L,o.h=new oc,o.g=Uc(o.j,f?u:null,!o.u),o.P>0&&(o.O=new tt(h(o.Y,o,o.g),o.P)),u=o.V,f=o.g,m=o.ba;var C="readystatechange";Array.isArray(C)||(C&&(ht[0]=C.toString()),C=ht);for(let P=0;P<C.length;P++){const G=K(f,C[P],m||u.handleEvent,!1,u.h||u);if(!G)break;u.g[G.key]=G}u=o.J?Te(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Jr(),um(o.i,o.v,o.B,o.l,o.S,o.u)}yn.prototype.ba=function(o){o=o.target;const u=this.O;u&&Tn(o)==3?u.j():this.Y(o)},yn.prototype.Y=function(o){try{if(o==this.g)t:{const ut=Tn(this.g),$t=this.g.ya(),bt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||Cc(this.g)))){this.K||ut!=4||$t==7||($t==8||bt<=0?Jr(3):Jr(2)),No(this);var u=this.g.ca();this.X=u;var f=mm(this);if(this.o=u==200,hm(this.i,this.v,this.B,this.l,this.S,ut,u),this.o){if(this.U&&!this.L){e:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(m)){var P=m;break e}}P=null}if(o=P)gr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xo(this,o);else{this.o=!1,this.m=3,ue(12),Gn(this),ns(this);break t}}if(this.R){o=!0;let Wt;for(;!this.K&&this.C<f.length;)if(Wt=gm(this,f),Wt==Vo){ut==4&&(this.m=4,ue(14),o=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==ac){this.m=4,ue(15),gr(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else gr(this.i,this.l,Wt,null),xo(this,Wt);if(cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||f.length!=0||this.h.h||(this.m=1,ue(16),o=!1),this.o=this.o&&o,!o)gr(this.i,this.l,f,"[Invalid Chunked Response]"),Gn(this),ns(this);else if(f.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),jo(G),G.P=!0,ue(11))}}else gr(this.i,this.l,f,null),xo(this,f);ut==4&&Gn(this),this.o&&!this.K&&(ut==4?Mc(this.j,this):(this.o=!1,si(this)))}else Vm(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,ue(12)):(this.m=0,ue(13)),Gn(this),ns(this)}}}catch{}};function mm(o){if(!cc(o))return o.g.la();const u=Cc(o.g);if(u==="")return"";let f="";const m=u.length,C=Tn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Gn(o),ns(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<m;P++)o.h.h=!0,f+=o.h.i.decode(u[P],{stream:!(C&&P==m-1)});return u.length=0,o.h.g+=f,o.C=0,o.h.g}function cc(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function gm(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?Vo:(f=Number(u.substring(f,m)),isNaN(f)?ac:(m+=1,m+f>u.length?Vo:(u=u.slice(m,m+f),o.C=m+f,u)))}yn.prototype.cancel=function(){this.K=!0,Gn(this)};function si(o){o.T=Date.now()+o.H,uc(o,o.H)}function uc(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Zr(h(o.aa,o),u)}function No(o){o.D&&(a.clearTimeout(o.D),o.D=null)}yn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(fm(this.i,this.B),this.M!=2&&(Jr(),ue(17)),Gn(this),this.m=2,ns(this)):uc(this,this.T-o)};function ns(o){o.j.I==0||o.K||Mc(o.j,o)}function Gn(o){No(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Rt(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function xo(o,u){try{var f=o.j;if(f.I!=0&&(f.g==o||Oo(f.h,o))){if(!o.L&&Oo(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){t:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)ui(f),li(f);else break t;Bo(f),ue(18)}}else f.xa=C[1],0<f.xa-f.K&&C[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Zr(h(f.Va,f),6e3));dc(f.h)<=1&&f.ta&&(f.ta=void 0)}else Kn(f,11)}else if((o.L||f.g==o)&&ui(f),!E(u))for(C=f.Ba.g.parse(u),u=0;u<C.length;u++){let bt=C[u];const Wt=bt[0];if(!(Wt<=f.K))if(f.K=Wt,bt=bt[1],f.I==2)if(bt[0]=="c"){f.M=bt[1],f.ba=bt[2];const $e=bt[3];$e!=null&&(f.ka=$e,f.j.info("VER="+f.ka));const Wn=bt[4];Wn!=null&&(f.za=Wn,f.j.info("SVER="+f.za));const In=bt[5];In!=null&&typeof In=="number"&&In>0&&(m=1.5*In,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const An=o.g;if(An){const fi=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var P=m.h;P.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Mo(P,P.h),P.h=null))}if(m.G){const qo=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(m.wa=qo,Vt(m.J,m.G,qo))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var G=o;if(m.na=Fc(m,m.L?m.ba:null,m.W),G.L){pc(m.h,G);var ut=G,$t=m.O;$t&&(ut.H=$t),ut.D&&(No(ut),si(ut)),m.g=G}else xc(m);f.i.length>0&&ci(f)}else bt[0]!="stop"&&bt[0]!="close"||Kn(f,7);else f.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Kn(f,7):Uo(f):bt[0]!="noop"&&f.l&&f.l.qa(bt),f.A=0)}}Jr(4)}catch{}}var _m=class{constructor(o,u){this.g=o,this.map=u}};function hc(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function dc(o){return o.h?1:o.g?o.g.size:0}function Oo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Mo(o,u){o.g?o.g.add(u):o.h=u}function pc(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}hc.prototype.cancel=function(){if(this.i=mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function mc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.G);return u}return v(o.i)}var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ym(o,u){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let C,P=null;m>=0?(C=o[f].substring(0,m),P=o[f].substring(m+1)):C=o[f],u(C,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function En(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof En?(this.l=o.l,rs(this,o.j),this.o=o.o,this.g=o.g,ss(this,o.u),this.h=o.h,ko(this,Ic(o.i)),this.m=o.m):o&&(u=String(o).match(gc))?(this.l=!1,rs(this,u[1]||"",!0),this.o=is(u[2]||""),this.g=is(u[3]||"",!0),ss(this,u[4]),this.h=is(u[5]||"",!0),ko(this,u[6]||"",!0),this.m=is(u[7]||"")):(this.l=!1,this.i=new as(null,this.l))}En.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(os(u,_c,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(os(u,_c,!0),"@"),o.push(es(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(os(f,f.charAt(0)=="/"?Tm:vm,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",os(f,Am)),o.join("")},En.prototype.resolve=function(o){const u=qe(this);let f=!!o.j;f?rs(u,o.j):f=!!o.o,f?u.o=o.o:f=!!o.g,f?u.g=o.g:f=o.u!=null;var m=o.h;if(f)ss(u,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var C=u.h.lastIndexOf("/");C!=-1&&(m=u.h.slice(0,C+1)+m)}if(C=m,C==".."||C==".")m="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){m=C.lastIndexOf("/",0)==0,C=C.split("/");const P=[];for(let G=0;G<C.length;){const ut=C[G++];ut=="."?m&&G==C.length&&P.push(""):ut==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),m&&G==C.length&&P.push("")):(P.push(ut),m=!0)}m=P.join("/")}else m=C}return f?u.h=m:f=o.i.toString()!=="",f?ko(u,Ic(o.i)):f=!!o.m,f&&(u.m=o.m),u};function qe(o){return new En(o)}function rs(o,u,f){o.j=f?is(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ss(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function ko(o,u,f){u instanceof as?(o.i=u,wm(o.i,o.l)):(f||(u=os(u,Im)),o.i=new as(u,o.l))}function Vt(o,u,f){o.i.set(u,f)}function ii(o){return Vt(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function is(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function os(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Em),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Em(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var _c=/[#\/\?@]/g,vm=/[#\?:]/g,Tm=/[#\?]/g,Im=/[#\?@]/g,Am=/#/g;function as(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function zn(o){o.g||(o.g=new Map,o.h=0,o.i&&ym(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}e=as.prototype,e.add=function(o,u){zn(this),this.i=null,o=_r(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function yc(o,u){zn(o),u=_r(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ec(o,u){return zn(o),u=_r(o,u),o.g.has(u)}e.forEach=function(o,u){zn(this),this.g.forEach(function(f,m){f.forEach(function(C){o.call(u,C,m,this)},this)},this)};function vc(o,u){zn(o);let f=[];if(typeof u=="string")Ec(o,u)&&(f=f.concat(o.g.get(_r(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)f=f.concat(o[u]);return f}e.set=function(o,u){return zn(this),this.i=null,o=_r(this,o),Ec(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=vc(this,o),o.length>0?String(o[0]):u):u};function Tc(o,u,f){yc(o,u),f.length>0&&(o.i=null,o.g.set(_r(o,u),v(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var f=u[m];const C=es(f);f=vc(this,f);for(let P=0;P<f.length;P++){let G=C;f[P]!==""&&(G+="="+es(f[P])),o.push(G)}}return this.i=o.join("&")};function Ic(o){const u=new as;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function _r(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function wm(o,u){u&&!o.j&&(zn(o),o.i=null,o.g.forEach(function(f,m){const C=m.toLowerCase();m!=C&&(yc(this,m),Tc(this,C,f))},o)),o.j=u}function Rm(o,u){const f=new ts;if(a.Image){const m=new Image;m.onload=d(vn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=d(vn,f,"TestLoadImage: error",!1,u,m),m.onabort=d(vn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=d(vn,f,"TestLoadImage: timeout",!1,u,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function bm(o,u){const f=new ts,m=new AbortController,C=setTimeout(()=>{m.abort(),vn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(P=>{clearTimeout(C),P.ok?vn(f,"TestPingServer: ok",!0,u):vn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),vn(f,"TestPingServer: error",!1,u)})}function vn(o,u,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function Sm(){this.g=new re}function Lo(o){this.i=o.Sb||null,this.h=o.ab||!1}p(Lo,Ie),Lo.prototype.g=function(){return new oi(this.i,this.h)};function oi(o,u){j.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(oi,j),e=oi.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,cs(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ac(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ac(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ls(this):cs(this),this.readyState==3&&Ac(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,ls(this))},e.Na=function(o){this.g&&(this.response=o,ls(this))},e.ga=function(){this.g&&ls(this)};function ls(o){o.readyState=4,o.l=null,o.j=null,o.B=null,cs(o)}e.setRequestHeader=function(o,u){this.A.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function cs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function wc(o){let u="";return _e(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function Fo(o,u,f){t:{for(m in f){var m=!1;break t}m=!0}m||(f=wc(f),typeof o=="string"?f!=null&&es(f):Vt(o,u,f))}function Ot(o){j.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ot,j);var Cm=/^https?$/i,Pm=["POST","PUT"];e=Ot.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ic.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){Rc(this,P);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),C=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Pm,u,void 0)>=0)||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,G]of f)this.g.setRequestHeader(P,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){Rc(this,P)}};function Rc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,bc(o),ai(o)}function bc(o){o.A||(o.A=!0,B(o,"complete"),B(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,B(this,"complete"),B(this,"abort"),ai(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Ot.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Sc(this):this.Xa())},e.Xa=function(){Sc(this)};function Sc(o){if(o.h&&typeof i<"u"){if(o.v&&Tn(o)==4)setTimeout(o.Ca.bind(o),0);else if(B(o,"readystatechange"),Tn(o)==4){o.h=!1;try{const P=o.ca();t:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var m;if(m=P===0){let G=String(o.D).match(gc)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),m=!Cm.test(G?G.toLowerCase():"")}f=m}if(f)B(o,"complete"),B(o,"success");else{o.o=6;try{var C=Tn(o)>2?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.ca()+"]",bc(o)}}finally{ai(o)}}}}function ai(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,u||B(o,"ready");try{f.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Tn(o){return o.g?o.g.readyState:0}e.ca=function(){try{return Tn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),ne(u)}};function Cc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Vm(o){const u={};o=(o.g&&Tn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(E(o[m]))continue;var f=pm(o[m]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=u[C]||[];u[C]=P,P.push(f)}je(u,function(m){return m.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Pc(o){this.za=0,this.i=[],this.j=new ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=us("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=us("baseRetryDelayMs",5e3,o),this.Za=us("retryDelaySeedMs",1e4,o),this.Ta=us("forwardChannelMaxRetries",2,o),this.va=us("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new hc(o&&o.concurrentRequestLimit),this.Ba=new Sm,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Pc.prototype,e.ka=8,e.I=1,e.connect=function(o,u,f,m){ue(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=Fc(this,null,this.W),ci(this)};function Uo(o){if(Vc(o),o.I==3){var u=o.V++,f=qe(o.J);if(Vt(f,"SID",o.M),Vt(f,"RID",u),Vt(f,"TYPE","terminate"),hs(o,f),u=new yn(o,o.j,u),u.M=2,u.A=ii(qe(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=u.A,f=!0),f||(u.g=Uc(u.j,null),u.g.ea(u.A)),u.F=Date.now(),si(u)}Lc(o)}function li(o){o.g&&(jo(o),o.g.cancel(),o.g=null)}function Vc(o){li(o),o.v&&(a.clearTimeout(o.v),o.v=null),ui(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ci(o){if(!fc(o.h)&&!o.m){o.m=!0;var u=o.Ea;lt||y(),ft||(lt(),ft=!0),A.add(u,o),o.D=0}}function Dm(o,u){return dc(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Zr(h(o.Ea,o,u),kc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const C=new yn(this,this.j,o);let P=this.o;if(this.U&&(P?(P=Te(P),en(P,this.U)):P=this.U),this.u!==null||this.R||(C.J=P,P=null),this.S)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=Nc(this,C,u),f=qe(this.J),Vt(f,"RID",o),Vt(f,"CVER",22),this.G&&Vt(f,"X-HTTP-Session-Id",this.G),hs(this,f),P&&(this.R?u="headers="+es(wc(P))+"&"+u:this.u&&Fo(f,this.u,P)),Mo(this.h,C),this.Ra&&Vt(f,"TYPE","init"),this.S?(Vt(f,"$req",u),Vt(f,"SID","null"),C.U=!0,Do(C,f,null)):Do(C,f,u),this.I=2}}else this.I==3&&(o?Dc(this,o):this.i.length==0||fc(this.h)||Dc(this))};function Dc(o,u){var f;u?f=u.l:f=o.V++;const m=qe(o.J);Vt(m,"SID",o.M),Vt(m,"RID",f),Vt(m,"AID",o.K),hs(o,m),o.u&&o.o&&Fo(m,o.u,o.o),f=new yn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),u&&(o.i=u.G.concat(o.i)),u=Nc(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Mo(o.h,f),Do(f,m,u)}function hs(o,u){o.H&&_e(o.H,function(f,m){Vt(u,m,f)}),o.l&&_e({},function(f,m){Vt(u,m,f)})}function Nc(o,u,f){f=Math.min(o.i.length,f);const m=o.l?h(o.l.Ka,o.l,o):null;t:{var C=o.i;let ut=-1;for(;;){const $t=["count="+f];ut==-1?f>0?(ut=C[0].g,$t.push("ofs="+ut)):ut=0:$t.push("ofs="+ut);let bt=!0;for(let Wt=0;Wt<f;Wt++){var P=C[Wt].g;const $e=C[Wt].map;if(P-=ut,P<0)ut=Math.max(0,C[Wt].g-100),bt=!1;else try{P="req"+P+"_"||"";try{var G=$e instanceof Map?$e:Object.entries($e);for(const[Wn,In]of G){let An=In;l(In)&&(An=Et(In)),$t.push(P+Wn+"="+encodeURIComponent(An))}}catch(Wn){throw $t.push(P+"type="+encodeURIComponent("_badmap")),Wn}}catch{m&&m($e)}}if(bt){G=$t.join("&");break t}}G=void 0}return o=o.i.splice(0,f),u.G=o,G}function xc(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;lt||y(),ft||(lt(),ft=!0),A.add(u,o),o.A=0}}function Bo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Zr(h(o.Da,o),kc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,Oc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Zr(h(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ue(10),li(this),Oc(this))};function jo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Oc(o){o.g=new yn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=qe(o.na);Vt(u,"RID","rpc"),Vt(u,"SID",o.M),Vt(u,"AID",o.K),Vt(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&Vt(u,"TO",o.ia),Vt(u,"TYPE","xmlhttp"),hs(o,u),o.u&&o.o&&Fo(u,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=ii(qe(u)),f.u=null,f.R=!0,lc(f,o)}e.Va=function(){this.C!=null&&(this.C=null,li(this),Bo(this),ue(19))};function ui(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Mc(o,u){var f=null;if(o.g==u){ui(o),jo(o),o.g=null;var m=2}else if(Oo(o.h,u))f=u.G,pc(o.h,u),m=1;else return;if(o.I!=0){if(u.o)if(m==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var C=o.D;m=Hn(),B(m,new rc(m,f)),ci(o)}else xc(o);else if(C=u.m,C==3||C==0&&u.X>0||!(m==1&&Dm(o,u)||m==2&&Bo(o)))switch(f&&f.length>0&&(u=o.h,u.i=u.i.concat(f)),C){case 1:Kn(o,5);break;case 4:Kn(o,10);break;case 3:Kn(o,6);break;default:Kn(o,2)}}}function kc(o,u){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*u}function Kn(o,u){if(o.j.info("Error code "+u),u==2){var f=h(o.bb,o),m=o.Ua;const C=!m;m=new En(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rs(m,"https"),ii(m),C?Rm(m.toString(),f):bm(m.toString(),f)}else ue(2);o.I=0,o.l&&o.l.pa(u),Lc(o),Vc(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Lc(o){if(o.I=0,o.ja=[],o.l){const u=mc(o.h);(u.length!=0||o.i.length!=0)&&(V(o.ja,u),V(o.ja,o.i),o.h.i.length=0,v(o.i),o.i.length=0),o.l.oa()}}function Fc(o,u,f){var m=f instanceof En?qe(f):new En(f);if(m.g!="")u&&(m.g=u+"."+m.g),ss(m,m.u);else{var C=a.location;m=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;const P=new En(null);m&&rs(P,m),u&&(P.g=u),C&&ss(P,C),f&&(P.h=f),m=P}return f=o.G,u=o.wa,f&&u&&Vt(m,f,u),Vt(m,"VER",o.ka),hs(o,m),m}function Uc(o,u,f){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Ot(new Lo({ab:f})):new Ot(o.ma),u.Fa(o.L),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}e=Bc.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function hi(){}hi.prototype.g=function(o,u){return new we(o,u)};function we(o,u){j.call(this),this.g=new Pc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!E(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new yr(this)}p(we,j),we.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Uo(this.g)},we.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=Et(o),o=f);u.i.push(new _m(u.Ya++,o)),u.I==3&&ci(u)},we.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,we.Z.N.call(this)};function jc(o){mr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}p(jc,mr);function qc(){Yt.call(this),this.status=1}p(qc,Yt);function yr(o){this.g=o}p(yr,Bc),yr.prototype.ra=function(){B(this.g,"a")},yr.prototype.qa=function(o){B(this.g,new jc(o))},yr.prototype.pa=function(o){B(this.g,new qc)},yr.prototype.oa=function(){B(this.g,"b")},hi.prototype.createWebChannel=hi.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,Ld=function(){return new hi},kd=function(){return Hn()},Md=Kt,Ma={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,bi=ri,sc.COMPLETE="complete",Od=sc,Ae.EventType=Oe,Oe.OPEN="a",Oe.CLOSE="b",Oe.ERROR="c",Oe.MESSAGE="d",j.prototype.listen=j.prototype.J,gs=Ae,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,xd=Ot}).apply(typeof gi<"u"?gi:typeof self<"u"?self:typeof window<"u"?window:{});const Ku="@firebase/firestore",Wu="4.9.3";class ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ie.UNAUTHENTICATED=new ie(null),ie.GOOGLE_CREDENTIALS=new ie("google-credentials-uid"),ie.FIRST_PARTY=new ie("first-party-uid"),ie.MOCK_USER=new ie("mock-user");let zr="12.7.0";const lr=new bd("@firebase/firestore");function Ar(){return lr.logLevel}function J(e,...t){if(lr.logLevel<=yt.DEBUG){const n=t.map(Il);lr.debug(`Firestore (${zr}): ${e}`,...n)}}function mn(e,...t){if(lr.logLevel<=yt.ERROR){const n=t.map(Il);lr.error(`Firestore (${zr}): ${e}`,...n)}}function Ur(e,...t){if(lr.logLevel<=yt.WARN){const n=t.map(Il);lr.warn(`Firestore (${zr}): ${e}`,...n)}}function Il(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function st(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Fd(e,r,n)}function Fd(e,t,n){let r=`FIRESTORE (${zr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function wt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Fd(t,s,r)}function at(e,t){return e}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Gr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ir{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class Ud{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Xv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ie.UNAUTHENTICATED)))}shutdown(){}}class Yv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Jv{constructor(t){this.t=t,this.currentUser=ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){wt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new Ud(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return wt(t===null||typeof t=="string",2055,{h:t}),new ie(t)}}class Zv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tT{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Zv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ie.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eT{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){wt(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nT(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Al{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function pt(e,t){return e<t?-1:e>t?1:0}function ka(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return la(s)===la(i)?pt(s,i):la(s)?1:-1}return pt(e.length,t.length)}const rT=55296,sT=57343;function la(e){const t=e.charCodeAt(0);return t>=rT&&t<=sT}function Br(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}const Xu="__name__";class ze{constructor(t,n,r){n===void 0?n=0:n>t.length&&st(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&st(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ze.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ze?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=ze.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return pt(t.length,n.length)}static compareSegments(t,n){const r=ze.isNumericId(t),s=ze.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ze.extractNumericId(t).compare(ze.extractNumericId(n)):ka(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return xn.fromString(t.substring(4,t.length-2))}}class Pt extends ze{construct(t,n,r){return new Pt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new X(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const iT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends ze{construct(t,n,r){return new Zt(t,n,r)}static isValidIdentifier(t){return iT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xu}static keyField(){return new Zt([Xu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new X(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new X(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zt(n)}static emptyPath(){return new Zt([])}}class et{constructor(t){this.path=t}static fromPath(t){return new et(Pt.fromString(t))}static fromName(t){return new et(Pt.fromString(t).popFirst(5))}static empty(){return new et(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new Pt(t.slice()))}}function Bd(e,t,n){if(!n)throw new X(M.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oT(e,t,n,r){if(t===!0&&r===!0)throw new X(M.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Yu(e){if(!et.isDocumentKey(e))throw new X(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ju(e){if(et.isDocumentKey(e))throw new X(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jd(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function go(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":st(12329,{type:typeof e})}function Ps(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new X(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=go(e);throw new X(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function jt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Js(e,t){if(!jd(e))throw new X(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(M.INVALID_ARGUMENT,n);return!0}const Zu=-62135596800,th=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(t){return Dt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*th);return new Dt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Zu)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new X(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/th}_compareTo(t){return this.seconds===t.seconds?pt(this.nanoseconds,t.nanoseconds):pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Js(t,Dt._jsonSchema))return new Dt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Zu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:jt("string",Dt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new Dt(0,0))}static max(){return new it(new Dt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $s=-1;function aT(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new kn(s,et.empty(),t)}function lT(e){return new kn(e.readTime,e.key,$s)}class kn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new kn(it.min(),et.empty(),$s)}static max(){return new kn(it.max(),et.empty(),$s)}}function cT(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=et.comparator(e.documentKey,t.documentKey),n!==0?n:pt(e.largestBatchId,t.largestBatchId))}const uT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Kr(e){if(e.code!==M.FAILED_PRECONDITION||e.message!==uT)throw e;J("LocalStore","Unexpectedly lost primary lease")}class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new k(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):k.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):k.reject(n)}static resolve(t){return new k(((n,r)=>{n(t)}))}static reject(t){return new k(((n,r)=>{r(t)}))}static waitFor(t){return new k(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(t){let n=k.resolve(!1);for(const r of t)n=n.next((s=>s?k.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new k(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(t[h]).next((d=>{a[h]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new k(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function fT(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wr(e){return e.name==="IndexedDbTransactionError"}class _o{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_o.ce=-1;const wl=-1;function yo(e){return e==null}function Gi(e){return e===0&&1/e==-1/0}function dT(e){return typeof e=="number"&&Number.isInteger(e)&&!Gi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const qd="";function pT(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=eh(t)),t=mT(e.get(n),t);return eh(t)}function mT(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case qd:n+="";break;default:n+=i}}return n}function eh(e){return e+qd+""}function nh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ur(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $d(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xt{constructor(t,n){this.comparator=t,this.root=n||Jt.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _i(this.root,t,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _i(this.root,t,this.comparator,!0)}}class _i{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Jt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Jt.RED,this.left=s??Jt.EMPTY,this.right=i??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Jt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw st(27949);return t+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Jt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(t){return new rh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new zt(this.comparator);return n.data=t,n}}class rh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ke{constructor(t){this.fields=t,t.sort(Zt.comparator)}static empty(){return new ke([])}unionWith(t){let n=new zt(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ke(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Br(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class Hd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class te{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hd("Invalid base64 string: "+i):i}})(t);return new te(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new te(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}te.EMPTY_BYTE_STRING=new te("");const gT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ln(e){if(wt(!!e,39018),typeof e=="string"){let t=0;const n=gT.exec(e);if(wt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Fn(e){return typeof e=="string"?te.fromBase64String(e):te.fromUint8Array(e)}const Gd="server_timestamp",zd="__type__",Kd="__previous_value__",Wd="__local_write_time__";function Rl(e){return(e?.mapValue?.fields||{})[zd]?.stringValue===Gd}function Eo(e){const t=e.mapValue.fields[Kd];return Rl(t)?Eo(t):t}function Hs(e){const t=Ln(e.mapValue.fields[Wd].timestampValue);return new Dt(t.seconds,t.nanos)}class _T{constructor(t,n,r,s,i,a,l,c,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const zi="(default)";class Gs{constructor(t,n){this.projectId=t,this.database=n||zi}static empty(){return new Gs("","")}get isDefaultDatabase(){return this.database===zi}isEqual(t){return t instanceof Gs&&t.projectId===this.projectId&&t.database===this.database}}const Qd="__type__",yT="__max__",yi={mapValue:{}},Xd="__vector__",Ki="value";function Un(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Rl(e)?4:vT(e)?9007199254740991:ET(e)?10:11:st(28295,{value:e})}function tn(e,t){if(e===t)return!0;const n=Un(e);if(n!==Un(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hs(e).isEqual(Hs(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ln(s.timestampValue),l=Ln(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Fn(s.bytesValue).isEqual(Fn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return kt(s.geoPointValue.latitude)===kt(i.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return kt(s.integerValue)===kt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=kt(s.doubleValue),l=kt(i.doubleValue);return a===l?Gi(a)===Gi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Br(e.arrayValue.values||[],t.arrayValue.values||[],tn);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(nh(a)!==nh(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!tn(a[c],l[c])))return!1;return!0})(e,t);default:return st(52216,{left:e})}}function zs(e,t){return(e.values||[]).find((n=>tn(n,t)))!==void 0}function jr(e,t){if(e===t)return 0;const n=Un(e),r=Un(t);if(n!==r)return pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pt(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=kt(i.integerValue||i.doubleValue),c=kt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(e,t);case 3:return sh(e.timestampValue,t.timestampValue);case 4:return sh(Hs(e),Hs(t));case 5:return ka(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Fn(i),c=Fn(a);return l.compareTo(c)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=pt(l[h],c[h]);if(d!==0)return d}return pt(l.length,c.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=pt(kt(i.latitude),kt(a.latitude));return l!==0?l:pt(kt(i.longitude),kt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return ih(e.arrayValue,t.arrayValue);case 10:return(function(i,a){const l=i.fields||{},c=a.fields||{},h=l[Ki]?.arrayValue,d=c[Ki]?.arrayValue,p=pt(h?.values?.length||0,d?.values?.length||0);return p!==0?p:ih(h,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===yi.mapValue&&a===yi.mapValue)return 0;if(i===yi.mapValue)return 1;if(a===yi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=ka(c[p],d[p]);if(g!==0)return g;const v=jr(l[c[p]],h[d[p]]);if(v!==0)return v}return pt(c.length,d.length)})(e.mapValue,t.mapValue);default:throw st(23264,{he:n})}}function sh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return pt(e,t);const n=Ln(e),r=Ln(t),s=pt(n.seconds,r.seconds);return s!==0?s:pt(n.nanos,r.nanos)}function ih(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=jr(n[s],r[s]);if(i)return i}return pt(n.length,r.length)}function qr(e){return La(e)}function La(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Ln(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Fn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return et.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=La(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${La(n.fields[a])}`;return s+"}"})(e.mapValue):st(61005,{value:e})}function Si(e){switch(Un(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eo(e);return t?16+Si(t):16;case 5:return 2*e.stringValue.length;case 6:return Fn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Si(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return ur(r.fields,((i,a)=>{s+=i.length+Si(a)})),s})(e.mapValue);default:throw st(13486,{value:e})}}function oh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Fa(e){return!!e&&"integerValue"in e}function bl(e){return!!e&&"arrayValue"in e}function ah(e){return!!e&&"nullValue"in e}function lh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ci(e){return!!e&&"mapValue"in e}function ET(e){return(e?.mapValue?.fields||{})[Qd]?.stringValue===Xd}function Vs(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ur(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Vs(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vs(e.arrayValue.values[n]);return t}return{...e}}function vT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===yT}class Ce{constructor(t){this.value=t}static empty(){return new Ce({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ci(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vs(n)}setAll(t){let n=Zt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Vs(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ci(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return tn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ci(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){ur(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ce(Vs(this.value))}}function Yd(e){const t=[];return ur(e.fields,((n,r)=>{const s=new Zt([n]);if(Ci(r)){const i=Yd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new ke(t)}class ae{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,it.min(),it.min(),it.min(),Ce.empty(),0)}static newFoundDocument(t,n,r,s){return new ae(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new ae(t,2,n,it.min(),it.min(),Ce.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,it.min(),it.min(),Ce.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ce.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ce.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wi{constructor(t,n){this.position=t,this.inclusive=n}}function ch(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=et.comparator(et.fromName(a.referenceValue),n.key):r=jr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!tn(e.position[n],t.position[n]))return!1;return!0}class Ks{constructor(t,n="asc"){this.field=t,this.dir=n}}function TT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Jd{}class Bt extends Jd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new AT(t,n,r):n==="array-contains"?new bT(t,r):n==="in"?new ST(t,r):n==="not-in"?new CT(t,r):n==="array-contains-any"?new PT(t,r):new Bt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new wT(t,r):new RT(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jr(n,this.value)):n!==null&&Un(this.value)===Un(n)&&this.matchesComparison(jr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends Jd{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Be(t,n)}matches(t){return Zd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zd(e){return e.op==="and"}function tp(e){return IT(e)&&Zd(e)}function IT(e){for(const t of e.filters)if(t instanceof Be)return!1;return!0}function Ua(e){if(e instanceof Bt)return e.field.canonicalString()+e.op.toString()+qr(e.value);if(tp(e))return e.filters.map((t=>Ua(t))).join(",");{const t=e.filters.map((n=>Ua(n))).join(",");return`${e.op}(${t})`}}function ep(e,t){return e instanceof Bt?(function(r,s){return s instanceof Bt&&r.op===s.op&&r.field.isEqual(s.field)&&tn(r.value,s.value)})(e,t):e instanceof Be?(function(r,s){return s instanceof Be&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&ep(a,s.filters[l])),!0):!1})(e,t):void st(19439)}function np(e){return e instanceof Bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${qr(n.value)}`})(e):e instanceof Be?(function(n){return n.op.toString()+" {"+n.getFilters().map(np).join(" ,")+"}"})(e):"Filter"}class AT extends Bt{constructor(t,n,r){super(t,n,r),this.key=et.fromName(r.referenceValue)}matches(t){const n=et.comparator(t.key,this.key);return this.matchesComparison(n)}}class wT extends Bt{constructor(t,n){super(t,"in",n),this.keys=rp("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class RT extends Bt{constructor(t,n){super(t,"not-in",n),this.keys=rp("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function rp(e,t){return(t.arrayValue?.values||[]).map((n=>et.fromName(n.referenceValue)))}class bT extends Bt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bl(n)&&zs(n.arrayValue,this.value)}}class ST extends Bt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&zs(this.value.arrayValue,n)}}class CT extends Bt{constructor(t,n){super(t,"not-in",n)}matches(t){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zs(this.value.arrayValue,n)}}class PT extends Bt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>zs(this.value.arrayValue,r)))}}class VT{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function hh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new VT(e,t,n,r,s,i,a)}function Sl(e){const t=at(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Ua(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),yo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>qr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>qr(r))).join(",")),t.Te=n}return t.Te}function Cl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!TT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ep(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uh(e.startAt,t.startAt)&&uh(e.endAt,t.endAt)}function Ba(e){return et.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class Qr{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DT(e,t,n,r,s,i,a,l){return new Qr(e,t,n,r,s,i,a,l)}function Pl(e){return new Qr(e)}function fh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function sp(e){return e.collectionGroup!==null}function Ds(e){const t=at(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new zt(Zt.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Ks(i,r))})),n.has(Zt.keyField().canonicalString())||t.Ie.push(new Ks(Zt.keyField(),r))}return t.Ie}function Qe(e){const t=at(e);return t.Ee||(t.Ee=NT(t,Ds(e))),t.Ee}function NT(e,t){if(e.limitType==="F")return hh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ks(s.field,i)}));const n=e.endAt?new Wi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wi(e.startAt.position,e.startAt.inclusive):null;return hh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ja(e,t){const n=e.filters.concat([t]);return new Qr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qa(e,t,n){return new Qr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vo(e,t){return Cl(Qe(e),Qe(t))&&e.limitType===t.limitType}function ip(e){return`${Sl(Qe(e))}|lt:${e.limitType}`}function wr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>np(s))).join(", ")}]`),yo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>qr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>qr(s))).join(",")),`Target(${r})`})(Qe(e))}; limitType=${e.limitType})`}function To(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):et.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of Ds(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const h=ch(a,l,c);return a.inclusive?h<=0:h<0})(r.startAt,Ds(r),s)||r.endAt&&!(function(a,l,c){const h=ch(a,l,c);return a.inclusive?h>=0:h>0})(r.endAt,Ds(r),s))})(e,t)}function xT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function op(e){return(t,n)=>{let r=!1;for(const s of Ds(e)){const i=OT(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function OT(e,t,n){const r=e.field.isKeyField()?et.comparator(t.key,n.key):(function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?jr(c,h):st(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:e.dir})}}class hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ur(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return $d(this.inner)}size(){return this.innerSize}}const MT=new xt(et.comparator);function gn(){return MT}const ap=new xt(et.comparator);function _s(...e){let t=ap;for(const n of e)t=t.insert(n.key,n);return t}function lp(e){let t=ap;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function tr(){return Ns()}function cp(){return Ns()}function Ns(){return new hr((e=>e.toString()),((e,t)=>e.isEqual(t)))}const kT=new xt(et.comparator),LT=new zt(et.comparator);function mt(...e){let t=LT;for(const n of e)t=t.add(n);return t}const FT=new zt(pt);function UT(){return FT}function Vl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gi(t)?"-0":t}}function up(e){return{integerValue:""+e}}function BT(e,t){return dT(t)?up(t):Vl(e,t)}class Io{constructor(){this._=void 0}}function jT(e,t,n){return e instanceof Qi?(function(s,i){const a={fields:{[zd]:{stringValue:Gd},[Wd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rl(i)&&(i=Eo(i)),i&&(a.fields[Kd]=i),{mapValue:a}})(n,t):e instanceof Ws?fp(e,t):e instanceof Qs?dp(e,t):(function(s,i){const a=hp(s,i),l=dh(a)+dh(s.Ae);return Fa(a)&&Fa(s.Ae)?up(l):Vl(s.serializer,l)})(e,t)}function qT(e,t,n){return e instanceof Ws?fp(e,t):e instanceof Qs?dp(e,t):n}function hp(e,t){return e instanceof Xi?(function(r){return Fa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Qi extends Io{}class Ws extends Io{constructor(t){super(),this.elements=t}}function fp(e,t){const n=pp(t);for(const r of e.elements)n.some((s=>tn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Qs extends Io{constructor(t){super(),this.elements=t}}function dp(e,t){let n=pp(t);for(const r of e.elements)n=n.filter((s=>!tn(s,r)));return{arrayValue:{values:n}}}class Xi extends Io{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function dh(e){return kt(e.integerValue||e.doubleValue)}function pp(e){return bl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function $T(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Ws&&s instanceof Ws||r instanceof Qs&&s instanceof Qs?Br(r.elements,s.elements,tn):r instanceof Xi&&s instanceof Xi?tn(r.Ae,s.Ae):r instanceof Qi&&s instanceof Qi})(e.transform,t.transform)}class HT{constructor(t,n){this.version=t,this.transformResults=n}}class un{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new un}static exists(t){return new un(void 0,t)}static updateTime(t){return new un(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ao{}function mp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new _p(e.key,un.none()):new Zs(e.key,e.data,un.none());{const n=e.data,r=Ce.empty();let s=new zt(Zt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new fr(e.key,r,new ke(s.toArray()),un.none())}}function GT(e,t,n){e instanceof Zs?(function(s,i,a){const l=s.value.clone(),c=mh(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof fr?(function(s,i,a){if(!Pi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=mh(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(gp(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function xs(e,t,n,r){return e instanceof Zs?(function(i,a,l,c){if(!Pi(i.precondition,a))return l;const h=i.value.clone(),d=gh(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(e,t,n,r):e instanceof fr?(function(i,a,l,c){if(!Pi(i.precondition,a))return l;const h=gh(i.fieldTransforms,c,a),d=a.data;return d.setAll(gp(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(e,t,n,r):(function(i,a,l){return Pi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function zT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=hp(r.transform,s||null);i!=null&&(n===null&&(n=Ce.empty()),n.set(r.field,i))}return n||null}function ph(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Br(r,s,((i,a)=>$T(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zs extends Ao{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fr extends Ao{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function mh(e,t,n){const r=new Map;wt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,qT(a,l,n[s]))}return r}function gh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,jT(i,a,t))}return r}class _p extends Ao{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KT extends Ao{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&GT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=xs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=xs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=cp();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=mp(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(it.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),mt())}isEqual(t){return this.batchId===t.batchId&&Br(this.mutations,t.mutations,((n,r)=>ph(n,r)))&&Br(this.baseMutations,t.baseMutations,((n,r)=>ph(n,r)))}}class Dl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){wt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return kT})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Dl(t,n,r,s)}}class QT{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XT{constructor(t,n){this.count=t,this.unchangedNames=n}}var Ut,_t;function YT(e){switch(e){case M.OK:return st(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return st(15467,{code:e})}}function yp(e){if(e===void 0)return mn("GRPC error has no .code"),M.UNKNOWN;switch(e){case Ut.OK:return M.OK;case Ut.CANCELLED:return M.CANCELLED;case Ut.UNKNOWN:return M.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return M.INTERNAL;case Ut.UNAVAILABLE:return M.UNAVAILABLE;case Ut.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ut.NOT_FOUND:return M.NOT_FOUND;case Ut.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ut.ABORTED:return M.ABORTED;case Ut.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ut.DATA_LOSS:return M.DATA_LOSS;default:return st(39323,{code:e})}}(_t=Ut||(Ut={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function JT(){return new TextEncoder}const ZT=new xn([4294967295,4294967295],0);function _h(e){const t=JT().encode(e),n=new Nd;return n.update(t),new Uint8Array(n.digest())}function yh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new xn([n,r],0),new xn([s,i],0)]}class Nl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ys(`Invalid padding: ${n}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ys(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=xn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(xn.fromNumber(r)));return s.compare(ZT)===1&&(s=new xn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=_h(t),[r,s]=yh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Nl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=_h(t),[r,s]=yh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ys extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ti.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new wo(it.min(),s,new xt(pt),gn(),mt())}}class ti{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ti(r,n,mt(),mt(),mt())}}class Vi{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Ep{constructor(t,n){this.targetId=t,this.Ce=n}}class vp{constructor(t,n,r=te.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Eh{constructor(){this.ve=0,this.Fe=vh(),this.Me=te.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=mt(),n=mt(),r=mt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:st(38017,{changeType:i})}})),new ti(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=vh()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tI{constructor(t){this.Ge=t,this.ze=new Map,this.je=gn(),this.Je=Ei(),this.He=Ei(),this.Ye=new xt(pt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:st(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ba(i))if(r===0){const a=new et(i.path);this.et(n,a,ae.newNoDocument(a,it.min()))}else wt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),c=l?this.ct(l,t,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Fn(r).toUint8Array()}catch(c){if(c instanceof Hd)return Ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Nl(a,s,i)}catch(c){return Ur(c instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Ba(l.target)){const c=new et(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,ae.newNoDocument(c,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=mt();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new wo(t,n,this.Ye,this.je,r);return this.je=gn(),this.Je=Ei(),this.He=Ei(),this.Ye=new xt(pt),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Eh,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new zt(pt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new zt(pt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||J("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Eh),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ei(){return new xt(et.comparator)}function vh(){return new xt(et.comparator)}const eI={asc:"ASCENDING",desc:"DESCENDING"},nI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI={and:"AND",or:"OR"};class sI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function $a(e,t){return e.useProto3Json||yo(t)?t:{value:t}}function Yi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function iI(e,t){return Yi(e,t.toTimestamp())}function Xe(e){return wt(!!e,49232),it.fromTimestamp((function(n){const r=Ln(n);return new Dt(r.seconds,r.nanos)})(e))}function xl(e,t){return Ha(e,t).canonicalString()}function Ha(e,t){const n=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Ip(e){const t=Pt.fromString(e);return wt(Sp(t),10190,{key:t.toString()}),t}function Ga(e,t){return xl(e.databaseId,t.path)}function ca(e,t){const n=Ip(t);if(n.get(1)!==e.databaseId.projectId)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new X(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new et(wp(n))}function Ap(e,t){return xl(e.databaseId,t)}function oI(e){const t=Ip(e);return t.length===4?Pt.emptyPath():wp(t)}function za(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wp(e){return wt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Th(e,t,n){return{name:Ga(e,t),fields:n.value.mapValue.fields}}function aI(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:st(39313,{state:h})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?(wt(d===void 0||typeof d=="string",58123),te.fromBase64String(d||"")):(wt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),te.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(h){const d=h.code===void 0?M.UNKNOWN:yp(h.code);return new X(d,h.message||"")})(a);n=new vp(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ca(e,r.document.name),i=Xe(r.document.updateTime),a=r.document.createTime?Xe(r.document.createTime):it.min(),l=new Ce({mapValue:{fields:r.document.fields}}),c=ae.newFoundDocument(s,i,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Vi(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ca(e,r.document),i=r.readTime?Xe(r.readTime):it.min(),a=ae.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Vi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ca(e,r.document),i=r.removedTargetIds||[];n=new Vi([],i,s,null)}else{if(!("filter"in t))return st(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new XT(s,i),l=r.targetId;n=new Ep(l,a)}}return n}function lI(e,t){let n;if(t instanceof Zs)n={update:Th(e,t.key,t.value)};else if(t instanceof _p)n={delete:Ga(e,t.key)};else if(t instanceof fr)n={update:Th(e,t.key,t.data),updateMask:_I(t.fieldMask)};else{if(!(t instanceof KT))return st(16599,{Vt:t.type});n={verify:Ga(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Qi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ws)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xi)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw st(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:iI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:st(27497)})(e,t.precondition)),n}function cI(e,t){return e&&e.length>0?(wt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Xe(s.updateTime):Xe(i);return a.isEqual(it.min())&&(a=Xe(i)),new HT(a,s.transformResults||[])})(n,t)))):[]}function uI(e,t){return{documents:[Ap(e,t.path)]}}function hI(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ap(e,s);const i=(function(h){if(h.length!==0)return bp(Be.create(h,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:Rr(g.field),direction:pI(g.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=$a(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(t.endAt)),{ft:n,parent:s}}function fI(e){let t=oI(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){wt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const g=Rp(p);return g instanceof Be&&tp(g)?g.getFilters():[g]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((g=>(function(V){return new Ks(br(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,yo(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){const g=!!p.before,v=p.values||[];return new Wi(v,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,v=p.values||[];return new Wi(v,g)})(n.endAt)),DT(t,s,a,i,l,"F",c,h)}function dI(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Rp(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=br(n.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=br(n.unaryFilter.field);return Bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=br(n.unaryFilter.field);return Bt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=br(n.unaryFilter.field);return Bt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Bt.create(br(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Be.create(n.compositeFilter.filters.map((r=>Rp(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(n.compositeFilter.op))})(e):st(30097,{filter:e})}function pI(e){return eI[e]}function mI(e){return nI[e]}function gI(e){return rI[e]}function Rr(e){return{fieldPath:e.canonicalString()}}function br(e){return Zt.fromServerFormat(e.fieldPath)}function bp(e){return e instanceof Bt?(function(n){if(n.op==="=="){if(lh(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(ah(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lh(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(ah(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:mI(n.op),value:n.value}}})(e):e instanceof Be?(function(n){const r=n.getFilters().map((s=>bp(s)));return r.length===1?r[0]:{compositeFilter:{op:gI(n.op),filters:r}}})(e):st(54877,{filter:e})}function _I(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Sp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class Pn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=te.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Pn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class yI{constructor(t){this.yt=t}}function EI(e){const t=fI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?qa(t,t.limit,"L"):t}class vI{constructor(){this.Cn=new TI}addToCollectionParentIndex(t,n){return this.Cn.add(n),k.resolve()}getCollectionParents(t,n){return k.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return k.resolve()}deleteFieldIndex(t,n){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,n){return k.resolve()}getDocumentsMatchingTarget(t,n){return k.resolve(null)}getIndexType(t,n){return k.resolve(0)}getFieldIndexes(t,n){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,n){return k.resolve(kn.min())}getMinOffsetFromCollectionGroup(t,n){return k.resolve(kn.min())}updateCollectionGroup(t,n,r){return k.resolve()}updateIndexEntries(t,n){return k.resolve()}}class TI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new zt(Pt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new zt(Pt.comparator)).toArray()}}const Ih={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cp=41943040;class Ee{static withCacheSize(t){return new Ee(t,Ee.DEFAULT_COLLECTION_PERCENTILE,Ee.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ee.DEFAULT_COLLECTION_PERCENTILE=10,Ee.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ee.DEFAULT=new Ee(Cp,Ee.DEFAULT_COLLECTION_PERCENTILE,Ee.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ee.DISABLED=new Ee(-1,0,0);class $r{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $r(0)}static cr(){return new $r(-1)}}const Ah="LruGarbageCollector",II=1048576;function wh([e,t],[n,r]){const s=pt(e,n);return s===0?pt(t,r):s}class AI{constructor(t){this.Ir=t,this.buffer=new zt(wh),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();wh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wI{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){J(Ah,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wr(n)?J(Ah,"Ignoring IndexedDB error during garbage collection: ",n):await Kr(n)}await this.Vr(3e5)}))}}class RI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return k.resolve(_o.ce);const r=new AI(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(Ih)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ih):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(t,r,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(h=Date.now(),Ar()<=yt.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function bI(e,t){return new RI(e,t)}class SI{constructor(){this.changes=new hr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class CI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class PI{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&xs(r.mutation,s,ke.empty(),Dt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,mt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=mt()){const s=tr();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=_s();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=tr();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,mt())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=gn();const a=Ns(),l=(function(){return Ns()})();return n.forEach(((c,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof fr)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),xs(d.mutation,h,d.mutation.getFieldMask(),Dt.now())):a.set(h.key,ke.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((h,d)=>a.set(h,d))),n.forEach(((h,d)=>l.set(h,new CI(d,a.get(h)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=Ns();let s=new xt(((a,l)=>a-l)),i=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||ke.empty();d=l.applyToLocalView(h,d),r.set(c,d);const p=(s.get(l.batchId)||mt()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=cp();d.forEach((g=>{if(!i.has(g)){const v=mp(n.get(g),r.get(g));v!==null&&p.set(g,v),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return k.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return et.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):sp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):k.resolve(tr());let l=$s,c=i;return a.next((h=>k.forEach(h,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?k.resolve():this.remoteDocumentCache.getEntry(t,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(t,h,i))).next((()=>this.computeViews(t,c,h,mt()))).next((d=>({batchId:l,changes:lp(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new et(n)).next((r=>{let s=_s();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=_s();return this.indexManager.getCollectionParents(t,i).next((l=>k.forEach(l,(c=>{const h=(function(p,g){return new Qr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))}));let l=_s();return a.forEach(((c,h)=>{const d=i.get(c);d!==void 0&&xs(d.mutation,h,ke.empty(),Dt.now()),To(n,h)&&(l=l.insert(c,h))})),l}))}}class VI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return k.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Xe(s.createTime)}})(n)),k.resolve()}getNamedQuery(t,n){return k.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:EI(s.bundledQuery),readTime:Xe(s.readTime)}})(n)),k.resolve()}}class DI{constructor(){this.overlays=new xt(et.comparator),this.qr=new Map}getOverlay(t,n){return k.resolve(this.overlays.get(n))}getOverlays(t,n){const r=tr();return k.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),k.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(t,n,r){const s=tr(),i=n.length+1,a=new et(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return k.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new xt(((h,d)=>h-d));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=tr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=tr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,d)=>l.set(h,d))),!(l.size()>=s)););return k.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new QT(n,r));let i=this.qr.get(n);i===void 0&&(i=mt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class NI{constructor(){this.sessionToken=te.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,k.resolve()}}class Ol{constructor(){this.Qr=new zt(Qt.$r),this.Ur=new zt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Qt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Qt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new et(new Pt([])),r=new Qt(n,t),s=new Qt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new et(new Pt([])),r=new Qt(n,t),s=new Qt(n,t+1);let i=mt();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Qt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Qt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return et.comparator(t.key,n.key)||pt(t.Yr,n.Yr)}static Kr(t,n){return pt(t.Yr,n.Yr)||et.comparator(t.key,n.key)}}class xI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Qt.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new WT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Qt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return k.resolve(a)}lookupMutationBatch(t,n){return k.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return k.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?wl:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Qt(n,0),s=new Qt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),k.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new zt(pt);return n.forEach((s=>{const i=new Qt(s,0),a=new Qt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;et.isDocumentKey(i)||(i=i.child(""));const a=new Qt(new et(i),0);let l=new zt(pt);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Yr)),!0)}),a),k.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){wt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(n.mutations,(s=>{const i=new Qt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Qt(n,0),s=this.Zr.firstAfterOrEqual(r);return k.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class OI{constructor(t){this.ri=t,this.docs=(function(){return new xt(et.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let r=gn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ae.newInvalidDocument(s))})),k.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=gn();const a=n.path,l=new et(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||cT(lT(d),r)<=0||(s.has(d.key)||To(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return k.resolve(i)}getAllFromCollectionGroup(t,n,r,s){st(9500)}ii(t,n){return k.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new MI(this)}getSize(t){return k.resolve(this.size)}}class MI extends SI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),k.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class kI{constructor(t){this.persistence=t,this.si=new hr((n=>Sl(n)),Cl),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new Ol,this.targetCount=0,this.ai=$r.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),k.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new $r(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,k.resolve()}updateTargetData(t,n){return this.Pr(n),k.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),k.waitFor(i).next((()=>s))}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return k.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),k.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),k.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),k.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return k.resolve(r)}containsKey(t,n){return k.resolve(this._i.containsKey(n))}}class Pp{constructor(t,n){this.ui={},this.overlays={},this.ci=new _o(0),this.li=!1,this.li=!0,this.hi=new NI,this.referenceDelegate=t(this),this.Pi=new kI(this),this.indexManager=new vI,this.remoteDocumentCache=(function(s){return new OI(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yI(n),this.Ii=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new DI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new xI(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){J("MemoryPersistence","Starting transaction:",t);const s=new LI(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class LI extends hT{constructor(t){super(),this.currentSequenceNumber=t}}class Ml{constructor(t){this.persistence=t,this.Ri=new Ol,this.Vi=null}static mi(t){return new Ml(t)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),k.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),k.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{const s=et.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,it.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return k.or([()=>k.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ji{constructor(t,n){this.persistence=t,this.pi=new hr((r=>pT(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=bI(this,n)}static mi(t,n){return new Ji(t,n)}Ei(){}di(t){return k.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return k.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?k.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,it.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Si(t.data.value)),n}br(t,n,r){return k.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return k.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class kl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=mt(),s=mt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kl(t,n.fromCache,r,s)}}class FI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class UI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VE()?8:fT(CE())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new FI;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(Ar()<=yt.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",wr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(Ar()<=yt.DEBUG&&J("QueryEngine","Query:",wr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ar()<=yt.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",wr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Qe(n))):k.resolve())}ys(t,n){if(fh(n))return k.resolve(null);let r=Qe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=qa(n,null,"F"),r=Qe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=mt(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,a,c.readTime)?this.ys(t,qa(n,null,"F")):this.vs(t,h,n,c)}))))})))))}ws(t,n,r,s){return fh(n)||s.isEqual(it.min())?k.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?k.resolve(null):(Ar()<=yt.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wr(n)),this.vs(t,a,n,aT(s,$s)).next((l=>l)))}))}Ds(t,n){let r=new zt(op(t));return n.forEach(((s,i)=>{To(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return Ar()<=yt.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",wr(n)),this.ps.getDocumentsMatchingQuery(t,n,kn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const Ll="LocalStore",BI=3e8;class jI{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new xt(pt),this.xs=new hr((i=>Sl(i)),Cl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new PI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function qI(e,t,n,r){return new jI(e,t,n,r)}async function Vp(e,t){const n=at(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=mt();for(const h of s){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:l})))}))}))}function $I(e,t){const n=at(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,d){const p=h.batch,g=p.keys();let v=k.resolve();return g.forEach((V=>{v=v.next((()=>d.getEntry(c,V))).next((x=>{const L=h.docVersions.get(V);wt(L!==null,48541),x.version.compareTo(L)<0&&(p.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),d.addEntry(x)))}))})),v.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=mt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Dp(e){const t=at(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function HI(e,t){const n=at(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p))));let v=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?v=v.withResumeToken(te.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(p,v),(function(x,L,$){return x.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=BI?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(g,v,d)&&l.push(n.Pi.updateTargetData(i,v))}));let c=gn(),h=mt();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(GI(i,a,t.documentUpdates).next((d=>{c=d.ks,h=d.qs}))),!r.isEqual(it.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return k.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function GI(e,t,n){let r=mt(),s=mt();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=gn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(it.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):J(Ll,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:a,qs:s}}))}function zI(e,t){const n=at(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=wl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function KI(e,t){const n=at(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,k.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new Pn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Ka(e,t,n){const r=at(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Wr(a))throw a;J(Ll,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Rh(e,t,n){const r=at(e);let s=it.min(),i=mt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,h,d){const p=at(c),g=p.xs.get(d);return g!==void 0?k.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)})(r,a,Qe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:mt()))).next((l=>(WI(r,xT(t),l),{documents:l,Qs:i})))))}function WI(e,t,n){let r=e.Os.get(t)||it.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class bh{constructor(){this.activeTargetIds=UT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class QI{constructor(){this.Mo=new bh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new bh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class XI{Oo(t){}shutdown(){}}const Sh="ConnectivityMonitor";class Ch{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(Sh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){J(Sh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vi=null;function Wa(){return vi===null?vi=(function(){return 268435456+Math.round(2147483648*Math.random())})():vi++,"0x"+vi.toString(16)}const ua="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===zi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Wa(),l=this.zo(t,n.toUriEncodedString());J(ua,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(l),d=vl(h);return this.Jo(t,l,c,r,d).then((p=>(J(ua,`Received RPC '${t}' ${a}: `,p),p)),(p=>{throw Ur(ua,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=YI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class ZI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const se="WebChannelConnection";class tA extends JI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Wa();return new Promise(((l,c)=>{const h=new xd;h.setWithCredentials(!0),h.listenOnce(Od.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case bi.NO_ERROR:const p=h.getResponseJson();J(se,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case bi.TIMEOUT:J(se,`RPC '${t}' ${a} timed out`),c(new X(M.DEADLINE_EXCEEDED,"Request time out"));break;case bi.HTTP_ERROR:const g=h.getStatus();if(J(se,`RPC '${t}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const V=v?.error;if(V&&V.status&&V.message){const x=(function($){const q=$.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(q)>=0?q:M.UNKNOWN})(V.status);c(new X(x,V.message))}else c(new X(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new X(M.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{J(se,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);J(se,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=Wa(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Ld(),l=kd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");J(se,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);this.I_(p);let g=!1,v=!1;const V=new ZI({Yo:L=>{v?J(se,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(g||(J(se,`Opening RPC '${t}' stream ${s} transport.`),p.open(),g=!0),J(se,`RPC '${t}' stream ${s} sending:`,L),p.send(L))},Zo:()=>p.close()}),x=(L,$,q)=>{L.listen($,(H=>{try{q(H)}catch(W){setTimeout((()=>{throw W}),0)}}))};return x(p,gs.EventType.OPEN,(()=>{v||(J(se,`RPC '${t}' stream ${s} transport opened.`),V.o_())})),x(p,gs.EventType.CLOSE,(()=>{v||(v=!0,J(se,`RPC '${t}' stream ${s} transport closed`),V.a_(),this.E_(p))})),x(p,gs.EventType.ERROR,(L=>{v||(v=!0,Ur(se,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.a_(new X(M.UNAVAILABLE,"The operation could not be completed")))})),x(p,gs.EventType.MESSAGE,(L=>{if(!v){const $=L.data[0];wt(!!$,16349);const q=$,H=q?.error||q[0]?.error;if(H){J(se,`RPC '${t}' stream ${s} received error:`,H);const W=H.status;let lt=(function(y){const I=Ut[y];if(I!==void 0)return yp(I)})(W),ft=H.message;lt===void 0&&(lt=M.INTERNAL,ft="Unknown error status: "+W+" with message "+H.message),v=!0,V.a_(new X(lt,ft)),p.close()}else J(se,`RPC '${t}' stream ${s} received:`,$),V.u_($)}})),x(l,Md.STAT_EVENT,(L=>{L.stat===Ma.PROXY?J(se,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===Ma.NOPROXY&&J(se,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function ha(){return typeof document<"u"?document:null}function Ro(e){return new sI(e,!0)}class Np{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ph="PersistentStream";class xp{constructor(t,n,r,s,i,a,l,c){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Np(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new X(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return J(Ph,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(J(Ph,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eA extends xp{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=aI(this.serializer,t),r=(function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?Xe(a.readTime):it.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=za(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=Ba(c)?{documents:uI(i,c)}:{query:hI(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Tp(i,a.resumeToken);const h=$a(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=Yi(i,a.snapshotVersion.toTimestamp());const h=$a(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,t);const r=dI(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=za(this.serializer),n.removeTarget=t,this.q_(n)}}class nA extends xp{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return wt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,wt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){wt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=cI(t.writeResults,t.commitTime),r=Xe(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=za(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>lI(this.serializer,r)))};this.q_(n)}}class rA{}class sA extends rA{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,Ha(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(M.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,Ha(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(M.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const cr="RemoteStore";class oA{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{dr(this)&&(J(cr,"Restarting streams for network reachability change."),await(async function(c){const h=at(c);h.Ea.add(4),await ei(h),h.Ra.set("Unknown"),h.Ea.delete(4),await bo(h)})(this))}))})),this.Ra=new iA(r,s)}}async function bo(e){if(dr(e))for(const t of e.da)await t(!0)}async function ei(e){for(const t of e.da)await t(!1)}function Op(e,t){const n=at(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),jl(n)?Bl(n):Xr(n).O_()&&Ul(n,t))}function Fl(e,t){const n=at(e),r=Xr(n);n.Ia.delete(t),r.O_()&&Mp(n,t),n.Ia.size===0&&(r.O_()?r.L_():dr(n)&&n.Ra.set("Unknown"))}function Ul(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xr(e).Y_(t)}function Mp(e,t){e.Va.Ue(t),Xr(e).Z_(t)}function Bl(e){e.Va=new tI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Xr(e).start(),e.Ra.ua()}function jl(e){return dr(e)&&!Xr(e).x_()&&e.Ia.size>0}function dr(e){return at(e).Ea.size===0}function kp(e){e.Va=void 0}async function aA(e){e.Ra.set("Online")}async function lA(e){e.Ia.forEach(((t,n)=>{Ul(e,t)}))}async function cA(e,t){kp(e),jl(e)?(e.Ra.ha(t),Bl(e)):e.Ra.set("Unknown")}async function uA(e,t,n){if(e.Ra.set("Online"),t instanceof vp&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){J(cr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Zi(e,r)}else if(t instanceof Vi?e.Va.Ze(t):t instanceof Ep?e.Va.st(t):e.Va.tt(t),!n.isEqual(it.min()))try{const r=await Dp(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,h)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(te.EMPTY_BYTE_STRING,d.snapshotVersion)),Mp(i,c);const p=new Pn(d.target,c,h,d.sequenceNumber);Ul(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){J(cr,"Failed to raise snapshot:",r),await Zi(e,r)}}async function Zi(e,t,n){if(!Wr(t))throw t;e.Ea.add(1),await ei(e),e.Ra.set("Offline"),n||(n=()=>Dp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{J(cr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await bo(e)}))}function Lp(e,t){return t().catch((n=>Zi(e,n,t)))}async function So(e){const t=at(e),n=Bn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wl;for(;hA(t);)try{const s=await zI(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,fA(t,s)}catch(s){await Zi(t,s)}Fp(t)&&Up(t)}function hA(e){return dr(e)&&e.Ta.length<10}function fA(e,t){e.Ta.push(t);const n=Bn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Fp(e){return dr(e)&&!Bn(e).x_()&&e.Ta.length>0}function Up(e){Bn(e).start()}async function dA(e){Bn(e).ra()}async function pA(e){const t=Bn(e);for(const n of e.Ta)t.ea(n.mutations)}async function mA(e,t,n){const r=e.Ta.shift(),s=Dl.from(r,t,n);await Lp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await So(e)}async function gA(e,t){t&&Bn(e).X_&&await(async function(r,s){if((function(a){return YT(a)&&a!==M.ABORTED})(s.code)){const i=r.Ta.shift();Bn(r).B_(),await Lp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await So(r)}})(e,t),Fp(e)&&Up(e)}async function Vh(e,t){const n=at(e);n.asyncQueue.verifyOperationInProgress(),J(cr,"RemoteStore received new credentials");const r=dr(n);n.Ea.add(3),await ei(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await bo(n)}async function _A(e,t){const n=at(e);t?(n.Ea.delete(2),await bo(n)):t||(n.Ea.add(2),await ei(n),n.Ra.set("Unknown"))}function Xr(e){return e.ma||(e.ma=(function(n,r,s){const i=at(n);return i.sa(),new eA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:aA.bind(null,e),t_:lA.bind(null,e),r_:cA.bind(null,e),H_:uA.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),jl(e)?Bl(e):e.Ra.set("Unknown")):(await e.ma.stop(),kp(e))}))),e.ma}function Bn(e){return e.fa||(e.fa=(function(n,r,s){const i=at(n);return i.sa(),new nA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:dA.bind(null,e),r_:gA.bind(null,e),ta:pA.bind(null,e),na:mA.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await So(e)):(await e.fa.stop(),e.Ta.length>0&&(J(cr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}class ql{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new ql(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(e,t){if(mn("AsyncQueue",`${t}: ${e}`),Wr(e))return new X(M.UNAVAILABLE,`${t}: ${e}`);throw e}class Nr{static emptySet(t){return new Nr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=_s(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Nr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Nr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class Dh{constructor(){this.ga=new xt(et.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):st(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Hr{constructor(t,n,r,s,i,a,l,c,h){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Hr(t,n,Nr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class yA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class EA{constructor(){this.queries=Nh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=at(n),i=s.queries;s.queries=Nh(),i.forEach(((a,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new X(M.ABORTED,"Firestore shutting down"))}}function Nh(){return new hr((e=>ip(e)),vo)}async function vA(e,t){const n=at(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new yA,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=$l(a,`Initialization of query '${wr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Hl(n)}async function TA(e,t){const n=at(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IA(e,t){const n=at(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Hl(n)}function AA(e,t,n){const r=at(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Hl(e){e.Ca.forEach((t=>{t.next()}))}var Qa,xh;(xh=Qa||(Qa={})).Ma="default",xh.Cache="cache";class wA{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Hr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Hr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Qa.Cache}}class Bp{constructor(t){this.key=t}}class jp{constructor(t){this.key=t}}class RA{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=mt(),this.mutatedKeys=mt(),this.eu=op(t),this.tu=new Nr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new Dh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,p)=>{const g=s.get(d),v=To(this.query,p)?p:null,V=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let L=!1;g&&v?g.data.isEqual(v.data)?V!==x&&(r.track({type:3,doc:v}),L=!0):this.su(g,v)||(r.track({type:2,doc:v}),L=!0,(c&&this.eu(v,c)>0||h&&this.eu(v,h)<0)&&(l=!0)):!g&&v?(r.track({type:0,doc:v}),L=!0):g&&!v&&(r.track({type:1,doc:g}),L=!0,(c||h)&&(l=!0)),L&&(v?(a=a.add(v),i=x?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,p)=>(function(v,V){const x=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:L})}};return x(v)-x(V)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new Hr(this.query,t.tu,i,a,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new jp(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new Bp(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=mt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Hr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gl="SyncEngine";class bA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class SA{constructor(t){this.key=t,this.hu=!1}}class CA{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new hr((l=>ip(l)),vo),this.Iu=new Map,this.Eu=new Set,this.du=new xt(et.comparator),this.Au=new Map,this.Ru=new Ol,this.Vu={},this.mu=new Map,this.fu=$r.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PA(e,t,n=!0){const r=Kp(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await qp(r,t,n,!0),s}async function VA(e,t){const n=Kp(e);await qp(n,t,!0,!1)}async function qp(e,t,n,r){const s=await KI(e.localStore,Qe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await DA(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Op(e.remoteStore,s),l}async function DA(e,t,n,r,s){e.pu=(p,g,v)=>(async function(x,L,$,q){let H=L.view.ru($);H.Cs&&(H=await Rh(x.localStore,L.query,!1).then((({documents:A})=>L.view.ru(A,H))));const W=q&&q.targetChanges.get(L.targetId),lt=q&&q.targetMismatches.get(L.targetId)!=null,ft=L.view.applyChanges(H,x.isPrimaryClient,W,lt);return Mh(x,L.targetId,ft.au),ft.snapshot})(e,p,g,v);const i=await Rh(e.localStore,t,!0),a=new RA(t,i.Qs),l=a.ru(i.documents),c=ti.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,c);Mh(e,n,h.au);const d=new bA(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function NA(e,t,n){const r=at(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!vo(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ka(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fl(r.remoteStore,s.targetId),Xa(r,s.targetId)})).catch(Kr)):(Xa(r,s.targetId),await Ka(r.localStore,s.targetId,!0))}async function xA(e,t){const n=at(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(n.remoteStore,r.targetId))}async function OA(e,t,n){const r=jA(e);try{const s=await(function(a,l){const c=at(a),h=Dt.now(),d=l.reduce(((v,V)=>v.add(V.key)),mt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let V=gn(),x=mt();return c.Ns.getEntries(v,d).next((L=>{V=L,V.forEach((($,q)=>{q.isValidDocument()||(x=x.add($))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,V))).next((L=>{p=L;const $=[];for(const q of l){const H=zT(q,p.get(q.key).overlayedDocument);H!=null&&$.push(new fr(q.key,H,Yd(H.value.mapValue),un.exists(!0)))}return c.mutationQueue.addMutationBatch(v,h,$,l)})).next((L=>{g=L;const $=L.applyToLocalDocumentSet(p,x);return c.documentOverlayCache.saveOverlays(v,L.batchId,$)}))})).then((()=>({batchId:g.batchId,changes:lp(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new xt(pt)),h=h.insert(l,c),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,n),await ni(r,s.changes),await So(r.remoteStore)}catch(s){const i=$l(s,"Failed to persist write");n.reject(i)}}async function $p(e,t){const n=at(e);try{const r=await HI(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?wt(a.hu,14607):s.removedDocuments.size>0&&(wt(a.hu,42227),a.hu=!1))})),await ni(n,r,t)}catch(r){await Kr(r)}}function Oh(e,t,n){const r=at(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=at(a);c.onlineState=l;let h=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)})),h&&Hl(c)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function MA(e,t,n){const r=at(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new xt(et.comparator);a=a.insert(i,ae.newNoDocument(i,it.min()));const l=mt().add(i),c=new wo(it.min(),new Map,new xt(pt),a,l);await $p(r,c),r.du=r.du.remove(i),r.Au.delete(t),zl(r)}else await Ka(r.localStore,t,!1).then((()=>Xa(r,t,n))).catch(Kr)}async function kA(e,t){const n=at(e),r=t.batch.batchId;try{const s=await $I(n.localStore,t);Gp(n,r,null),Hp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ni(n,s)}catch(s){await Kr(s)}}async function LA(e,t,n){const r=at(e);try{const s=await(function(a,l){const c=at(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(wt(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>c.localDocuments.getDocuments(h,d)))}))})(r.localStore,t);Gp(r,t,n),Hp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ni(r,s)}catch(s){await Kr(s)}}function Hp(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function Gp(e,t,n){const r=at(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Xa(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||zp(e,r)}))}function zp(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Fl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),zl(e))}function Mh(e,t,n){for(const r of n)r instanceof Bp?(e.Ru.addReference(r.key,t),FA(e,r)):r instanceof jp?(J(Gl,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||zp(e,r.key)):st(19791,{wu:r})}function FA(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(J(Gl,"New document in limbo: "+n),e.Eu.add(r),zl(e))}function zl(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new et(Pt.fromString(t)),r=e.fu.next();e.Au.set(r,new SA(n)),e.du=e.du.insert(n,r),Op(e.remoteStore,new Pn(Qe(Pl(n.path)),r,"TargetPurposeLimboResolution",_o.ce))}}async function ni(e,t,n){const r=at(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{a.push(r.pu(c,t,n).then((h=>{if((h||n)&&r.isPrimaryClient){const d=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(h){s.push(h);const d=kl.As(c.targetId,h);i.push(d)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(c,h){const d=at(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>k.forEach(h,(g=>k.forEach(g.Es,(v=>d.persistence.referenceDelegate.addReference(p,g.targetId,v))).next((()=>k.forEach(g.ds,(v=>d.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))))))}catch(p){if(!Wr(p))throw p;J(Ll,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const v=d.Ms.get(g),V=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(V);d.Ms=d.Ms.insert(g,x)}}})(r.localStore,i))}async function UA(e,t){const n=at(e);if(!n.currentUser.isEqual(t)){J(Gl,"User change. New user:",t.toKey());const r=await Vp(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new X(M.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ni(n,r.Ls)}}function BA(e,t){const n=at(e),r=n.Au.get(t);if(r&&r.hu)return mt().add(r.key);{let s=mt();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Kp(e){const t=at(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$p.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MA.bind(null,t),t.Pu.H_=IA.bind(null,t.eventManager),t.Pu.yu=AA.bind(null,t.eventManager),t}function jA(e){const t=at(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LA.bind(null,t),t}class to{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ro(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return qI(this.persistence,new UI,t.initialUser,this.serializer)}Cu(t){return new Pp(Ml.mi,this.serializer)}Du(t){return new QI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}to.provider={build:()=>new to};class qA extends to{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){wt(this.persistence.referenceDelegate instanceof Ji,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wI(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ee.withCacheSize(this.cacheSizeBytes):Ee.DEFAULT;return new Pp((r=>Ji.mi(r,n)),this.serializer)}}class Ya{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Oh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UA.bind(null,this.syncEngine),await _A(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new EA})()}createDatastore(t){const n=Ro(t.databaseInfo.databaseId),r=(function(i){return new tA(i)})(t.databaseInfo);return(function(i,a,l,c){return new sA(i,a,l,c)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new oA(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Oh(this.syncEngine,n,0)),(function(){return Ch.v()?new Ch:new XI})())}createSyncEngine(t,n){return(function(s,i,a,l,c,h,d){const p=new CA(s,i,a,l,c,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);J(cr,"RemoteStore shutting down."),r.Ea.add(5),await ei(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ya.provider={build:()=>new Ya};class $A{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):mn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const jn="FirestoreClient";class HA{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ie.UNAUTHENTICATED,this.clientId=Al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{J(jn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(J(jn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$l(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function fa(e,t){e.asyncQueue.verifyOperationInProgress(),J(jn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Vp(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function kh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await GA(e);J(jn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>Vh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>Vh(t.remoteStore,s))),e._onlineComponents=t}async function GA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){J(jn,"Using user provided OfflineComponentProvider");try{await fa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await fa(e,new to)}}else J(jn,"Using default OfflineComponentProvider"),await fa(e,new qA(void 0));return e._offlineComponents}async function Wp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(J(jn,"Using user provided OnlineComponentProvider"),await kh(e,e._uninitializedComponentsProvider._online)):(J(jn,"Using default OnlineComponentProvider"),await kh(e,new Ya))),e._onlineComponents}function zA(e){return Wp(e).then((t=>t.syncEngine))}async function Lh(e){const t=await Wp(e),n=t.eventManager;return n.onListen=PA.bind(null,t.syncEngine),n.onUnlisten=NA.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=VA.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xA.bind(null,t.syncEngine),n}function Qp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fh=new Map;const Xp="firestore.googleapis.com",Uh=!0;class Bh{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new X(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xp,this.ssl=Uh}else this.host=t.host,this.ssl=t.ssl??Uh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Cp;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<II)throw new X(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qp(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Co{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new X(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xv;switch(r.type){case"firstParty":return new tT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Fh.get(n);r&&(J("ComponentProvider","Removing Datastore"),Fh.delete(n),r.terminate())})(this),Promise.resolve()}}function KA(e,t,n,r={}){e=Ps(e,Co);const s=vl(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(AE(`https://${l}`),SE("Firestore",!0)),i.host!==Xp&&i.host!==l&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!qi(c,a)&&(e._setSettings(c),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=ie.MOCK_USER;else{h=wE(r.mockUserToken,e._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new X(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ie(p)}e._authCredentials=new Yv(new Ud(h,d))}}class pr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new pr(this.firestore,t,this._query)}}class Gt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Gt(this.firestore,t,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Js(n,Gt._jsonSchema))return new Gt(t,r||null,new et(Pt.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:jt("string",Gt._jsonSchemaVersion),referencePath:jt("string")};class On extends pr{constructor(t,n,r){super(t,n,Pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Gt(this.firestore,null,new et(t))}withConverter(t){return new On(this.firestore,t,this._path)}}function jh(e,t,...n){if(e=ar(e),Bd("collection","path",t),e instanceof Co){const r=Pt.fromString(t,...n);return Ju(r),new On(e,null,r)}{if(!(e instanceof Gt||e instanceof On))throw new X(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return Ju(r),new On(e.firestore,null,r)}}function WA(e,t,...n){if(e=ar(e),arguments.length===1&&(t=Al.newId()),Bd("doc","path",t),e instanceof Co){const r=Pt.fromString(t,...n);return Yu(r),new Gt(e,null,new et(r))}{if(!(e instanceof Gt||e instanceof On))throw new X(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Pt.fromString(t,...n));return Yu(r),new Gt(e.firestore,e instanceof On?e.converter:null,new et(r))}}const qh="AsyncQueue";class $h{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Np(this,"async_queue_retry"),this._c=()=>{const r=ha();r&&J(qh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=ha();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=ha();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ir;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Wr(t))throw t;J(qh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",Hh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=ql.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&st(47125,{Pc:Hh(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Hh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function Gh(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class eo extends Co{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new $h,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $h(t),this._firestoreClient=void 0,await t}}}function QA(e,t){const n=typeof e=="object"?e:Lv(),r=typeof e=="string"?e:zi,s=Nv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TE("firestore");i&&KA(s,...i)}return s}function Yp(e){if(e._terminated)throw new X(M.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||XA(e),e._firestoreClient}function XA(e){const t=e._freezeSettings(),n=(function(s,i,a,l){return new _T(s,i,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Qp(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new HA(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(e._componentsProvider))}class Pe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pe(te.fromBase64String(t))}catch(n){throw new X(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Pe(te.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Js(t,Pe._jsonSchema))return Pe.fromBase64String(t.bytes)}}Pe._jsonSchemaVersion="firestore/bytes/1.0",Pe._jsonSchema={type:jt("string",Pe._jsonSchemaVersion),bytes:jt("string")};class Kl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new X(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Jp{constructor(t){this._methodName=t}}class Ye{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new X(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new X(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return pt(this._lat,t._lat)||pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ye._jsonSchemaVersion}}static fromJSON(t){if(Js(t,Ye._jsonSchema))return new Ye(t.latitude,t.longitude)}}Ye._jsonSchemaVersion="firestore/geoPoint/1.0",Ye._jsonSchema={type:jt("string",Ye._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};class Je{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Je._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Js(t,Je._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Je(t.vectorValues);throw new X(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Je._jsonSchemaVersion="firestore/vectorValue/1.0",Je._jsonSchema={type:jt("string",Je._jsonSchemaVersion),vectorValues:jt("object")};const YA=/^__.*__$/;class JA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new fr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zs(t,this.data,n,this.fieldTransforms)}}function Zp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:e})}}class Wl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Wl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return no(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Zp(this.Ac)&&YA.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ro(t)}Cc(t,n,r,s=!1){return new Wl({Ac:t,methodName:n,Dc:r,path:Zt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(e){const t=e._freezeSettings(),n=Ro(e._databaseId);return new ZA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tw(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);rm("Data must be an object, but it was:",a,r);const l=em(r,a);let c,h;if(i.merge)c=new ke(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=nw(t,p,n);if(!a.contains(g))throw new X(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sw(d,g)||d.push(g)}c=new ke(d),h=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=a.fieldTransforms;return new JA(new Ce(l),c,h)}function ew(e,t,n,r=!1){return Ql(n,e.Cc(r?4:3,t))}function Ql(e,t){if(nm(e=ar(e)))return rm("Unsupported field value:",t,e),em(e,t);if(e instanceof Jp)return(function(r,s){if(!Zp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=Ql(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=ar(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Dt.fromDate(r);return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Dt){const i=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Ye)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pe)return{bytesValue:Tp(s.serializer,r._byteString)};if(r instanceof Gt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Je)return(function(a,l){return{mapValue:{fields:{[Qd]:{stringValue:Xd},[Ki]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vl(l.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${go(r)}`)})(e,t)}function em(e,t){const n={};return $d(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ur(e,((r,s)=>{const i=Ql(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function nm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof Ye||e instanceof Pe||e instanceof Gt||e instanceof Jp||e instanceof Je)}function rm(e,t,n){if(!nm(n)||!jd(n)){const r=go(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function nw(e,t,n){if((t=ar(t))instanceof Kl)return t._internalPath;if(typeof t=="string")return sm(e,t);throw no("Field path arguments must be of type string or ",e,!1,void 0,n)}const rw=new RegExp("[~\\*/\\[\\]]");function sm(e,t,n){if(t.search(rw)>=0)throw no(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Kl(...t.split("."))._internalPath}catch{throw no(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function no(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new X(M.INVALID_ARGUMENT,l+e+c)}function sw(e,t){return e.some((n=>n.isEqual(t)))}class im{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Xl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iw extends im{data(){return super.data()}}function Xl(e,t){return typeof t=="string"?sm(e,t):t instanceof Kl?t._internalPath:t._delegate._internalPath}function ow(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new X(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yl{}class om extends Yl{}function aw(e,t,...n){let r=[];t instanceof Yl&&r.push(t),r=r.concat(n),(function(i){const a=i.filter((c=>c instanceof Zl)).length,l=i.filter((c=>c instanceof Jl)).length;if(a>1||a>0&&l>0)throw new X(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)e=s._apply(e);return e}class Jl extends om{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Jl(t,n,r)}_apply(t){const n=this._parse(t);return am(t._query,n),new pr(t.firestore,t.converter,ja(t._query,n))}_parse(t){const n=tm(t.firestore);return(function(i,a,l,c,h,d,p){let g;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Kh(p,d);const V=[];for(const x of p)V.push(zh(c,i,x));g={arrayValue:{values:V}}}else g=zh(c,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Kh(p,d),g=ew(l,a,p,d==="in"||d==="not-in");return Bt.create(h,d,g)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Yl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Zl(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Be.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)am(a,c),a=ja(a,c)})(t._query,n),new pr(t.firestore,t.converter,ja(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tc extends om{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new tc(t,n)}_apply(t){const n=(function(s,i,a){if(s.startAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(i,a)})(t._query,this._field,this._direction);return new pr(t.firestore,t.converter,(function(s,i){const a=s.explicitOrderBy.concat([i]);return new Qr(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(t._query,n))}}function lw(e,t="asc"){const n=t,r=Xl("orderBy",e);return tc._create(r,n)}function zh(e,t,n){if(typeof(n=ar(n))=="string"){if(n==="")throw new X(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sp(t)&&n.indexOf("/")!==-1)throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Pt.fromString(n));if(!et.isDocumentKey(r))throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oh(e,new et(r))}if(n instanceof Gt)return oh(e,n._key);throw new X(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${go(n)}.`)}function Kh(e,t){if(!Array.isArray(e)||e.length===0)throw new X(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function am(e,t){const n=(function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(e.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new X(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class cw{convertValue(t,n="none"){switch(Un(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Fn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw st(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ur(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){const n=t.fields?.[Ki].arrayValue?.values?.map((r=>kt(r.doubleValue)));return new Je(n)}convertGeoPoint(t){return new Ye(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Eo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hs(t));default:return null}}convertTimestamp(t){const n=Ln(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Pt.fromString(t);wt(Sp(r),9688,{name:t});const s=new Gs(r.get(1),r.get(3)),i=new et(r.popFirst(5));return s.isEqual(n)||mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function uw(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Es{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class or extends im{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Di(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Xl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=or._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}or._jsonSchemaVersion="firestore/documentSnapshot/1.0",or._jsonSchema={type:jt("string",or._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class Di extends or{data(t={}){return super.data(t)}}class xr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Es(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Di(this._firestore,this._userDataWriter,r.key,r,new Es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new Di(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Es(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Di(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Es(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:hw(l.type),doc:c,oldIndex:h,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=xr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Al.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function hw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:e})}}xr._jsonSchemaVersion="firestore/querySnapshot/1.0",xr._jsonSchema={type:jt("string",xr._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class lm extends cw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function fw(e,t){const n=Ps(e.firestore,eo),r=WA(e),s=uw(e.converter,t);return pw(n,[tw(tm(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function dw(e,...t){e=ar(e);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Gh(t[r])||(n=t[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Gh(t[r])){const c=t[r];t[r]=c.next?.bind(c),t[r+1]=c.error?.bind(c),t[r+2]=c.complete?.bind(c)}let i,a,l;if(e instanceof Gt)a=Ps(e.firestore,eo),l=Pl(e._key.path),i={next:c=>{t[r]&&t[r](mw(a,e,c))},error:t[r+1],complete:t[r+2]};else{const c=Ps(e,pr);a=Ps(c.firestore,eo),l=c._query;const h=new lm(a);i={next:d=>{t[r]&&t[r](new xr(a,h,c,d))},error:t[r+1],complete:t[r+2]},ow(e._query)}return(function(h,d,p,g){const v=new $A(g),V=new wA(d,v,p);return h.asyncQueue.enqueueAndForget((async()=>vA(await Lh(h),V))),()=>{v.Nu(),h.asyncQueue.enqueueAndForget((async()=>TA(await Lh(h),V)))}})(Yp(a),l,s,i)}function pw(e,t){return(function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget((async()=>OA(await zA(r),s,i))),i.promise})(Yp(e),t)}function mw(e,t,n){const r=n.docs.get(t._key),s=new lm(e);return new or(e,s,t._key,r,new Es(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){zr=s})(kv),Hi(new js("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new eo(new Jv(r.getProvider("auth-internal")),new eT(a,r.getProvider("app-check-internal")),(function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(h.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Dr(Ku,Wu,t),Dr(Ku,Wu,"esm2020")})();const gw={apiKey:"AIzaSyAnH6OrDHBa-ljtrEpfAmwDzSXZdVqLBzw",authDomain:"taro-test-dc290.firebaseapp.com",projectId:"taro-test-dc290",storageBucket:"taro-test-dc290.firebasestorage.app",messagingSenderId:"561002476888",appId:"1:561002476888:web:8a51ece156741e965a212d",measurementId:"G-7LQTPF9BNL"},_w=Pd(gw),Wh=QA(_w),yw={class:"content"},Ew={__name:"App",setup(e){const t=ks(""),n=ks([]);kf(()=>{const s=aw(jh(Wh,"messages"),lw("createdAt","desc"));dw(s,i=>{const a=[];i.forEach(l=>{a.push({id:l.id,...l.data()})}),n.value=a})});const r=async()=>{if(t.value.trim()!=="")try{await fw(jh(Wh,"messages"),{text:t.value,createdAt:new Date}),t.value=""}catch(s){console.error("",s)}};return(s,i)=>(rr(),sr(be,null,[me(uE),ve("div",null,[i[1]||(i[1]=ve("h2",null,"Firebase ",-1)),Eg(ve("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a),placeholder:"",onKeyup:K_(r,["enter"])},null,544),[[G_,t.value]]),ve("button",{onClick:r},""),ve("ul",null,[(rr(!0),sr(be,null,Ff(n.value,a=>(rr(),sr("li",{key:a.id},Ni(a.text),1))),128))])]),ve("main",yw,[me(ln(vd))])],64))}},vw="modulepreload",Tw=function(e){return"/firebaseTest/"+e},Qh={},Iw=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(n.map(h=>{if(h=Tw(h),h in Qh)return;Qh[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":vw,d||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((v,V)=>{g.addEventListener("load",v),g.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Aw={},ww={class:"home"};function Rw(e,t){return rr(),sr("div",ww,[...t[0]||(t[0]=[ve("h1",null,"",-1),ve("p",null,"",-1)])])}const bw=Td(Aw,[["render",Rw]]),Sw=rE({history:Ly("/firebaseTest/"),routes:[{path:"/",name:"home",component:bw},{path:"/about",name:"about",component:()=>Iw(()=>import("./AboutView-DO4fFYYe.js"),[])}]}),cm=X_(Ew);cm.use(Sw);cm.mount("#app");export{Td as _,ve as a,sr as c,rr as o};
