import{_ as C,r as n,o as A,q as V,a as N,c as y,b as U,d as c,e as d,f as t,w as i,v as F,g as D,h as w,i as b,F as L,j as I,t as r,k as S,l as _,m as T,n as q,p as M}from"./index-B7TMpl7r.js";const P={class:"container"},z={class:"form-card"},E={class:"upload-section"},W={key:0,class:"preview"},$=["src"],j={class:"row"},R={class:"row"},G={class:"list-grid"},H={class:"card-img"},J=["src"],K={class:"tag"},O={class:"info"},Q={class:"status"},X={class:"comment"},Y=["onClick"],Z="dn6r2yt4y",ee="Favory",te={__name:"like",setup(k){const l=n(""),a=n(""),p=n("漫畫"),m=n("未完結"),v=n(5),u=n(""),f=n([]);A(()=>{const o=V(y(_,"myAnimeList"),N("createdAt","desc"));U(o,e=>{const s=[];e.forEach(g=>{s.push({id:g.id,...g.data()})}),f.value=s})});const B=async()=>{if(!l.value)return alert("請輸入名稱");if(!a.value)return alert("請先上傳圖片");try{await S(y(_,"myAnimeList"),{name:l.value,image:a.value,category:p.value,status:m.value,rating:v.value,comment:u.value,createdAt:new Date}),alert("儲存成功！"),l.value="",a.value="",u.value=""}catch(o){console.error(o)}},x=async o=>{confirm("確定要刪除這筆收藏嗎？")&&await T(q(_,"myAnimeList",o))},h=()=>{window.cloudinary.openUploadWidget({cloudName:Z,uploadPreset:ee,language:"zh",text:{zh:{menu:{files:"手機/電腦檔案",web:"網路圖片",camera:"打開相機"},local:{browse:"挑選一張萌圖",dd_title_single:"把圖片拖進來這裡吧！"}}},cropping:!0,croppingAspectRatio:.75,showSkipCropButton:!1,styles:{palette:{window:"#FFF5F7",windowBorder:"#FFB6C1",tabIcon:"#FF69B4",menuIcons:"#FF82AB",textDark:"#5D4037",textLight:"#FFFFFF",link:"#FF69B4",action:"#FF82AB",inactiveTabIcon:"#FFC1CC",error:"#F44235",inProgress:"#FF69B4",complete:"#20B832",sourceBg:"#FFF0F5"},fonts:{default:null,"'Noto Sans TC', sans-serif":"https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap"}},sources:["local","url","camera"],multiple:!1},(o,e)=>{!o&&e&&e.event==="success"&&(console.log("上傳成功！",e.info),a.value=e.info.secure_url)})};return(o,e)=>(d(),c("div",P,[e[9]||(e[9]=t("h1",null,"我的動漫收藏清單",-1)),t("div",z,[i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),placeholder:"作品名稱"},null,512),[[F,l.value]]),t("div",E,[t("button",{type:"button",onClick:h},"選擇並上傳封面圖"),a.value?(d(),c("div",W,[t("img",{src:a.value,style:{width:"80px","margin-top":"10px","border-radius":"5px"}},null,8,$)])):D("",!0)]),t("div",j,[i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s)},[...e[5]||(e[5]=[t("option",{value:"漫畫"},"漫畫",-1),t("option",{value:"動漫"},"動漫",-1)])],512),[[w,p.value]]),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s)},[...e[6]||(e[6]=[t("option",{value:"完結"},"完結",-1),t("option",{value:"未完結"},"未完結",-1)])],512),[[w,m.value]])]),t("div",R,[e[7]||(e[7]=b(" 評分：",-1)),i(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),min:"1",max:"5"},null,512),[[F,v.value]]),e[8]||(e[8]=b(" 顆星 ",-1))]),i(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),placeholder:"寫下評語..."},null,512),[[F,u.value]]),t("button",{onClick:B,class:"submit-btn"},"新增到收藏清單")]),e[10]||(e[10]=t("hr",null,null,-1)),t("div",G,[(d(!0),c(L,null,I(f.value,s=>(d(),c("div",{key:s.id,class:"item-card"},[t("div",H,[t("img",{src:s.image,alt:"cover"},null,8,J),t("span",K,r(s.category),1)]),t("div",O,[t("h3",null,r(s.name),1),t("p",Q,r(s.status)+" · "+r("⭐".repeat(s.rating)),1),t("p",X,r(s.comment),1),t("button",{class:"delete-btn",onClick:g=>x(s.id)},"刪除",8,Y)])]))),128))])]))}},se=C(te,[["__scopeId","data-v-fafbb9c7"]]),ae={__name:"AboutView",setup(k){return(l,a)=>(d(),M(se))}};export{ae as default};
