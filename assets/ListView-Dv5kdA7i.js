import{_ as L,r as o,o as B,a as N,c as i,b as n,d as e,w as v,v as h,e as S,f as x,t as u,F as M,g as T,h as b,i as $,j as U,k as w,q,l as A,m as I,n as j,p as E,s as O,u as P,x as Q}from"./index-DJqbY1TQ.js";const z={class:"container"},G={class:"form-card"},H={class:"upload-section"},J={class:"cute-upload-btn"},K={key:0},R={key:1},W={key:0,class:"preview-container"},X=["src"],Y={class:"row"},Z={class:"row rating-row"},ee={class:"stars"},te=["disabled"],se={class:"list-grid"},ae={class:"card-img"},oe=["src"],le={class:"tag"},ne={class:"info"},re={class:"status"},ie={class:"comment"},ue=["onClick"],ce="dn6r2yt4y",de="Favory",ve={__name:"like",setup(V){const k=o(!1),r=o(""),l=o(""),y=o("æ¼«ç•«"),f=o("æœªå®Œçµ"),p=o(5),m=o(""),_=o(!1),g=o([]),C=async a=>{const t=a.target.files[0];if(!t)return;_.value=!0;const s=new FormData;s.append("file",t),s.append("upload_preset",de);try{const d=await(await fetch(`https://api.cloudinary.com/v1_1/${ce}/image/upload`,{method:"POST",body:s})).json();d.secure_url&&(l.value=d.secure_url)}catch{alert("åœ–ç‰‡å‚³é€å¤±æ•— Q_Q")}finally{_.value=!1}};B(()=>{N(b,a=>{if(a){const t=q(U(w,"myFavoryList"),I("uid","==",a.uid),A("createdAt","desc"));j(t,s=>{const c=[];s.forEach(d=>{c.push({id:d.id,...d.data()})}),g.value=c})}else g.value=[]})});const F=async()=>{if(!r.value)return alert("è«‹è¼¸å…¥åç¨±ï¼");if(!l.value)return alert("è«‹æŒ‘é¸åœ–ç‰‡ï¼");if(!b.currentUser)return alert("ç™»å…¥å¾Œæ‰èƒ½æ”¶è—å–”ï¼");try{await $(U(w,"myFavoryList"),{name:r.value,image:l.value,category:y.value,status:f.value,rating:p.value,comment:m.value,uid:b.currentUser.uid,createdAt:new Date}),r.value="",l.value="",m.value="",k.value=!1}catch(a){console.error(a)}},D=async a=>{confirm("è¦è·Ÿé€™éƒ¨ä½œå“èªªæŽ°æŽ°å—Žï¼Ÿ")&&await O(P(w,"myFavoryList",a))};return(a,t)=>(n(),i("div",z,[t[10]||(t[10]=e("h1",{class:"main-title"},"ðŸŒ¸ æˆ‘çš„æ”¶è—å°æœ¬æœ¬ ðŸŒ¸",-1)),e("div",G,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),class:"cute-input",placeholder:"âœ¨ è¼¸å…¥ä½œå“åç¨±..."},null,512),[[h,r.value]]),e("div",H,[e("label",J,[e("input",{type:"file",onChange:C,accept:"image/*"},null,32),_.value?(n(),i("span",R,"ðŸª„ é­”æ³•å‚³é€ä¸­...")):(n(),i("span",K,"ðŸ“· æŒ‘é¸å°é¢åœ–"))]),l.value?(n(),i("div",W,[e("img",{src:l.value,class:"cute-preview"},null,8,X),e("button",{onClick:t[1]||(t[1]=s=>l.value=""),class:"remove-btn"},"âœ•")])):S("",!0)]),e("div",Y,[v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"cute-select"},[...t[6]||(t[6]=[e("option",{value:"æ¼«ç•«"},"ðŸ“– æ¼«ç•«",-1),e("option",{value:"å‹•æ¼«"},"ðŸ“º å‹•æ¼«",-1)])],512),[[x,y.value]]),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),class:"cute-select"},[...t[7]||(t[7]=[e("option",{value:"å®Œçµ"},"âœ… å®Œçµ",-1),e("option",{value:"æœªå®Œçµ"},"â³ æœªå®Œçµ",-1)])],512),[[x,f.value]])]),e("div",Z,[t[8]||(t[8]=e("span",null,"è©•åˆ†ï¼š",-1)),v(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>p.value=s),min:"1",max:"5",class:"cute-number"},null,512),[[h,p.value]]),e("span",ee,u("â­".repeat(p.value)),1)]),v(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.value=s),class:"cute-textarea",placeholder:"ðŸ’¬ å¯«é»žæ‚„æ‚„è©±å§..."},null,512),[[h,m.value]]),e("button",{onClick:F,class:"submit-btn",disabled:_.value},"æ–°å¢žåˆ°å°æœ¬æœ¬ âœ¨",8,te)]),e("div",se,[(n(!0),i(M,null,T(g.value,s=>(n(),i("div",{key:s.id,class:"item-card"},[e("div",ae,[e("img",{src:s.image,alt:"cover"},null,8,oe),e("span",le,u(s.category),1)]),e("div",ne,[e("h3",null,u(s.name),1),e("p",re,[e("span",null,u(s.status),1),t[9]||(t[9]=E(" â€§ ",-1)),e("span",null,u("â­".repeat(s.rating)),1)]),e("p",ie,u(s.comment||"é€™éƒ¨ä½œå“é‚„æ²’æœ‰è©•èªžå–”ï½ž"),1),e("button",{class:"delete-btn",onClick:c=>D(s.id)},"åˆªé™¤",8,ue)])]))),128))])]))}},pe=L(ve,[["__scopeId","data-v-0f06245e"]]),_e={__name:"ListView",setup(V){return(k,r)=>(n(),Q(pe))}};export{_e as default};
